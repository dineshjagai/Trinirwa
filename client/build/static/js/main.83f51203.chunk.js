(this.webpackJsonpprofile=this.webpackJsonpprofile||[]).push([[0],{108:function(e,t,n){},109:function(e,t,n){},110:function(e,t,n){},111:function(e,t,n){},143:function(e,t,n){},214:function(e,t,n){},240:function(e,t,n){},241:function(e,t,n){},244:function(e,t,n){},246:function(e,t,n){},247:function(e,t,n){},248:function(e,t,n){},249:function(e,t,n){},353:function(e,t,n){},354:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),o=n(16),s=n.n(o),r=(n(214),n(80),n(17)),i=n(20),l=(n(81),n(3)),d=n(8),u=n.n(d);function j(e,t){var n="/api/profile/interest/".concat(t);return u()({method:"POST",url:n,data:{interest:e}})}function m(e,t){var n="/api/profile/delete/interest/".concat(t);return u()({method:"DELETE",url:n,data:{interest:e}})}function b(e){var t="/api/tweets/all/".concat(e);return u()({method:"GET",url:t})}function h(e,t,n){var c="/api/tweeters/all/".concat(e);return u()({method:"GET",url:c,params:{page:t,limit:n}})}function f(e){var t="/api/tweets/count/all/".concat(e);return u()({method:"GET",url:t})}function O(e){var t="/api/profile/".concat(e);return u()({method:"GET",url:t})}function p(e){var t="/api/profile/followers/".concat(e);return u()({method:"GET",url:t})}function g(e){var t="/api/profile/friends/".concat(e);return u()({method:"GET",url:t})}function x(e,t){var n="/api/block/".concat(e);return u()({method:"POST",url:n,data:{follower:t}})}function v(e){var t="/api/blocked/".concat(e);return u()({method:"GET",url:t})}function w(e){return u()({method:"GET",url:"/api/profile/avatar/".concat(e)})}function y(e){return u()({method:"POST",url:"/api/createTweet/".concat(e.user),data:{content:e.content,tweet_date:e.tweet_date,type:e.type,tweetId:e.tweet_id}})}function N(e,t){return console.log("hasha",t),u()({method:"POST",url:"/api/tweet/hashtag/".concat(e),data:{hashtag:t}})}function S(e){return u()({method:"POST",url:"/api/comment/add/".concat(e.user),data:{commentId:e.comment_id,tweetId:e.tweet_id,content:e.content,timestamp:e.timestamp}})}function C(e){return u()({method:"GET",url:"/api/livestream/comments/all/".concat(e)})}function _(e){return u()({method:"GET",url:"/api/tweet/comments/all/".concat(e)})}function k(e,t){return u()({method:"PUT",url:"/api/tweet/comments/".concat(e),data:{comments:t}})}function I(e){return u()({method:"DELETE",url:"/api/tweet/comment/delete/".concat(e)})}function E(e,t){var n="/api/follow/".concat(e);return u()({method:"POST",url:n,data:{follower:t}})}function P(e,t){var n="/api/unfollow/".concat(e);return u()({method:"PUT",url:n,data:{follower:t}})}function T(e){var t="/api/tweet/delete/".concat(e);return u()({method:"DELETE",url:t})}function B(e,t){var n="/api/tweet/hide/".concat(e);return u()({method:"POST",url:n,data:{username:t}})}function F(e,t){var n="/api/tweet/likes/".concat(e);return u()({method:"PUT",url:n,data:{likes:t}})}function U(e,t){var n="/api/tweet/isliked/".concat(e,"/").concat(t,"/");return u()({method:"GET",url:n})}function D(e,t){var n="/api/tweet/like/".concat(e,"/");return u()({method:"POST",url:n,data:{tweetid:t}})}var L=function(e){return u()({method:"GET",url:"/api/tweet/hiders/all/".concat(e)})},R=function(e){return u()({method:"GET",url:"/api/profile/suggestions/".concat(e)})};function z(e,t){var n="/api/tweet/unlike/".concat(e,"/");return u()({method:"PUT",url:n,data:{tweetid:t}})}var A=function(e,t){return u()({method:"POST",url:"/api/updateNumberFailedLogins",data:{username:e,numberOfFailedLogins:t}})};function V(e){return u()({method:"POST",url:"/api/createMessage/".concat(e.user,"/").concat(e.receiver),data:{content:e.content,message_date:e.message_date,type:e.type,messageId:e.message_id}})}function W(e,t){var n="/api/profile/messages/".concat(e,"/").concat(t);return u()({method:"GET",url:n})}function M(e,t){return u()({method:"POST",url:"/api/hasRead/".concat(e,"/").concat(t),data:{}})}var J=n(47),G=n(1);function H(){var e=Object(c.useState)(""),t=Object(l.a)(e,2),n=t[0],a=t[1],o=Object(c.useState)(""),s=Object(l.a)(o,2),d=s[0],j=s[1],m=Object(c.useState)(""),b=Object(l.a)(m,2),h=b[0],f=b[1],O=Object(c.useState)(""),p=Object(l.a)(O,2),g=p[0],x=p[1],v=Object(c.useState)(""),w=Object(l.a)(v,2),y=w[0],N=w[1],S=Object(c.useState)(""),C=Object(l.a)(S,2),_=C[0],k=C[1],I=Object(i.g)();u.a.defaults.withCredentials=!0;return Object(G.jsx)("div",{className:"card shadow mx-auto mt-5",style:{width:"30rem"},children:Object(G.jsx)("div",{className:"container mx-1",children:Object(G.jsxs)("div",{className:"card-body p-xs",children:[Object(G.jsx)("h2",{className:"card-title text-center font-weight-bold",children:"Sign Up"}),Object(G.jsxs)("div",{className:"form-group",children:[Object(G.jsx)("label",{htmlFor:"new-username-form",children:"Username:"}),Object(G.jsx)("input",{id:"new-username-form",placeholder:"Enter Username",className:"form-control",onChange:function(e){return a(e.target.value)}})]}),Object(G.jsxs)("div",{className:"form-group",children:[Object(G.jsx)("label",{htmlFor:"exampleInputEmail1",children:"Email address"}),Object(G.jsx)("input",{type:"email",className:"form-control",id:"exampleInputEmail1","aria-describedby":"emailHelp",placeholder:"Enter email",onChange:function(e){return k(e.target.value)}}),Object(G.jsx)("small",{id:"emailHelp",className:"form-text text-muted",children:"We will never share your email with anyone else."})]}),Object(G.jsxs)("div",{className:"form-group",children:[Object(G.jsx)("label",{children:"First Name:"}),Object(G.jsx)("input",{type:"name",id:"new-first-name-form",className:"form-control",placeholder:"Enter First Name",onChange:function(e){return x(e.target.value)}})]}),Object(G.jsxs)("div",{className:"form-group",children:[Object(G.jsx)("label",{children:"Last Name:"}),Object(G.jsx)("input",{type:"name",id:"new-last-name-form",placeholder:"Enter Last Name",className:"form-control",onChange:function(e){return N(e.target.value)}})]}),Object(G.jsxs)("div",{className:"form-group",children:[Object(G.jsx)("label",{children:"Password:"}),Object(G.jsx)("input",{type:"password",id:"new-password-form","aria-describedby":"passwordHelp",className:"form-control",placeholder:"Enter Password",onChange:function(e){return j(e.target.value)}}),Object(G.jsx)("small",{id:"passwordHelp",className:"form-text text-muted",children:"Minimum eight characters, at least one uppercase letter, one lowercase letter, one number and one special character"})]}),Object(G.jsxs)("div",{className:"form-group",children:[Object(G.jsx)("label",{children:"Confirm Password:"}),Object(G.jsx)("input",{type:"password",id:"new-password-two-form",className:"form-control",placeholder:"Re-Enter Password",onChange:function(e){return f(e.target.value)}})]}),Object(G.jsx)("div",{className:"form-group",children:Object(G.jsx)("button",{type:"submit",className:"btn btn-primary w-100",onClick:function(){return Object(J.isSamePassword)(d,h)?Object(J.isValidUsername)(n)?Object(J.isValidPassword)(d)?Object(J.isValidEmail)(_)?void function(e,t,n,c,a){return localStorage.setItem("username",JSON.stringify(e)),u()({method:"POST",url:"/api/register",data:{username:e,password:t,first_name:n,last_name:c,email:a}})}(n,d,g,y,_).then((function(e){console.log(e),I.push("/signup")})).catch((function(e){console.log(e)})):(alert("Invalid email, please re-enter"),void(document.getElementById("exampleInputEmail1").value="")):(alert("Invalid password, password must have a minimum eight characters, at least one uppercase letter, one lowercase letter, one number and one special character"),document.getElementById("new-password-form").value="",void(document.getElementById("new-password-two-form").value="")):(alert("Invalid User Name"),void(document.getElementById("new-username-form").value="")):(alert("Passwords do not match, please re-enter"),document.getElementById("new-password-form").value="",void(document.getElementById("new-password-two-form").value=""))},children:"Sign Up"})}),Object(G.jsxs)("p",{children:["Already have an account?\xa0",Object(G.jsx)(r.b,{to:"/login",children:"Log in here!"})]})]})})})}var Z=n(27),Y=(n(240),n(100)),$=n.n(Y),q=n(414),K=n(416),Q=n(401),X=n(398),ee=n(397),te=(n(241),n(9));function ne(){var e=Object(te.getCurrentUsername)(),t=Object(c.useState)(!1),n=Object(l.a)(t,2),a=n[0],o=n[1],s=Object(c.useState)(!1),r=Object(l.a)(s,2),d=r[0],j=r[1],m=Object(c.useState)(""),b=Object(l.a)(m,2),h=b[0],f=b[1],O=function(){o(!1),f("")};return d?Object(G.jsx)(i.a,{to:"/login"}):Object(G.jsxs)("div",{children:[Object(G.jsx)("button",{id:"delete",style:{color:"#00695c",border:"none",backgroundColor:"inherit"},type:"button",onClick:function(){o(!0)},children:"Delete account"}),Object(G.jsxs)(K.a,{open:a,onClose:O,"aria-labelledby":"form-dialog-title",children:[Object(G.jsx)(ee.a,{id:"form-dialog-title",children:"Confirm account deletion"}),Object(G.jsx)(X.a,{children:Object(G.jsx)(q.a,{error:""!==h,autoFocus:!0,margin:"dense",id:"passwordInput",label:"Input password",type:"password",fullWidth:!0,helperText:h})}),Object(G.jsxs)(Q.a,{children:[Object(G.jsx)("button",{className:"btn cancel",type:"button",onClick:O,children:"Cancel"}),Object(G.jsx)("button",{className:"btn delete",type:"button",onClick:function(){var t=document.getElementById("passwordInput").value;""!==t&&function(e,t){var n="/api/profile/deactivate/".concat(e);return u()({method:"PUT",url:n,data:{password:t}})}(e,t).then((function(e){console.log(e),o(!1),j(!0)})).catch((function(e){console.log(e),f("Incorrect entry")}))},children:"Delete"})]})]})]})}var ce=n(402);function ae(){var e=Object(te.getCurrentUsername)(),t=Object(c.useState)(!1),n=Object(l.a)(t,2),a=n[0],o=n[1],s=Object(c.useState)(!0),r=Object(l.a)(s,2),i=r[0],d=r[1],j=Object(c.useState)(!0),m=Object(l.a)(j,2),b=m[0],h=m[1],f=function(){o(!1)};return Object(G.jsxs)("div",{children:[Object(G.jsx)("button",{id:"change",style:{color:"#00695c",border:"none",backgroundColor:"inherit"},type:"button",onClick:function(){d(!0),o(!0),h(!0)},children:"Change password"}),Object(G.jsxs)(K.a,{open:a,onClose:f,"aria-labelledby":"form-dialog-title",children:[Object(G.jsx)(ee.a,{id:"form-dialog-title",children:"Change password"}),Object(G.jsxs)(X.a,{children:[Object(G.jsx)(q.a,{autoFocus:!0,margin:"dense",id:"oldPassword",label:"Old password",type:"password",fullWidth:!0}),Object(G.jsx)(q.a,{error:!b,autoFocus:!0,onChange:function(e){var t;h((t=e.target.value,new RegExp("^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*])(?=.{8,})").test(t)))},margin:"dense",id:"newPassword",label:"Input new password",type:"password",fullWidth:!0,helperText:b?"Password is strong!":"Password needs a min length of 8. It must consist of at 8 ..."}),Object(G.jsx)(q.a,{error:!i,onChange:function(e){d(e.target.value===document.getElementById("newPassword").value)},autoFocus:!0,margin:"dense",id:"newPasswordConfirmed",label:"Confirm new password",type:"password",fullWidth:!0,helperText:i?"":"New password must be identical"})]}),Object(G.jsxs)(Q.a,{children:[Object(G.jsx)(ce.a,{onClick:f,color:"#00695c",children:"Cancel"}),Object(G.jsx)(ce.a,{onClick:function(){var t=document.getElementById("oldPassword").value,n=document.getElementById("newPassword").value;i&&b&&t!==n&&""!==n&&""!==t&&function(e,t,n){var c="/api/profile/password/".concat(e);return u()({method:"PUT",url:c,data:{newPassword:t,oldPassword:n}})}(e,n,t).then((function(e){200===e.status?o(!1):o(!0)})).catch((function(e){return console.log(e.message)}))},color:"primary",children:"Update"})]})]})]})}var oe=n(400),se=n(357),re=n(405),ie=n(404),le=n(403),de=n(418),ue=n(417),je=Object(le.a)((function(e){return{root:{width:"100%",maxWidth:360,backgroundColor:e.palette.background.paper}}}));function me(e){var t=e.secondary,n=e.title,o=e.secondTitle,s=e.getFunction,r=e.Icon,i=e.handle,d=e.iconText,u=je(),j=Object(c.useState)(!1),m=Object(l.a)(j,2),b=m[0],h=m[1],f=Object(c.useState)("paper"),O=Object(l.a)(f,2),p=O[0],g=O[1],x=Object(c.useState)([]),v=Object(l.a)(x,2),w=v[0],y=v[1],N=Object(te.getCurrentUsername)(),S=function(e){return console.log(e.profile_picture),Object(G.jsxs)(se.a,{children:[Object(G.jsx)(ie.a,{children:Object(G.jsx)(de.a,{alt:"",src:"/api/viewFile/".concat(e.profile_picture)})}),Object(G.jsx)(re.a,{primary:e.username,secondary:t}),Object(G.jsx)(ue.a,{title:d,placement:"top",children:Object(G.jsx)(r,{className:"button",color:"secondary",onClick:function(){return i(e.username)}})})]})};Object(c.useEffect)((function(){}),[w]);var C,_=function(){h(!1)},k=a.a.useRef(null);return a.a.useEffect((function(){if(b){var e=k.current;null!==e&&e.focus()}}),[b]),Object(G.jsxs)("div",{children:[Object(G.jsx)("button",{onClick:(C="paper",function(){console.log("here"),s(N).then((function(e){var t=[];e.data.friends?(t=e.data.friends.map((function(e){return S(e)})),console.log(e.data.friends)):e.data.followers&&(t=e.data.followers.map((function(e){return S(e)})),console.log(e.data.followers)),y(t)})).catch((function(e){console.log(e.message)})),h(!0),g(C)}),className:"btn",id:"delete",style:{color:"#00695c",border:"none",backgroundColor:"inherit"},type:"button",children:n}),Object(G.jsxs)(K.a,{open:b,onClose:_,scroll:p,"aria-labelledby":"scroll-dialog-title","aria-describedby":"scroll-dialog-description",children:[Object(G.jsx)(ee.a,{id:"scroll-dialog-title",children:o}),Object(G.jsx)(X.a,{dividers:"paper"===p,children:Object(G.jsx)(oe.a,{className:u.root,children:w})}),Object(G.jsx)(Q.a,{children:Object(G.jsx)("button",{onClick:_,className:"btn",id:"delete",style:{color:"#00695c",border:"none",backgroundColor:"inherit"},type:"button",children:"Close"})})]})]})}function be(e){var t=Object(te.getCurrentUsername)(),n=0;console.log(e.data),"undefined"!==typeof e.data&&(n=e.data.date);var c=e.data.profile_picture;console.log("pics".concat(c));var a="/api/viewFile/".concat(c);return Object(G.jsxs)("div",{className:"container-profile",children:[Object(G.jsxs)("div",{className:"pictures",children:[Object(G.jsx)("img",{src:a,alt:"",id:"overlay"}),Object(G.jsx)("img",{src:a,alt:"",id:"originalDiv"})]}),Object(G.jsx)("br",{}),Object(G.jsxs)("div",{className:"username",children:[Object(G.jsx)("span",{style:{color:"#0C8367"},id:"username",children:e.data.username}),Object(G.jsx)("span",{style:{color:"#0C8367"},id:"username",children:"Since: ".concat(n)})]}),Object(G.jsxs)("div",{className:"deleteButton",children:[Object(G.jsx)(me,{secondary:"blocked",title:"My Blocked Users",secondTitle:"Blocked Users",getFunction:v,Icon:$.a,handle:function(e){(function(e,t){var n="/api/unblock/".concat(e);return u()({method:"PUT",url:n,data:{follower:t}})})(t,e).then((function(e){console.log(e.message),v(t).then((function(e){console.log(e.data.friends)}))}))},iconText:"Unblock User"}),Object(G.jsx)(ne,{}),Object(G.jsx)(ae,{})]})]})}var he=n(72),fe=n(21),Oe=n(409),pe=n(410),ge=n(407),xe=n(73),ve=n(408),we=n(406),ye=n(198),Ne=n(127),Se=n.n(Ne),Ce=n(125),_e=n.n(Ce),ke=n(124),Ie=n.n(ke),Ee=n(126),Pe=n.n(Ee),Te=n(192),Be=n.n(Te),Fe=Object(le.a)((function(e){return{grow:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:Object(he.a)({display:"none"},e.breakpoints.up("sm"),{display:"block"}),search:Object(he.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(fe.b)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(fe.b)(e.palette.common.white,.25)},marginRight:e.spacing(2),marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(3),width:"auto"}),searchIcon:{padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:Object(he.a)({padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("md"),{width:"20ch"}),sectionDesktop:Object(he.a)({display:"none"},e.breakpoints.up("md"),{display:"flex"}),sectionMobile:Object(he.a)({display:"flex"},e.breakpoints.up("md"),{display:"none"})}}));function Ue(){var e=Fe(),t=Object(c.useState)(null),n=Object(l.a)(t,2),a=n[0],o=n[1],s=Object(c.useState)(null),r=Object(l.a)(s,2),d=r[0],u=r[1],j=Boolean(a),m=Boolean(d),b=function(e){o(e.currentTarget)},h=Object(i.g)(),f=function(){u(null)},O=function(){o(null);h.push("/profile"),f()},p=function(){h.push("/home")},g="primary-search-account-menu",x=Object(G.jsxs)(ye.a,{anchorEl:a,anchorOrigin:{vertical:"top",horizontal:"right"},id:g,keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:j,onClose:O,children:[Object(G.jsx)(we.a,{onClick:p,children:"Home"}),Object(G.jsx)(we.a,{onClick:O,children:"My Account"}),Object(G.jsx)(we.a,{onClick:function(){Object(te.logout)();h.push("/login")},children:"Log Out"})]}),v="primary-search-account-menu-mobile",w=Object(G.jsxs)(ye.a,{anchorEl:d,anchorOrigin:{vertical:"top",horizontal:"right"},id:v,keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:m,onClose:f,children:[Object(G.jsxs)(we.a,{onClick:p,children:[Object(G.jsx)(ge.a,{color:"inherit",children:Object(G.jsx)(ve.a,{children:Object(G.jsx)(Ie.a,{})})}),Object(G.jsx)("p",{children:"Home"})]}),Object(G.jsxs)(we.a,{children:[Object(G.jsx)(ge.a,{"aria-label":"show 4 new mails",color:"inherit",children:Object(G.jsx)(ve.a,{badgeContent:4,color:"secondary",children:Object(G.jsx)(_e.a,{})})}),Object(G.jsx)("p",{children:"Messages"})]}),Object(G.jsxs)(we.a,{children:[Object(G.jsx)(ge.a,{"aria-label":"show 11 new notifications",color:"inherit",children:Object(G.jsx)(ve.a,{badgeContent:11,color:"secondary",children:Object(G.jsx)(Pe.a,{})})}),Object(G.jsx)("p",{children:"Notifications"})]}),Object(G.jsxs)(we.a,{onClick:b,children:[Object(G.jsx)(ge.a,{"aria-label":"account of current user","aria-controls":"primary-search-account-menu","aria-haspopup":"true",color:"inherit",onClick:p,children:Object(G.jsx)(Se.a,{})}),Object(G.jsx)("p",{children:"Home"})]})]});return Object(G.jsx)("div",{style:{position:"relative",top:"0px"},children:Object(G.jsx)("div",{style:{position:"relative",top:"0px"},className:"rest",children:Object(G.jsxs)("div",{className:e.grow,children:[Object(G.jsx)(Oe.a,{style:{backgroundColor:"#0C8367"},position:"static",children:Object(G.jsxs)(pe.a,{children:[Object(G.jsx)(xe.a,{className:e.title,variant:"h6",noWrap:!0,children:"Trinirwa Microblog"}),Object(G.jsx)("div",{className:e.grow}),Object(G.jsxs)("div",{className:e.sectionDesktop,children:[Object(G.jsx)(ge.a,{onClick:p,color:"inherit",children:Object(G.jsx)(ve.a,{children:Object(G.jsx)(Ie.a,{})})}),Object(G.jsx)(ge.a,{"aria-label":"show 4 new mails",color:"inherit",children:Object(G.jsx)(ve.a,{badgeContent:4,color:"secondary",children:Object(G.jsx)(_e.a,{})})}),Object(G.jsx)(ge.a,{"aria-label":"show 17 new notifications",color:"inherit",children:Object(G.jsx)(ve.a,{badgeContent:17,color:"secondary",children:Object(G.jsx)(Pe.a,{})})}),Object(G.jsx)(ge.a,{edge:"end","aria-label":"account of current user","aria-controls":g,"aria-haspopup":"true",onClick:b,color:"inherit",children:Object(G.jsx)(Se.a,{})})]}),Object(G.jsx)("div",{className:e.sectionMobile,children:Object(G.jsx)(ge.a,{"aria-label":"show more","aria-controls":v,"aria-haspopup":"true",onClick:function(e){u(e.currentTarget)},color:"inherit",children:Object(G.jsx)(Be.a,{})})})]})}),w,x]})})})}n(244);var De=n(411);function Le(e){var t=a.a.useState(!1),n=Object(l.a)(t,2),c=n[0],o=n[1],s=function(){o(!0)},r=function(){var t=document.getElementById("interest").value;e.onClose(t),o(!1)};return Object(G.jsxs)("div",{children:[Object(G.jsx)(ce.a,{color:"primary",onClick:s,children:"Add interest"}),Object(G.jsxs)(K.a,{open:c,onClose:s,"aria-labelledby":"form-dialog-title",children:[Object(G.jsx)(ee.a,{id:"form-dialog-title",children:"Add interest"}),Object(G.jsx)(X.a,{children:Object(G.jsx)(q.a,{autoFocus:!0,margin:"dense",id:"interest",type:"string",fullWidth:!0})}),Object(G.jsxs)(Q.a,{children:[Object(G.jsx)(ce.a,{onClick:r,color:"primary",children:"Cancel"}),Object(G.jsx)(ce.a,{onClick:r,color:"primary",children:"Add"})]})]})]})}function Re(e){var t=e.interests,n=e.addInterest,c=e.deleteInterest,a=[];return t.forEach((function(e){a.push(Object(G.jsx)("li",{onClick:function(){return c(e)},className:"badge rounded-pill bg-secondary m-2",children:e},e))})),Object(G.jsxs)("div",{className:"wrapper",children:[Object(G.jsx)("div",{className:"section1",children:Object(G.jsx)("ul",{children:a})}),Object(G.jsx)(De.a,{variant:"middle"}),Object(G.jsx)("div",{className:"section2",children:Object(G.jsx)(Le,{onClose:n})})]})}n(108);var ze=n(63),Ae=n.n(ze),Ve=n(62),We=n.n(Ve),Me=(n(143),Object(le.a)((function(e){return{root:{"& > *":{margin:e.spacing(2),borderRadius:"100%",padding:0,overflow:"none"}}}})));function Je(e){var t=e.info,n=e.handleB,c=e.handleF,a=Me();return Object(G.jsxs)("div",{className:"Container_two",children:[Object(G.jsxs)("div",{className:a.root,children:[Object(G.jsx)(ue.a,{title:"Block user",placement:"top",children:Object(G.jsx)(We.a,{fontSize:"small",className:"button",color:"secondary",onClick:function(){return n(t.username)}})}),Object(G.jsx)(ue.a,{title:"Follow",placement:"top",children:Object(G.jsx)(Ae.a,{fontSize:"small",className:"button",onClick:function(){return c(t.username)}})})]}),Object(G.jsx)("div",{className:"followerContainer",children:Object(G.jsx)("div",{className:"myimgContainer",children:Object(G.jsx)("img",{className:"myimg",src:"/api/viewFile/".concat(t.profile_picture),alt:""})})}),Object(G.jsx)("div",{style:{fontWeight:"bold",color:"#0C8367"},className:"text",children:t.username})]})}function Ge(){var e=Object(te.getCurrentUsername)(),t=Object(c.useState)([]),n=Object(l.a)(t,2),a=n[0],o=n[1];Object(c.useEffect)((function(){p(e).then((function(e){o(e.data.followers)}))}),[]);var s=function(t){x(e,t).then((function(t){console.log(t.message),p(e).then((function(e){o(e.data.followers)}))}))},r=function(t){E(e,t).then((function(t){console.log(t.message),p(e).then((function(e){o(e.data.followers)}))}))},i=a.map((function(e){return Object(G.jsx)(Je,{info:e,handleB:s,handleF:r})}));return Object(G.jsxs)("div",{className:"box-container",children:[Object(G.jsx)("div",{className:"buttonFollowers",children:Object(G.jsx)(me,{secondary:"follower",title:"All followers",secondTitle:"All followers",getFunction:p,Icon:Ae.a,handle:r,iconText:"Follow"})}),Object(G.jsx)("div",{style:{color:"#0C8367"},className:"title",children:"Followers"}),Object(G.jsx)("br",{}),Object(G.jsx)("div",{className:"box",children:Object(G.jsx)("div",{className:"containers",children:i})})]})}var He=n(64),Ze=n.n(He),Ye=n(193),$e=n.n(Ye),qe=Object(le.a)((function(e){return{root:{"& > *":{margin:e.spacing(1.5),borderRadius:"100%",padding:0,overflow:"none"}}}}));function Ke(e){var t=e.info,n=e.handleB,c=e.handleMessage,a=e.handleU,o=qe();return Object(G.jsxs)("div",{className:"Container_two",children:[Object(G.jsxs)("div",{className:o.root,children:[Object(G.jsx)(ue.a,{title:"Message",placement:"top",children:Object(G.jsx)($e.a,{fontSize:"small",className:"button",onClick:function(){return c(t.username)}})}),Object(G.jsx)(ue.a,{title:"Block user",placement:"top",children:Object(G.jsx)(We.a,{fontSize:"small",className:"button",color:"secondary",onClick:function(){return n(t.username)}})}),Object(G.jsx)(ue.a,{title:"Unfollow",placement:"top",children:Object(G.jsx)(Ze.a,{fontSize:"small",className:"button",onClick:function(){return a(t.username)}})})]}),Object(G.jsx)("div",{className:"followerContainer",children:Object(G.jsx)("div",{className:"myimgContainer",children:Object(G.jsx)("img",{className:"myimg",src:"/api/viewFile/".concat(t.profile_picture),alt:""})})}),Object(G.jsx)("div",{style:{fontWeight:"bold",color:"#0C8367"},className:"text",children:t.username})]})}function Qe(){var e=Object(i.g)(),t=Object(te.getCurrentUsername)(),n=Object(c.useState)([]),a=Object(l.a)(n,2),o=a[0],s=a[1];Object(c.useEffect)((function(){g(t).then((function(e){s(e.data.friends)}))}),[]);var r=function(e){x(t,e).then((function(e){console.log(e.message),g(t).then((function(e){s(e.data.friends)}))}))},d=function(e){P(t,e).then((function(e){console.log(e.message),g(t).then((function(e){s(e.data.friends)}))}))},u=function(t){console.log(t),localStorage.setItem("receiver",JSON.stringify(t)),e.push("/message")},j=o.map((function(e){return Object(G.jsx)(Ke,{info:e,handleMessage:u,handleB:r,handleU:d})}));return Object(G.jsxs)("div",{className:"box-container",children:[Object(G.jsx)("div",{className:"buttonFollowers",children:Object(G.jsx)(me,{secondary:"friends",title:"All friends",secondTitle:"All friends",getFunction:g,Icon:Ze.a,handle:d,iconText:"Unfollow"})}),Object(G.jsx)("div",{style:{color:"#0C8367"},className:"title",children:"Friends"}),Object(G.jsx)("br",{}),Object(G.jsx)("div",{className:"box",children:Object(G.jsx)("div",{className:"containers",children:j})})]})}var Xe=n(10),et=n.n(Xe),tt=n(15),nt=n(68),ct=n.n(nt),at=n(103),ot=n.n(at),st=n(65),rt=n.n(st),it=n(66),lt=n.n(it),dt=n(67),ut=n.n(dt),jt=(n(109),n(102)),mt=n.n(jt),bt=n(101),ht=n.n(bt);n(246);function ft(e){var t=e.id,n=e.handleComment,a=Object(c.useState)(""),o=Object(l.a)(a,2),s=o[0],r=o[1],i=Object(c.useState)(255),d=Object(l.a)(i,2),u=d[0],j=d[1];return Object(G.jsxs)("div",{className:"comment_box",children:[Object(G.jsx)("div",{className:"commentInpCtn",children:Object(G.jsx)(q.a,{id:"".concat(t),label:"Comment on post",multiline:!0,rowsMax:4,helperText:"".concat(u," remaining chars"),variant:"outlined",inputProps:{maxLength:255},onChange:function(e){return function(e){if(e.target.value.length>=0){var t=255-e.target.value.length;j(t),r(e.target.value),console.log(s)}}(e)},fullWidth:!0})}),Object(G.jsx)("div",{className:"commentBtnCtn",children:Object(G.jsx)("button",{onClick:function(){return n(s)},id:"commentButton",type:"button",children:" Comment"})})]})}n(110);var Ot=n(412);function pt(e){var t=e.id,n=e.content,o=e.updatePost,s=n,r=a.a.useState(!1),i=Object(l.a)(r,2),d=i[0],u=i[1],j=Object(c.useState)(255),m=Object(l.a)(j,2),b=m[0],h=m[1],f=Object(c.useState)(""),O=Object(l.a)(f,2),p=O[0],g=O[1],x=function(){u(!1)};return Object(G.jsxs)("div",{children:[Object(G.jsx)("button",{onClick:function(){u(!0)},id:"editBtn",type:"button",children:"Edit"}),Object(G.jsxs)(K.a,{open:d,onClose:x,"aria-labelledby":"form-dialog-title",children:[Object(G.jsx)(ee.a,{id:"form-dialog-title",children:"Subscribe"}),Object(G.jsxs)(X.a,{children:[Object(G.jsx)(Ot.a,{children:"Changes will be made once you post them!"}),Object(G.jsx)(q.a,{autoFocus:!0,margin:"dense",id:"name".concat(t),label:"Edit post",type:"email",multiline:!0,fullWidth:!0,helperText:"".concat(b," remaining chars"),defaultValue:s,inputProps:{maxLength:255},onChange:function(e){return function(e){g(e.target.value),h(255-e.target.value.length)}(e)}})]}),Object(G.jsxs)(Q.a,{children:[Object(G.jsx)(ce.a,{style:{color:"green"},onClick:x,color:"primary",children:"Cancel"}),Object(G.jsx)(ce.a,{style:{color:"green"},onClick:function(){return o(p),void u(!1)},color:"primary",children:"Post changes"})]})]})]})}function gt(e){var t=e.data,n=e.handleDeleteComment,a=Object(c.useState)(""),o=Object(l.a)(a,2),s=o[0],r=o[1],i=Object(c.useState)(t.content),d=Object(l.a)(i,2),j=d[0],m=d[1],b=Object(te.getCurrentUsername)(),h=t.user===b,f=function(){var e=Object(tt.a)(et.a.mark((function e(){return et.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w(t.user).then((function(e){r(e.data.avatar[0].profile_picture)})).catch((function(e){console.log(e.message)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){f()}),[]),Object(G.jsxs)("div",{className:"comment_cont",stlye:{height:"200px",width:"100px",backgroundColor:"red"},children:[Object(G.jsxs)("div",{className:"comment_header",children:[Object(G.jsx)("div",{className:"header_profile",children:Object(G.jsx)("img",{id:"comment_picture",src:"/api/viewFile/".concat(s),alt:""})}),Object(G.jsx)("div",{className:"header_name",children:Object(G.jsx)("span",{id:"cmnt_username",children:t.user})})]}),Object(G.jsxs)("div",{className:"cmnt_cntBtn_box",style:{width:"fit-content"},children:[Object(G.jsx)("div",{className:"cmnt_cnt_box",children:Object(G.jsx)("span",{id:"cmnt_cnt",children:j})}),Object(G.jsxs)("div",{className:"cmnt_btns_box",children:[Object(G.jsx)("div",{style:{display:h?"block":"none"},className:"cmnt_EditBtn_box",children:Object(G.jsx)(pt,{id:t.comm_id,updatePost:function(e){""!==e&&(m(e),function(e,t){return u()({method:"PUT",url:"/api/tweet/comment/update/".concat(e),data:{content:t}})}(t.comm_id,e).then((function(e){console.log(e.message)})).catch((function(e){return console.log(e.message)})))},content:j})}),Object(G.jsx)("div",{style:{display:h?"block":"none"},className:"cmnt_EditBtn_box",children:Object(G.jsx)("button",{onClick:function(){return n(t.comm_id)},id:"deleteBtn",type:"button",children:"Delete"})})]})]})]})}var xt=n(6),vt=n(194),wt=n.n(vt),yt=n(195),Nt=n.n(yt),St=Object(xt.a)((function(e){return{root:{margin:0,padding:e.spacing(2)},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}}}))((function(e){var t=e.children,n=e.classes,c=e.onClose;return Object(G.jsxs)(ee.a,{disableTypography:!0,className:n.root,children:[Object(G.jsx)(xe.a,{variant:"h6",children:t}),c?Object(G.jsx)(ge.a,{"aria-label":"close",className:n.closeButton,onClick:c,children:Object(G.jsx)(wt.a,{})}):null]})})),Ct=Object(xt.a)((function(e){return{root:{padding:e.spacing(2)}}}))(X.a),_t=Object(xt.a)((function(e){return{root:{margin:0,padding:e.spacing(1)}}}))(Q.a);function kt(e){var t=e.tweetId,n=Object(c.useState)([]),o=Object(l.a)(n,2),s=o[0],r=o[1],i=Object(c.useState)([]),d=Object(l.a)(i,2),u=d[0],j=d[1],m=a.a.useState(!1),b=Object(l.a)(m,2),h=b[0],f=b[1],O=function(){var e=Object(tt.a)(et.a.mark((function e(){return et.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_(t).then((function(e){var t=e.data.comments;j(t.map((function(e){return e.user})))})).catch((function(e){return console.log(e.message)}));case 2:return e.next=4,L(t).then((function(e){r(e.data.hiders.map((function(e){return e.user})))})).catch((function(e){return console.log(e.message)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=function(){f(!1)};return Object(c.useEffect)((function(){O()}),[]),Object(c.useEffect)((function(){}),[s,u,h]),Object(G.jsxs)("div",{children:[Object(G.jsxs)("div",{children:[Object(G.jsx)(ge.a,{onClick:function(){f(!0)},style:{borderRadius:"50%",padding:"3"},children:Object(G.jsx)(Nt.a,{})}),Object(G.jsx)("span",{id:"analytics_btn",style:{color:"#0C8367"},children:"Analytics"})]}),Object(G.jsxs)(K.a,{onClose:p,"aria-labelledby":"customized-dialog-title",open:h,children:[Object(G.jsx)(St,{id:"customized-dialog-title",onClose:p,children:"Tweet analytics"}),Object(G.jsx)(Ct,{dividers:!0,children:Object(G.jsxs)("div",{style:{display:"flex",minWidth:"100px"},children:[Object(G.jsxs)("div",{children:[Object(G.jsx)("span",{style:{margin:"auto",color:"#0C8367",fontWeight:"bold"},children:"Commentors"}),Object(G.jsx)("ol",{style:{margin:"auto",listStyleType:"circle"},children:u.map((function(e){return Object(G.jsx)("li",{children:e})}))})]}),Object(G.jsxs)("div",{style:{marginLeft:"5px",borderRadius:"8px",backgroundColor:"#D0EAE4"},className:"hiders",children:[Object(G.jsx)("div",{style:{display:"flex"},children:Object(G.jsx)("span",{style:{margin:"auto",color:"#0C8367",fontWeight:"bold"},children:"Hiders"})}),Object(G.jsx)("ol",{style:{margin:"auto",listStyleType:"circle"},children:s.map((function(e){return Object(G.jsxs)("li",{children:[e," "]},e)}))})]})]})}),Object(G.jsx)(_t,{})]})]})}var It=n(54);function Et(e){var t=e.data,n=e.handleDelete,a=Object(te.getCurrentUsername)(),o=Object(c.useState)(!1),s=Object(l.a)(o,2),r=s[0],i=s[1],d=Object(c.useState)(t.tweet_likes),u=Object(l.a)(d,2),j=u[0],m=u[1],b=Object(c.useState)(t.tweet_comments),h=Object(l.a)(b,2),f=h[0],O=h[1],p=Object(c.useState)(t.tweet_id),g=Object(l.a)(p,1)[0],x=Object(c.useState)(t.tweet_blocks),v=Object(l.a)(x,2),y=(v[0],v[1],Object(c.useState)(t.user===a)),N=Object(l.a)(y,1)[0],C=Object(c.useState)(""),E=Object(l.a)(C,2),P=E[0],T=E[1],B=Object(c.useState)(!1),R=Object(l.a)(B,2),A=R[0],V=R[1],W=Object(c.useState)([]),M=Object(l.a)(W,2),J=M[0],H=(M[1],Object(c.useState)([])),Z=Object(l.a)(H,2),Y=Z[0],$=Z[1],q=Object(c.useState)(!0),K=Object(l.a)(q,2),Q=K[0],X=K[1],ee=(Object(te.getCurrentHashTag)(),function(){var e=Object(tt.a)(et.a.mark((function e(){return et.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w(t.user).then((function(e){T(e.data.avatar[0].profile_picture)})).catch((function(e){console.log(e.message)}));case 2:return e.next=4,U(a,t.tweet_id).then((function(e){e.data.bool.length?i(!0):i(!1)})).catch((function(e){console.log(e.message)}));case 4:return e.next=6,_(t.tweet_id).then((function(e){var t=e.data.comments;$(t)})).catch((function(e){return console.log(e.message)}));case 6:return e.next=8,L(g).then((function(e){console.log(e.data)})).catch((function(e){return console.log(e.message)}));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()),ne=function(e){var t=Y.filter((function(t){return t.comm_id!==e}));$(t),I(e).then((function(e){console.log(e),O(f-1)})).catch((function(e){return console.log(e.message)}))};Object(c.useEffect)((function(){}),[J]),Object(c.useEffect)((function(){ee()}),[]);var ce=t.tweet_date.split("T")[0],ae="/api/viewFile/".concat(P),oe="/api/viewFile/".concat(t.content);return Object(G.jsx)(G.Fragment,{children:Object(G.jsxs)("div",{style:{display:Q?"block":"none"},id:"container_tweet",children:[Object(G.jsxs)("div",{className:"tweet_header",children:[Object(G.jsx)("div",{className:"tweet_img",children:Object(G.jsx)("img",{className:"tweet_header",id:"tweet_author_picture",src:ae,alt:""})}),Object(G.jsxs)("div",{className:"tweet_text",children:[Object(G.jsx)("span",{style:{fontSize:"13px",fontWeight:"bold"},id:"author_username",children:t.user}),Object(G.jsx)("span",{style:{fontSize:"10px"},id:"date",children:ce})]})]}),Object(G.jsx)("div",{id:"menu",children:Object(G.jsx)(ue.a,{title:N?"Delete post":"Hide post",placement:"top",children:Object(G.jsx)(ge.a,{style:{borderRadius:"50%",padding:"3",color:"#0C8367"},onClick:function(){X(!1),n(g,N)},children:Object(G.jsx)(ht.a,{id:t.tweet_id})})})}),Object(G.jsx)(De.a,{variant:"middle"}),Object(G.jsx)("div",{className:"tweet_content",children:Object(G.jsxs)(G.Fragment,{children:["text"===t.type&&Object(G.jsx)("p",{style:{textAlign:"left"},children:t.content}),"video"===t.type&&Object(G.jsxs)("video",{className:"tweet_video",controls:!0,children:[" ",Object(G.jsx)("source",{src:oe})]}),"song"===t.type&&Object(G.jsx)("audio",{controls:!0,children:Object(G.jsx)("source",{src:oe})}),"picture"===t.type&&Object(G.jsx)("img",{className:"tweet_image",id:"tweet_media_picture",src:oe,alt:""})]})}),Object(G.jsx)(De.a,{variant:"middle"}),Object(G.jsx)("div",{className:"comment",children:Object(G.jsx)(ft,{handleComment:function(e,t){""!==e&&function(e,t){var n=(new Date).toISOString(),c={comment_id:It("".concat(e).concat(a).concat(n)),tweet_id:t,user:a,content:e,timestamp:n};Y.unshift(c),S(c).then((function(e){console.log(e.message),k(g,f+1).then((function(e){console.log(e.message),O(f+1)})).catch((function(e){return console.log(e.message)}))})).catch((function(e){return console.log(e.message)}))}(e,g)}})}),Object(G.jsxs)("div",{className:"comment_item",style:{height:A?"300px":"200px",display:f>0?"block":"none"},children:[Object(G.jsx)("div",{style:{margin:"auto",textAlign:"center",fontWeight:"bold",color:"#0C8367"},children:Object(G.jsx)("span",{children:0!==f?"".concat(f," comments"):"Comments"})}),Object(G.jsx)("div",{style:{margin:"auto",width:"90%",height:"100%"},children:Object(G.jsx)("ul",{id:"list".concat(g),style:{whiteSpace:"nowrap",listStyleType:"none"},children:Y.map((function(e){return Object(G.jsx)("li",{style:{marginBottom:"35px"},children:Object(G.jsx)(gt,{data:e,handleDeleteComment:ne})},e.comm_id)}))})})]}),Object(G.jsxs)("div",{className:"tweet_bottom",children:[Object(G.jsxs)("div",{className:"likes",children:[Object(G.jsx)(ge.a,{onClick:function(){r?z(a,g).then((function(e){200===e.status&&F(g,j-1).then((function(e){console.log(e.message),m(j-1)})).catch((function(e){console.log(e.message)}))})).catch((function(e){console.log(e.message)})):D(a,g).then((function(e){F(g,j+1).then((function(e){console.log(e),m(j+1)})).catch((function(e){console.log(e.message)}))})).catch((function(e){console.log(e.message)})),i(!r)},style:{borderRadius:"50%",padding:"3",color:r?"red":"black"},children:Object(G.jsx)(mt.a,{})}),Object(G.jsx)("span",{style:{color:"#0C8367"},children:"".concat(j," likes")})]}),Object(G.jsx)("div",{style:{display:N?"block":"none"},className:"analytics",children:Object(G.jsx)(kt,{tweetId:t.tweet_id})}),Object(G.jsx)("div",{className:"comments",children:Object(G.jsx)("button",{onClick:function(){V(!A)},id:"viewCommentsBtn",type:"button",children:A?"View less":"View more"})})]})]})})}n(82),n(83);var Pt=Object(le.a)((function(e){return{button:{margin:e.spacing(1)}}})),Tt=n(54);function Bt(){var e=Object(i.g)(),t=Object(c.useState)(new Map),n=Object(l.a)(t,1)[0],a=Object(c.useState)(!1),o=Object(l.a)(a,2),s=o[0],r=o[1],d=Object(c.useState)(255),u=Object(l.a)(d,2),j=u[0],m=u[1],h=Object(c.useState)(new Set),f=Object(l.a)(h,1)[0],O=Pt(),p=Object(te.getCurrentUsername)(),g=function(e,t){t?T(e).then((function(t){window.location.reload(),console.log("message: delete:",t.message),r(!0),console.log("deleted:",f.delete(n.get(e))),n.delete(e)})).catch((function(e){console.log(e.message)})):B(e,p).then((function(t){window.location.reload(),f.delete(n.get(e)),n.delete(e),r(!0)})).catch((function(e){return console.log(e)}))};Object(c.useEffect)((function(){console.log("refreshed"),r(!1)}),[s]);var x=function(){var e=Object(tt.a)(et.a.mark((function e(){return et.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:b(p).then((function(e){e.data.tweets.forEach((function(e){var t=Object(G.jsx)("div",{className:"tContainer",children:Object(G.jsx)(Et,{handleDelete:g,data:e})});f.add(t),n.set(e.tweet_id,t)})),r(!0)})).catch((function(e){return console.log(e)}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){x()}),[]);return Object(G.jsxs)("div",{className:"container_center",children:[Object(G.jsxs)("div",{style:{backgroundColor:"white",height:"fit-content",borderRadius:"8px"},className:"whatIsOn",children:[Object(G.jsx)("div",{style:{width:"90%",paddingTop:"4px",margin:"auto"},children:Object(G.jsx)(q.a,{multiline:!0,id:"tweet",label:"what's on your mind!!",variant:"outlined",helperText:"".concat(j," remaining chars"),inputProps:{maxLength:255},onChange:function(e){return function(e){if(e.target.value.length>=0){var t=255-e.target.value.length;m(t)}}(e)},fullWidth:!0})}),Object(G.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"8px"},className:"buttons",children:[Object(G.jsx)(ce.a,{variant:"contained",color:"secondary",className:O.button,onClick:function(){e.push("/videochat")},startIcon:Object(G.jsx)(ot.a,{}),children:"Go live"}),Object(G.jsx)(ce.a,{variant:"contained",color:"secondary",id:"button-media",className:O.button,startIcon:Object(G.jsx)(rt.a,{}),onClick:function(){document.getElementById("fileInputPicture").click()},children:"Photo"}),Object(G.jsx)(ce.a,{variant:"contained",color:"secondary",id:"button-media",className:O.button,startIcon:Object(G.jsx)(lt.a,{}),onClick:function(){document.getElementById("fileInputVideo").click()},children:"Video"}),Object(G.jsx)(ce.a,{variant:"contained",color:"secondary",id:"button-media",className:O.button,startIcon:Object(G.jsx)(ut.a,{}),onClick:function(){document.getElementById("fileInputSong").click()},children:"Song"}),Object(G.jsx)(ce.a,{variant:"contained",color:"secondary",className:O.button,startIcon:Object(G.jsx)(ct.a,{}),onClick:function(){m(255);var e=document.getElementById("tweet").value;if("undefined"!==typeof e&&0!==e.length){var t=(new Date).toISOString(),n=Tt("".concat(e).concat(p).concat(t));y({user:p,tweet_id:n,type:"text",content:e,tweet_date:t,tweet_likes:0}).then((function(e){console.log(e.message),window.location.reload()})).catch((function(e){console.log(e.message)}))}},children:"Create post"}),Object(G.jsx)("input",{className:"FileUpload",accept:".jpg,.png,.gif",id:"fileInputPicture",type:"file",onChange:function(e){var t=new FormData,n=document.getElementById("fileInputPicture").value;t.append("image",e.target.files[0],n);var c={method:"POST",body:t,redirect:"follow"},a=document.getElementById("tweet").value;if("undefined"!==typeof a){var o=(new Date).toISOString(),s=Tt("".concat(a).concat(p).concat(o));fetch("/api/uploadFile",c).then((function(e){return e.text()})).then((function(e){y({user:p,tweet_id:s,type:"picture",content:JSON.parse(e).data,tweet_date:o,tweet_likes:0}).then((function(e){console.log(e.message),window.location.reload()})).catch((function(e){console.log(e.message)}))})).catch((function(e){console.log(e)}))}},hidden:!0}),Object(G.jsx)("input",{className:"FileUpload",id:"fileInputVideo",type:"file",onChange:function(e){var t=new FormData,n=document.getElementById("fileInputVideo").value;t.append("image",e.target.files[0],n);var c={method:"POST",body:t,redirect:"follow"},a=document.getElementById("tweet").value;if("undefined"!==typeof a){var o=(new Date).toISOString(),s=Tt("".concat(a).concat(p).concat(o));fetch("/api/uploadFile",c).then((function(e){return e.text()})).then((function(e){y({user:p,tweet_id:s,type:"video",content:JSON.parse(e).data,tweet_date:o,tweet_likes:0}).then((function(e){console.log(e.message),window.location.reload()})).catch((function(e){console.log(e.message)}))})).catch((function(e){console.log(e)}))}},hidden:!0}),Object(G.jsx)("input",{className:"FileUpload",id:"fileInputSong",type:"file",onChange:function(e){var t=new FormData,n=document.getElementById("fileInputSong").value;t.append("image",e.target.files[0],n);var c={method:"POST",body:t,redirect:"follow"},a=document.getElementById("tweet").value;if("undefined"!==typeof a){var o=(new Date).toISOString(),s=Tt("".concat(a).concat(p).concat(o));fetch("/api/uploadFile",c).then((function(e){return e.text()})).then((function(e){y({user:p,tweet_id:s,type:"song",content:JSON.parse(e).data,tweet_date:o,tweet_likes:0}).then((function(e){window.location.reload(),console.log(e.message)})).catch((function(e){console.log(e.message)}))})).catch((function(e){console.log(e)}))}},hidden:!0})]})]}),Object(G.jsx)("div",{children:f})]})}n(247);function Ft(){var e=Object(te.getCurrentUsername)(),t=Object(c.useState)([{}]),n=Object(l.a)(t,2),a=n[0],o=n[1],s=Object(c.useState)(new Set),r=Object(l.a)(s,2),i=r[0],d=r[1],u=Object(c.useState)(!1),b=Object(l.a)(u,2),h=b[0],f=b[1],p=Object(c.useState)(0),g=Object(l.a)(p,2),x=g[0],v=g[1];Object(c.useEffect)((function(){O(e).then((function(e){console.log(e.data.data[0]),o(e.data.data[0]);var t=new Set(e.data.interests.map((function(e){return e.interest})));d(t)})).catch((function(e){console.log(e.message)})),f(!0)}),[]);return h?Object(G.jsx)("div",{className:"profile",children:Object(G.jsxs)("div",{style:{width:"98%",margin:"auto"},children:[Object(G.jsxs)("div",{style:{position:"relative",top:"0px"},className:"rest",children:[Object(G.jsx)(Ue,{}),Object(G.jsx)(be,{data:a,user:e})]}),Object(G.jsxs)("div",{className:"all_boxes",children:[Object(G.jsxs)("div",{className:"left-boxes",children:[Object(G.jsx)("div",{className:"left-Displayer",children:Object(G.jsx)(Re,{interests:i,addInterest:function(t){d([].concat(Object(Z.a)(i),[t])),v(Math.floor(1e9*Math.random())),j(t,e)},deleteInterest:function(t){var n=i;n.delete(t),d(n),v(Math.floor(1e9*Math.random())),m(t,e)}},x)}),Object(G.jsx)("div",{className:"left-friends",children:Object(G.jsx)(Qe,{})}),Object(G.jsx)("div",{className:"left-followers",children:Object(G.jsx)(Ge,{})})]}),Object(G.jsx)("div",{className:"right_boxes",children:Object(G.jsx)(Bt,{})})]})]})}):Object(G.jsx)("div",{})}function Ut(){var e=Object(i.g)(),t=Object(c.useState)(""),n=Object(l.a)(t,2),a=n[0],o=n[1],s=Object(c.useState)(""),d=Object(l.a)(s,2),j=d[0],m=d[1],b=Object(c.useState)(0),h=Object(l.a)(b,2),f=h[0],O=h[1],p=Object(c.useState)(""),g=Object(l.a)(p,2),x=g[0],v=g[1],w=Object(c.useState)(!1),y=Object(l.a)(w,1)[0];u.a.defaults.withCredentials=!0,Object(c.useEffect)((function(){return O(f)}),[f]),Object(c.useEffect)((function(){return console.log("changed dateUserLastLockedOut ".concat(x))}),[x]),Object(c.useEffect)((function(){return console.log("changed isLockedOut ".concat(y))}),[y]);return Object(G.jsx)("div",{className:"card shadow mx-auto mt-5",style:{width:"30rem"},children:Object(G.jsx)("div",{className:"container mx-1",children:Object(G.jsxs)("div",{className:"card-body p-xs",children:[Object(G.jsx)("h2",{className:"card-title text-center font-weight-bold",children:"Log In"}),Object(G.jsxs)("div",{className:"form-group",children:[Object(G.jsx)("label",{children:"Username:"}),Object(G.jsx)("input",{id:"new-username-form",placeholder:"Enter Username",className:"form-control",onChange:function(e){return o(e.target.value)}})]}),Object(G.jsxs)("div",{className:"form-group",children:[Object(G.jsx)("label",{children:"Password:"}),Object(G.jsx)("input",{id:"new-password-form",type:"password",placeholder:"Enter Password",className:"form-control",onChange:function(e){return m(e.target.value)}})]}),Object(G.jsxs)("p",{children:["Forgot Password?\xa0",Object(G.jsx)(r.a,{children:Object(G.jsx)(r.b,{to:"/resetPassword",children:"Click here to reset!"})})]}),Object(G.jsx)("div",{className:"form-group text-center",children:Object(G.jsx)("button",{type:"submit",className:"btn btn-primary w-100",onClick:function(){o(a),function(e,t){return u()({method:"POST",url:"/api/login",data:{username:e,password:t}})}(a,j).then((function(t){localStorage.setItem("username",JSON.stringify(a)),function(e,t){var n="/api/profile/reactivate/".concat(e);return u()({method:"PUT",url:n,data:{password:t}})}(a,j).then((function(){})).catch((function(e){console.log(e)})),function(e){return u()({method:"GET",url:"/api/numberFailedLogins/".concat(e)})}(a).then((function(n){if(console.log("resOne.data.message",n.data.message),"200"==n.data.message){var c,o=[Array.from(n.data.data)[0].number_failed_logins];O(c=o[0]),function(e){return u()({method:"GET",url:"/api/dateUserLastLockedOut/".concat(e)})}(a).then((function(n){var o,s=[Array.from(n.data.data)[0].date_last_locked_out];if(v(o=s[0]),c>3){y=!0;var r=new Date(o);new Date-r>36e5&&(y=!1,A(a,0).catch((function(e){console.log(e)})))}if(!1===y)if(t.data.message){3===parseInt(c,10)&&function(e){u()({method:"POST",url:"/api/setLockOutTime",data:{username:e}})}(a);var i=parseInt(c,10)+1;alert("Wrong Password! You have ".concat(3-i," attempts left before you get locked out")),A(a,i).catch((function(e){console.log(e)})),alert(t.data.message),e.push("/login"),document.getElementById("new-username-form").value="",document.getElementById("new-password-form").value=""}else A(a,0).catch((function(e){console.log(e)})),e.push("/home");else alert("your account has been locked because to too many incorrect attempts, please try back in an hour"),e.push("/login"),document.getElementById("new-username-form").value="",document.getElementById("new-password-form").value=""})).catch((function(e){console.log(e)}))}else alert("Username Not Found"),e.push("/login"),document.getElementById("new-username-form").value="",document.getElementById("new-password-form").value=""})).catch((function(e){console.log(e),alert("Username Not Found"),document.getElementById("new-username-form").value="",document.getElementById("new-password-form").value=""}))}))},children:"Log In"})}),Object(G.jsxs)("p",{children:["Don't have an account?\xa0",Object(G.jsx)(r.a,{children:Object(G.jsx)(r.b,{to:"/registration",children:"Sign Up!"})})]})]})})})}n(111),n(248);function Dt(){var e=Object(i.g)(),t=Object(c.useState)(""),n=Object(l.a)(t,2),a=n[0],o=n[1],s=Object(te.getCurrentUsername)();return Object(c.useEffect)((function(){w(s).then((function(e){o(e.data.avatar[0].profile_picture)})).catch((function(e){console.log(e.message)}))}),[]),Object(c.useEffect)((function(){}),[a]),Object(G.jsx)(r.a,{children:Object(G.jsxs)("div",{className:"sidebar",children:[Object(G.jsx)("div",{style:{marginBottom:"5px"},className:"bigButton",children:Object(G.jsx)("button",{className:"button_profile",onClick:function(){e.push("/profile")},type:"button",children:Object(G.jsxs)("div",{className:"header_box",children:[Object(G.jsx)("div",{className:"img_box",children:Object(G.jsx)("img",{id:"img",alt:"",src:"/api/viewfile/".concat(a)})}),Object(G.jsx)("div",{className:"username_box",children:Object(G.jsx)("span",{className:"user",children:s})})]})})}),Object(G.jsx)("div",{style:{marginBottom:"5px"},children:Object(G.jsx)(Qe,{})})]})})}n(249);function Lt(){var e=Object(te.getCurrentUsername)(),t=Object(c.useState)([]),n=Object(l.a)(t,2),a=n[0],o=n[1],s=Object(c.useState)(new Set),r=Object(l.a)(s,2),i=r[0],d=r[1];Object(c.useEffect)((function(){v(e).then((function(e){d((function(){return new Set([e.data.friends.map((function(e){return e.username}))])}))})).catch((function(e){return console.log(e.message)}))}),[]);var j=function(t){var n,c;""!==t.target.value?(n=e,c=t.target.value,console.log("search friend ".concat(n,", typeof ").concat(typeof c,"@@@@@@@@@@@@")),u()({method:"GET",url:"/api/search/".concat(n,"/").concat(c)})).then((function(n){console.log("input: ".concat(t.target.value," , ").concat(e)),o(n.data.friends),console.log(n.data.friends)})).catch((function(e){console.log(e.message)})):o([])},m=function(t){var n=t.followed,c=t.username===e,a=i.has(t.username);return Object(G.jsxs)("div",{className:"searchItem",children:[Object(G.jsx)("div",{className:"searchImg",children:Object(G.jsx)("img",{id:"search_img",src:"/api/viewFile/".concat(t.profile_picture),alt:""})}),Object(G.jsxs)("div",{className:"search-name",children:[Object(G.jsx)("span",{style:{color:"#0C8367",fontWeight:"bold"},children:t.username}),Object(G.jsx)("span",{style:{fontWeight:"lighter"},children:t.followed?"following":"Follow me PLZ :)"})]}),Object(G.jsx)("div",{className:"searchBtn",children:Object(G.jsxs)(G.Fragment,{children:[!n&&!c&&Object(G.jsx)(ue.a,{title:"Follow",placement:"top",children:Object(G.jsx)(Ae.a,{style:{margin:"2px"},fontSize:"small",className:"button",onClick:function(){return n=t.username,void E(e,n).then((function(t){console.log(t.message),p(e).then((function(e){console.log(e.data.followers)}))}));var n}})}),a&&!c&&Object(G.jsx)(ue.a,{title:"Unblock",placement:"top",children:Object(G.jsx)($.a,{className:"button",style:{margin:"2px"},fontSize:"small"})}),n&&!c&&Object(G.jsx)(ue.a,{title:"Unfollow",placement:"top",children:Object(G.jsx)(Ze.a,{style:{margin:"2px"},fontSize:"small",className:"button",onClick:function(){return n=t.username,void P(e,n).then((function(e){console.log(e.message)})).catch((function(e){return console.log(e.message)}));var n}})}),!c&&Object(G.jsx)(ue.a,{title:"Block",placement:"top",children:Object(G.jsx)(We.a,{style:{margin:"2px"},fontSize:"small",className:"button",color:"secondary",onClick:function(){return n=t.username,void x(e,n).then((function(e){console.log(e.message)})).catch((function(e){return console.log(e.message)}));var n}})})]})})]})};return Object(G.jsxs)("div",{children:[Object(G.jsx)(q.a,{multiline:!0,id:"tweet",label:"Search for contact",variant:"outlined",inputProps:{maxLength:255},onChange:function(e){return j(e)},fullWidth:!0}),Object(G.jsx)("div",{className:"searchBack",children:a.map((function(e){return m(e)}))})]})}function Rt(){var e=Object(te.getCurrentUsername)(),t=Object(c.useState)([]),n=Object(l.a)(t,2),a=n[0],o=n[1],s=function(){var t=Object(tt.a)(et.a.mark((function t(){return et.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,R(e).then((function(e){4===a.length?a.push(e.data.suggestions[0]):o(e.data.suggestions)})).catch((function(e){return console.log(e.message)}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),r=function(){var t=Object(tt.a)(et.a.mark((function t(n){var c;return et.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=a.filter((function(e){return e.username!==n})),t.next=3,R(e).then((function(e){c.push(e.data.suggestions[0])})).catch((function(e){return console.log(e.message)}));case 3:o(c);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();Object(c.useEffect)((function(){s()}),[]);var i=function(t){r(t),x(e,t).then((function(e){console.log(e.message)}))},d=function(t){r(t),E(e,t).then((function(e){console.log(e.message)}))};return Object(G.jsxs)("div",{className:"box-container",children:[Object(G.jsx)("div",{style:{color:"#0C8367"},className:"title",children:"Suggestions"}),Object(G.jsx)("br",{}),Object(G.jsx)("div",{className:"box",children:Object(G.jsx)("div",{className:"containers",children:a.map((function(e){return Object(G.jsx)(Je,{info:e,handleB:i,handleF:d})}))})})]})}var zt=n(413),At=Object(le.a)((function(e){return{button:{margin:e.spacing(1)}}}));function Vt(e){var t=e.handlers,n=t.postTweet,a=t.postPicture,o=t.postVideo,s=t.postSong,r=Object(c.useState)(255),d=Object(l.a)(r,2),u=d[0],j=d[1],m=Object(i.g)(),b=At();return Object(G.jsx)("div",{className:"container_center",children:Object(G.jsxs)("div",{style:{backgroundColor:"white",height:"fit-content",borderRadius:"8px"},className:"whatIsOn",children:[Object(G.jsx)("div",{style:{width:"90%",paddingTop:"4px",margin:"auto"},children:Object(G.jsx)(q.a,{multiline:!0,id:"tweet",label:"what's on your mind!!",variant:"outlined",helperText:"".concat(u," remaining chars"),inputProps:{maxLength:255},onChange:function(e){return function(e){j(255-e.target.value.length)}(e)},fullWidth:!0})}),Object(G.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"8px"},className:"buttons",children:[Object(G.jsx)(ce.a,{size:"small",variant:"contained",color:"secondary",className:b.button,onClick:function(){m.push("/videochat")},startIcon:Object(G.jsx)(ot.a,{}),children:"Go live"}),Object(G.jsx)(ce.a,{size:"small",variant:"contained",color:"secondary",id:"button-media",className:b.button,startIcon:Object(G.jsx)(rt.a,{}),onClick:function(){document.getElementById("fileInputPictureCommentBox").click()},children:"Photo"}),Object(G.jsx)(ce.a,{size:"small",variant:"contained",color:"secondary",id:"button-media",className:b.button,startIcon:Object(G.jsx)(lt.a,{}),onClick:function(){document.getElementById("fileInputVideo").click()},children:"Video"}),Object(G.jsx)(ce.a,{size:"small",variant:"contained",color:"secondary",id:"button-media",className:b.button,startIcon:Object(G.jsx)(ut.a,{}),onClick:function(){document.getElementById("fileInputSong").click()},children:"Song"}),Object(G.jsx)(ce.a,{size:"small",variant:"contained",color:"secondary",className:b.button,startIcon:Object(G.jsx)(ct.a,{}),onClick:n,children:"Create post"}),Object(G.jsx)("input",{className:"FileUpload",accept:".jpg,.png,.gif",id:"fileInputPictureCommentBox",type:"file",onChange:a,hidden:!0}),Object(G.jsx)("input",{className:"FileUpload",id:"fileInputVideo",type:"file",onChange:o,hidden:!0}),Object(G.jsx)("input",{className:"FileUpload",id:"fileInputSong",type:"file",onChange:s,hidden:!0})]})]})})}var Wt=n(54);function Mt(){var e=Object(c.useState)(!0),t=Object(l.a)(e,2),n=t[0],a=t[1],o=Object(c.useState)(!1),s=Object(l.a)(o,2),r=(s[0],s[1],Object(c.useState)([])),d=Object(l.a)(r,2),u=d[0],j=d[1],m=Object(c.useState)(1),b=Object(l.a)(m,2),O=b[0],p=b[1],g=Object(c.useState)(25),x=Object(l.a)(g,2),v=(x[0],x[1]),w=Object(c.useState)(""),S=Object(l.a)(w,2),C=S[0],_=S[1],k=Object(c.useRef)(),I=Object(i.g)(),E=Object(c.useCallback)((function(e){n||(k.current&&k.current.disconnect(),k.current=new IntersectionObserver((function(e){e[0].isIntersecting&&p((function(e){return e+1}))})),e&&k.current.observe(e))}),[n]),P=Object(te.getCurrentUsername)(),F=function(){var e=Object(tt.a)(et.a.mark((function e(){return et.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:f(P).then((function(e){console.log("typeof",e.data.count[0][0].COUNT)})).catch((function(e){return console.log(e)}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){F()}),[]),Object(c.useEffect)((function(){a(!0),h(P,O,10).then((function(e){j((function(t){return[].concat(Object(Z.a)(t),Object(Z.a)(e.data.tweets[0]))})),a(!1)})).catch((function(e){return console.log(e)}))}),[O]);var U=function(){var e=Object(tt.a)(et.a.mark((function e(t){return et.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j((function(e){return e.filter((function(e){return e.tweet_id!==t}))}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(e,t){t?T(e).then((function(t){console.log("here"),U(e)})).catch((function(e){console.log(e.message)})):B(e,P).then((function(t){j((function(t){return t.filter((function(t){return t.tweet_id!==e}))}))})).catch((function(e){return console.log(e)}))},L={postTweet:function(){var e=document.getElementById("tweet").value;if(0!==e.length){var t=e.match(/\B\#\w\w+\b/g),n=(new Date).toISOString(),c=Wt("".concat(e).concat(P).concat(n)),a={user:P,tweet_id:c,type:"text",content:e,tweet_date:n,tweet_likes:0};j((function(e){return[a].concat(Object(Z.a)(e))})),y(a).then((function(e){})).catch((function(e){console.log(e.message)})),null!==t&&t.length>0&&N(c,t[0]).then((function(){})).catch((function(e){console.log(e.message)}))}},postPicture:function(e){var t=new FormData,n=document.getElementById("fileInputPictureCommentBox").value;t.append("image",e.target.files[0],n);var c={method:"POST",body:t,redirect:"follow"},a=document.getElementById("tweet").value;if("undefined"!==typeof a){var o=(new Date).toISOString(),s=Wt("".concat(a).concat(P).concat(o));(function(){var e=Object(tt.a)(et.a.mark((function e(){var t,n;return et.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="",e.next=3,fetch("/api/uploadFile",c).then((function(e){return e.text()})).then((function(e){t=JSON.parse(e).data})).catch((function(e){console.log(e)}));case 3:return console.log("content",t),n={user:P,tweet_id:s,type:"picture",content:t,tweet_date:o,tweet_likes:0},e.next=7,y(n).then((function(e){j((function(e){return[n].concat(Object(Z.a)(e))}))})).catch((function(e){console.log(e.message)}));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}},postVideo:function(e){var t=new FormData,n=document.getElementById("fileInputVideo").value;t.append("image",e.target.files[0],n);var c={method:"POST",body:t,redirect:"follow"},a=document.getElementById("tweet").value;if("undefined"!==typeof a){var o=(new Date).toISOString(),s=Wt("".concat(a).concat(P).concat(o));fetch("/api/uploadFile",c).then((function(e){return e.text()})).then((function(e){y({user:P,tweet_id:s,type:"video",content:JSON.parse(e).data,tweet_date:o,tweet_likes:0}).then((function(e){console.log(e.message),window.location.reload()})).catch((function(e){console.log(e.message)}))})).catch((function(e){console.log(e)}))}},postSong:function(e){var t=new FormData,n=document.getElementById("fileInputSong").value;t.append("image",e.target.files[0],n);var c={method:"POST",body:t,redirect:"follow"},a=document.getElementById("tweet").value;if("undefined"!==typeof a){var o=(new Date).toISOString(),s=Wt("".concat(a).concat(P).concat(o));fetch("/api/uploadFile",c).then((function(e){return e.text()})).then((function(e){y({user:P,tweet_id:s,type:"song",content:JSON.parse(e).data,tweet_date:o,tweet_likes:0}).then((function(e){window.location.reload(),console.log(e.message)})).catch((function(e){console.log(e.message)}))})).catch((function(e){console.log(e)}))}}};return Object(G.jsxs)(G.Fragment,{children:[Object(G.jsxs)("div",{className:"container_center",children:[Object(G.jsx)(Vt,{className:"tweetIpt",handlers:L}),Object(G.jsx)("div",{className:"filterBox",children:Object(G.jsx)(q.a,{style:{background:"white",margin:"10px",width:"90%",borderRadius:"8px"},multiline:!0,id:"filter",label:"Filter posts by hashtag",variant:"outlined",onChange:function(e){return function(e){var t=25-e.target.value.length;v(t),_(e.target.value)}(e)}})}),Object(G.jsx)("div",{className:"vertical-center",children:Object(G.jsxs)("button",{"aria-label":"close",type:"button",className:"btn btn-primary",onClick:function(){if(0!==C.length){var e=C.match(/(^|\B)#(?![0-9_]+\b)([a-zA-Z0-9_]{1,30})(\b|\r)/g);console.log("what does this print? = ".concat(e)),null==e?(alert("not a valid hashTag"),I.push("/home"),document.getElementById("filter").value=""):(localStorage.setItem("hashtag",JSON.stringify(C)),I.push("/hashTagTweets"))}},children:[" ","Filter Tweets"]})}),Object(G.jsx)("div",{className:"tweet_items",children:u.map((function(e,t){return u.length===t+1?Object(G.jsx)("div",{ref:E,className:"tContainer",children:Object(G.jsx)(Et,{handleDelete:D,data:e})}):Object(G.jsx)("div",{className:"tContainer",children:Object(G.jsx)(Et,{handleDelete:D,data:e})})}))})]}),Object(G.jsx)("div",{children:Object(G.jsx)(zt.a,{style:{color:"green"}})})]})}function Jt(){return Object(G.jsxs)("div",{children:[Object(G.jsx)("div",{className:"nav_item",children:Object(G.jsx)(Ue,{})}),Object(G.jsxs)("div",{className:"home",children:[Object(G.jsx)("div",{className:"sidebar_item",children:Object(G.jsx)(Dt,{})}),Object(G.jsx)("div",{className:"center_item",children:Object(G.jsx)(Mt,{})}),Object(G.jsxs)("div",{className:"right_item",children:[Object(G.jsx)("div",{className:"searchbox",children:Object(G.jsx)(Lt,{})}),Object(G.jsx)("div",{className:"suggestionBox",children:Object(G.jsx)(Rt,{})})]})]})]})}function Gt(){var e=Object(i.g)(),t=Object(te.getCurrentUsername)();console.log("username = ".concat(t));var n=Object(c.useState)(new Set),a=Object(l.a)(n,2),o=a[0],s=a[1],d=Object(c.useState)(0),b=Object(l.a)(d,2),h=b[0],f=b[1],p=Object(c.useState)(""),g=Object(l.a)(p,2),x=g[0],v=g[1];Object(c.useEffect)((function(){O(t).then((function(e){console.log(e.data.data[0]);var t=new Set(e.data.interests.map((function(e){return e.interest})));s(t)})).catch((function(e){console.log(e.message)}))}),[]);var w=Object(G.jsx)("div",{});return""!==x&&(w=Object(G.jsxs)("div",{className:"myimgContainer",children:[" "," ","Here is your new profile",Object(G.jsx)("img",{className:"myimg",src:"/api/viewFile/".concat(x),alt:""})]}),console.log("/api/viewFile/".concat(x))),console.log(w),Object(G.jsx)("div",{className:"card shadow mx-auto mt-5",style:{width:"30rem"},children:Object(G.jsx)("div",{className:"container mx-1",children:Object(G.jsxs)("div",{className:"card-body p-xs",children:[Object(G.jsxs)("h2",{className:"card-title text-center font-weight-bold",children:["Hi",Object(G.jsxs)("var",{children:[" ",t]})]}),Object(G.jsxs)("h2",{className:"card-title text-center font-weight-bold",children:[" ",Object(G.jsx)("h2",{className:"card-title text-center font-weight-bold",children:"Please Finish Sign Up"})]}),Object(G.jsxs)("div",{className:"form-group",children:[Object(G.jsx)("label",{htmlFor:"new-username-form",children:"Please Upload Profile Picture:"}),Object(G.jsx)("input",{type:"file",className:"form-control",id:"fileUploadProfilePicture",onChange:function(e){var n=new FormData,c=document.getElementById("fileUploadProfilePicture").value;n.append("image",e.target.files[0],c),fetch("/api/uploadFile",{method:"POST",body:n,redirect:"follow"}).then((function(e){return e.text()})).then((function(e){v(JSON.parse(e).data),function(e,t){return u()({method:"POST",url:"/api/uploadProfilePicture",data:{username:e,profilePicture:t}})}(t,JSON.parse(e).data).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))})).catch((function(e){alert(e)}))}}),w,Object(G.jsx)("label",{htmlFor:"new-username-form",children:"Please Add Your Interests:"}),Object(G.jsx)(Re,{interests:o,addInterest:function(e){s([].concat(Object(Z.a)(o),[e])),f(Math.floor(1e9*Math.random())),j(e,t)},deleteInterest:function(e){var n=o;n.delete(e),s(n),f(Math.floor(1e9*Math.random())),m(e,t)}},h),Object(G.jsx)("div",{className:"form-group",children:Object(G.jsx)("button",{type:"submit",className:"btn btn-primary w-100",onClick:function(){alert("Your have successfully signed up"),e.push("/login/")},children:"Complete Registration"})}),Object(G.jsxs)("p",{children:["Already have an account?\xa0",Object(G.jsx)(r.b,{to:"/login",children:"Log in here!"})]})]})]})})})}var Ht=n(196),Zt=n.n(Ht),Yt=function(e){var t=e.username,n=e.roomName,c=e.handleRoomNameChange,a=e.handleSubmit,o=e.connecting;return Object(G.jsx)("form",{onSubmit:a,children:Object(G.jsxs)("div",{children:[Object(G.jsx)(Ue,{}),Object(G.jsxs)("div",{className:"home",children:[Object(G.jsx)("div",{style:{}}),Object(G.jsx)("div",{className:"card shadow mx-auto mt-5",style:{width:"30rem"},children:Object(G.jsx)("div",{className:"container mx-1",children:Object(G.jsxs)("div",{className:"card-body p-xs",children:[Object(G.jsx)("h2",{className:"card-title text-center font-weight-bold",children:"Live Stream"}),Object(G.jsxs)("div",{className:"form-group",children:[Object(G.jsx)("h2",{children:"Enter a room"}),Object(G.jsx)("div",{children:Object(G.jsxs)("label",{htmlFor:"name",children:[" ","Hi,"," ",t,", please select a room to start your live stream!"]})}),Object(G.jsx)("label",{htmlFor:"room",children:"Room name:"}),Object(G.jsx)("input",{type:"text",id:"room",placeholder:"Enter Room Name",value:n,onChange:c,readOnly:o,required:!0})]}),Object(G.jsx)("div",{className:"video-group",children:Object(G.jsx)("button",{type:"submit",className:"btn btn-primary w-100",disabled:o,children:o?"Connecting":"Join"})})]})})})]})]})})},$t=n(197),qt=n.n($t),Kt=function(e){var t=e.participant,n=Object(c.useState)([]),a=Object(l.a)(n,2),o=a[0],s=a[1],r=Object(c.useState)([]),i=Object(l.a)(r,2),d=i[0],u=i[1],j=Object(c.useRef)(),m=Object(c.useRef)(),b=function(e){return Array.from(e.values()).map((function(e){return e.track})).filter((function(e){return null!==e}))};return Object(c.useEffect)((function(){s(b(t.videoTracks)),u(b(t.audioTracks));return t.on("trackSubscribed",(function(e){"video"===e.kind?s((function(t){return[].concat(Object(Z.a)(t),[e])})):"audio"===e.kind&&u((function(t){return[].concat(Object(Z.a)(t),[e])}))})),t.on("trackUnsubscribed",(function(e){"video"===e.kind?s((function(t){return t.filter((function(t){return t!==e}))})):"audio"===e.kind&&u((function(t){return t.filter((function(t){return t!==e}))}))})),function(){s([]),u([]),t.removeAllListeners()}}),[t]),Object(c.useEffect)((function(){var e=o[0];if(e)return e.attach(j.current),function(){e.detach()}}),[o]),Object(c.useEffect)((function(){var e=d[0];if(e)return e.attach(m.current),function(){e.detach()}}),[d]),Object(G.jsxs)("div",{className:"participant",children:[Object(G.jsx)("h3",{children:t.identity}),Object(G.jsx)("video",{ref:j,autoPlay:!0}),Object(G.jsx)("audio",{ref:m,autoPlay:!0,muted:!0})]})};n(352);function Qt(e){var t=e.data,n=Object(c.useState)(""),a=Object(l.a)(n,2),o=a[0],s=a[1],r=function(){var e=Object(tt.a)(et.a.mark((function e(){return et.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w(t.user).then((function(e){s(e.data.avatar[0].profile_picture)})).catch((function(e){console.log(e.message)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){r()}),[]),Object(G.jsxs)("div",{className:"comment_cont",stlye:{height:"200px",width:"100px",backgroundColor:"red"},children:[Object(G.jsxs)("div",{className:"comment_header",children:[Object(G.jsx)("div",{className:"header_profile",children:Object(G.jsx)("img",{id:"comment_picture",src:"/api/viewFile/".concat(o),alt:""})}),Object(G.jsx)("div",{className:"header_name",children:Object(G.jsx)("span",{id:"cmnt_username",children:t.user})})]}),Object(G.jsx)("div",{className:"cmnt_cntBtn_box",style:{width:"fit-content"},children:Object(G.jsx)("div",{style:{backgroundColor:"#D0EAE4"},className:"cmnt_cnt_box",children:Object(G.jsx)("span",{id:"cmnt_cnt",children:t.content})})})]})}n(353);var Xt=function(e){var t=e.roomName,n=e.room,a=e.handleLogout,o=Object(te.getCurrentUsername)(),s=Object(c.useState)([]),r=Object(l.a)(s,2),i=r[0],d=r[1],j=Object(c.useState)([]),m=Object(l.a)(j,2),b=m[0],h=m[1],f=function(){var e=Object(tt.a)(et.a.mark((function e(){return et.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C(t).then((function(e){h(e.data.comments[0])})).catch((function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),O=function(e){var n=(new Date).toISOString(),c={roomName:t,user:o,timestamp:n,content:e};h((function(e){return[].concat(Object(Z.a)(e),[c])})),function(e){var t=e.roomName,n=e.user,c=e.timestamp,a=e.content;return u()({method:"POST",url:"/api/comment/livestream/".concat(t),data:{user:n,timestamp:c,content:a}})}(c).then((function(e){console.log(e.message)})).catch((function(e){return console.log(e.message)}))};Object(c.useEffect)((function(){var e=function(e){d((function(t){return[].concat(Object(Z.a)(t),[e])}))},t=function(e){d((function(t){return t.filter((function(t){return t!==e}))}))};return n.on("participantConnected",e),n.on("participantDisconnected",t),n.participants.forEach(e),function(){n.off("participantConnected",e),n.off("participantDisconnected",t)}}),[n]),Object(c.useEffect)((function(){var e=setInterval((function(){f()}),5e3);return function(){return clearInterval(e)}}),[]);var p=i.map((function(e){return Object(G.jsx)(Kt,{participant:e},e.sid)}));return Object(G.jsxs)("div",{className:"room",children:[Object(G.jsx)(Ue,{}),Object(G.jsx)("div",{style:{}}),Object(G.jsxs)("h2",{children:["Live Stream:"," ",t]}),Object(G.jsx)(ce.a,{color:"secondary",startIcon:Object(G.jsx)(qt.a,{}),type:"submit",className:"btn btn-primary w-100",onClick:a,children:"Leave Stream"}),Object(G.jsxs)("div",{className:"parent-liveStream",children:[Object(G.jsx)("div",{className:"local-participant",children:n?Object(G.jsx)(Kt,{participant:n.localParticipant},n.localParticipant.sid):""}),Object(G.jsxs)("div",{className:"comment-liveStream",children:[Object(G.jsx)("div",{style:{overflow:"auto",height:"80%"},children:b.map((function(e){return Object(G.jsx)("div",{style:{margin:"10px"},children:Object(G.jsx)(Qt,{data:e})})}))}),Object(G.jsx)("div",{className:"comn-liveStream",children:Object(G.jsx)(ft,{handleComment:function(e){""!==e&&O(e)}})})]})]}),Object(G.jsx)("h3",{children:"Remote Participants"}),Object(G.jsx)("div",{className:"remote-participants",children:p})]})},en=function(){var e=Object(c.useState)(""),t=Object(l.a)(e,2),n=t[0],a=t[1],o=Object(c.useState)(null),s=Object(l.a)(o,2),r=s[0],i=s[1],d=Object(c.useState)(!1),u=Object(l.a)(d,2),j=u[0],m=u[1],b=Object(te.getCurrentUsername)(),h=Object(c.useCallback)((function(e){a(e.target.value)}),[]),f=Object(c.useCallback)(function(){var e=Object(tt.a)(et.a.mark((function e(t){var c;return et.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),m(!0),e.next=4,fetch("/video/token",{method:"POST",body:JSON.stringify({identity:b,room:n}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()}));case 4:c=e.sent,Zt.a.connect(c.token,{name:n}).then((function(e){m(!1),i(e)})).catch((function(e){console.error(e),m(!1)}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[n,b]),O=Object(c.useCallback)((function(){i((function(e){return e&&(e.localParticipant.tracks.forEach((function(e){e.track.stop()})),e.disconnect()),null}))}),[]);return Object(c.useEffect)((function(){if(r){var e=function(e){e.persisted||r&&O()};return window.addEventListener("pagehide",e),window.addEventListener("beforeunload",e),function(){window.removeEventListener("pagehide",e),window.removeEventListener("beforeunload",e)}}}),[r,O]),r?Object(G.jsx)(Xt,{roomName:n,room:r,handleLogout:O}):Object(G.jsx)(Yt,{username:b,roomName:n,handleRoomNameChange:h,handleSubmit:f,connecting:j})};function tn(){var e=Object(c.useState)(""),t=Object(l.a)(e,2),n=t[0],a=t[1],o=Object(c.useState)(""),s=Object(l.a)(o,2),d=s[0],j=s[1],m=Object(c.useState)(""),b=Object(l.a)(m,2),h=b[0],f=b[1],O=Object(i.g)();return Object(G.jsx)("div",{className:"card shadow mx-auto mt-5",style:{width:"30rem"},children:Object(G.jsx)("div",{className:"container mx-1",children:Object(G.jsxs)("div",{className:"card-body p-xs",children:[Object(G.jsx)("h2",{className:"card-title text-center font-weight-bold",children:"Reset Password"}),Object(G.jsxs)("div",{className:"form-group",children:[Object(G.jsx)("label",{children:"Username:"}),Object(G.jsx)("input",{id:"new-username-form",placeholder:"Enter Username",className:"form-control",onChange:function(e){return a(e.target.value)}})]}),Object(G.jsxs)("div",{className:"form-group",children:[Object(G.jsx)("label",{children:"Password:"}),Object(G.jsx)("input",{id:"new-password-form",type:"password",placeholder:"Enter Password",className:"form-control",onChange:function(e){return j(e.target.value)}})]}),Object(G.jsxs)("div",{className:"form-group",children:[Object(G.jsx)("label",{children:"Confirm Password:"}),Object(G.jsx)("input",{id:"new-password-form",type:"password",placeholder:"Enter Password",className:"form-control",onChange:function(e){return f(e.target.value)}})]}),Object(G.jsx)("div",{className:"form-group text-center",children:Object(G.jsx)("button",{type:"submit",className:"btn btn-primary w-100",onClick:function(){return Object(J.isSamePassword)(d,h)?Object(J.isValidPassword)(d)?void(e=n,t=d,u()({method:"PUT",url:"/api/resetPassword",data:{username:e,password:t}})).then((function(){alert("Success! Your Password Has Been Updated"),O.push("/login")})).catch((function(e){console.log(e)})):(alert("Invalid password, password must have a minimum eight characters, at least one uppercase letter, one lowercase letter, one number and one special character"),window.history.replaceState(null,"new page","/resetPassword"),void window.location.reload()):(alert("Passwords do not match, please re-enter"),window.history.replaceState(null,"new page","/resetPassword"),void window.location.reload());var e,t},children:"Submit New Password"})}),Object(G.jsxs)("p",{children:["Changed Your Mind?\xa0",Object(G.jsx)(r.b,{to:"/login",children:"Return To Login!"})]})]})})})}function nn(e){var t=e.data,n=Object(te.getCurrentUsername)(),a=Object(c.useState)(""),o=Object(l.a)(a,2),s=o[0],r=o[1],i=Object(c.useState)("picture"===t.type),d=Object(l.a)(i,1)[0],u=Object(c.useState)("video"===t.type),j=Object(l.a)(u,1)[0],m=Object(c.useState)("song"===t.type),b=Object(l.a)(m,1)[0],h=function(){var e=Object(tt.a)(et.a.mark((function e(){return et.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w(t.user).then((function(e){r(e.data.avatar[0].profile_picture)})).catch((function(e){console.log(e.message)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){h()}),[]);var f,O=t.message_date.split("T")[0],p="/api/viewFile/".concat(s),g="/api/viewFile/".concat(t.content);d?f=Object(G.jsx)("img",{className:"tweet_image",id:"tweet_media_picture",src:g,alt:""}):j?f=Object(G.jsxs)("video",{className:"tweet_video",controls:!0,children:[" ",Object(G.jsx)("source",{src:g})]}):b?(console.log("song"),f=Object(G.jsx)("audio",{controls:!0,children:Object(G.jsx)("source",{src:g})})):f=t.content;var x="Message Status : Delivered";1==t.is_read&&(x="Message Status : Read");var v="Receiver>";return n===t.user?v="Sender>":x="",Object(G.jsxs)("div",{id:"container_tweet",children:[Object(G.jsxs)("div",{className:"tweet_header",children:[Object(G.jsx)("div",{className:"tweet_img",children:Object(G.jsx)("img",{className:"tweet_header",id:"tweet_author_picture",src:p,alt:""})}),Object(G.jsxs)("div",{className:"tweet_text",children:[Object(G.jsxs)("span",{style:{fontSize:"13px",fontWeight:"bold"},id:"author_username",children:[v," ",t.user]}),Object(G.jsxs)("span",{style:{fontSize:"13px",fontWeight:"bold"},id:"author_message",children:[" ",x]}),Object(G.jsx)("span",{style:{fontSize:"10px"},id:"date",children:O})]})]}),Object(G.jsx)(De.a,{variant:"middle"}),Object(G.jsx)("div",{className:"tweet_content",children:Object(G.jsx)("p",{style:{textAlign:"left"},children:f})}),Object(G.jsx)(De.a,{variant:"middle"})]})}var cn=Object(le.a)((function(e){return{button:{margin:e.spacing(1)}}})),an=n(54);function on(){var e=Object(te.getCurrentReceiver)(),t=Object(c.useState)(new Map),n=Object(l.a)(t,1)[0],a=Object(c.useState)(!1),o=Object(l.a)(a,2),s=o[0],r=o[1],i=Object(c.useState)(255),d=Object(l.a)(i,2),u=d[0],j=d[1],m=Object(c.useState)(new Set),b=Object(l.a)(m,1)[0],h=cn(),f=Object(te.getCurrentUsername)();Object(c.useEffect)((function(){r(!1)}),[s]);var O=function(){var t=Object(tt.a)(et.a.mark((function t(){return et.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:W(f,e).then((function(t){M(e,f).then((function(){console.log("Updated message status")})).catch((function(e){console.log(e.message)}));var c=t.data.messages;console.log("ttt--".concat(c)),c.forEach((function(e){var t=Object(G.jsx)("div",{className:"tContainer",children:Object(G.jsx)(nn,{data:e})});b.add(t),n.set(e.tweet_id,t)})),r(!0)})).catch((function(e){return console.log(e)}));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();Object(c.useEffect)((function(){O()}),[]);return console.log("td",b),Object(G.jsxs)("div",{className:"container_center",children:[Object(G.jsxs)("div",{style:{backgroundColor:"white",height:"fit-content",borderRadius:"8px"},className:"whatIsOn",children:[Object(G.jsx)("div",{style:{width:"90%",paddingTop:"4px",margin:"auto"},children:Object(G.jsx)(q.a,{multiline:!0,id:"message",label:"what's on your mind!!",variant:"outlined",helperText:"".concat(u," remaining chars"),inputProps:{maxLength:255},onChange:function(e){return function(e){if(e.target.value.length>=0){var t=255-e.target.value.length;j(t)}}(e)},fullWidth:!0})}),Object(G.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"8px"},className:"buttons",children:[Object(G.jsx)(ce.a,{variant:"contained",color:"secondary",id:"button-media",className:h.button,startIcon:Object(G.jsx)(rt.a,{}),onClick:function(){document.getElementById("fileInputPicture").click()},children:"Photo"}),Object(G.jsx)(ce.a,{variant:"contained",color:"secondary",id:"button-media",className:h.button,startIcon:Object(G.jsx)(lt.a,{}),onClick:function(){document.getElementById("fileInputVideo").click()},children:"Video"}),Object(G.jsx)(ce.a,{variant:"contained",color:"secondary",id:"button-media",className:h.button,startIcon:Object(G.jsx)(ut.a,{}),onClick:function(){document.getElementById("fileInputSong").click()},children:"Song"}),Object(G.jsx)(ce.a,{variant:"contained",color:"secondary",className:h.button,startIcon:Object(G.jsx)(ct.a,{}),onClick:function(){j(255);var t=document.getElementById("message").value;if("undefined"!==typeof t&&0!==t.length){var n=(new Date).toISOString(),c=an("".concat(t).concat(f).concat(n));V({user:f,message_id:c,type:"text",content:t,message_date:n,receiver:e}).then((function(e){window.location.reload()})).catch((function(e){console.log(e.message)}))}},children:"Create post"}),Object(G.jsx)("input",{className:"FileUpload",accept:".jpg,.png,.gif",id:"fileInputPicture",type:"file",onChange:function(t){var n=new FormData,c=document.getElementById("fileInputPicture").value;n.append("image",t.target.files[0],c);var a={method:"POST",body:n,redirect:"follow"},o=document.getElementById("message").value;if("undefined"!==typeof o){var s=(new Date).toISOString(),r=an("".concat(o).concat(f).concat(s));fetch("/api/uploadFile",a).then((function(e){return e.text()})).then((function(t){var n={user:f,message_id:r,type:"picture",content:JSON.parse(t).data,message_date:s,receiver:e};console.log("is this good? ".concat(n)),V(n).then((function(e){console.log(e.message),window.location.reload()})).catch((function(e){console.log(e.message)}))})).catch((function(e){console.log(e)}))}},hidden:!0}),Object(G.jsx)("input",{className:"FileUpload",id:"fileInputVideo",type:"file",onChange:function(t){var n=new FormData,c=document.getElementById("fileInputVideo").value;n.append("image",t.target.files[0],c);var a={method:"POST",body:n,redirect:"follow"},o=document.getElementById("message").value;if("undefined"!==typeof o){var s=(new Date).toISOString(),r=an("".concat(o).concat(f).concat(s));fetch("/api/uploadFile",a).then((function(e){return e.text()})).then((function(t){V({user:f,message_id:r,type:"video",content:JSON.parse(t).data,message_date:s,receiver:e}).then((function(e){console.log(e.message),window.location.reload()})).catch((function(e){console.log(e.message)}))})).catch((function(e){console.log(e)}))}},hidden:!0}),Object(G.jsx)("input",{className:"FileUpload",id:"fileInputSong",type:"file",onChange:function(t){var n=new FormData,c=document.getElementById("fileInputSong").value;n.append("image",t.target.files[0],c);var a={method:"POST",body:n,redirect:"follow"},o=document.getElementById("message").value;if("undefined"!==typeof o){var s=(new Date).toISOString(),r=an("".concat(o).concat(f).concat(s));fetch("/api/uploadFile",a).then((function(e){return e.text()})).then((function(t){V({user:f,message_id:r,type:"song",content:JSON.parse(t).data,message_date:s,receiver:e}).then((function(e){window.location.reload(),console.log(e.message)})).catch((function(e){console.log(e.message)}))})).catch((function(e){console.log(e)}))}},hidden:!0})]})]}),Object(G.jsx)("div",{children:b})]})}function sn(){var e=Object(te.getCurrentReceiver)();return console.log("receiver = ".concat(e)),Object(G.jsxs)("div",{children:[Object(G.jsx)(Ue,{}),Object(G.jsx)("div",{className:"home",children:Object(G.jsx)("div",{children:Object(G.jsx)(on,{})})})]})}var rn=n(54);function ln(e){var t=e.data,n=e.handleDelete,a=Object(te.getCurrentUsername)(),o=Object(c.useState)(!1),s=Object(l.a)(o,2),r=s[0],i=s[1],d=Object(c.useState)(t.tweet_likes),u=Object(l.a)(d,2),j=u[0],m=u[1],b=Object(c.useState)(t.tweet_comments),h=Object(l.a)(b,2),f=h[0],O=h[1],p=Object(c.useState)(t.tweet_id),g=Object(l.a)(p,1)[0],x=Object(c.useState)(t.tweet_blocks),v=Object(l.a)(x,2),y=(v[0],v[1],Object(c.useState)(t.user===a)),N=Object(l.a)(y,1)[0],C=Object(c.useState)(""),E=Object(l.a)(C,2),P=E[0],T=E[1],B=Object(c.useState)(!1),R=Object(l.a)(B,2),A=R[0],V=R[1],W=Object(c.useState)([]),M=Object(l.a)(W,2),J=M[0],H=(M[1],Object(c.useState)([])),Z=Object(l.a)(H,2),Y=Z[0],$=Z[1],q=Object(c.useState)(!0),K=Object(l.a)(q,2),Q=K[0],X=K[1],ee=Object(te.getCurrentHashTag)(),ne=function(){var e=Object(tt.a)(et.a.mark((function e(){return et.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w(t.user).then((function(e){T(e.data.avatar[0].profile_picture)})).catch((function(e){console.log(e.message)}));case 2:return e.next=4,U(a,t.tweet_id).then((function(e){e.data.bool.length?i(!0):i(!1)})).catch((function(e){console.log(e.message)}));case 4:return e.next=6,_(t.tweet_id).then((function(e){var t=e.data.comments;$(t)})).catch((function(e){return console.log(e.message)}));case 6:return e.next=8,L(g).then((function(e){console.log(e.data)})).catch((function(e){return console.log(e.message)}));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ce=function(e){var t=Y.filter((function(t){return t.comm_id!==e}));$(t),I(e).then((function(e){console.log(e),O(f-1)})).catch((function(e){return console.log(e.message)}))};Object(c.useEffect)((function(){}),[J]),Object(c.useEffect)((function(){ne()}),[]);var ae=t.tweet_date.split("T")[0],oe="/api/viewFile/".concat(P),se="/api/viewFile/".concat(t.content);return"undefined"===typeof ee||t.content.includes(ee)?(console.log("dfdsdfssd",ee,t.content),Object(G.jsx)(G.Fragment,{children:Object(G.jsxs)("div",{style:{display:Q?"block":"none"},id:"container_tweet",children:[Object(G.jsxs)("div",{className:"tweet_header",children:[Object(G.jsx)("div",{className:"tweet_img",children:Object(G.jsx)("img",{className:"tweet_header",id:"tweet_author_picture",src:oe,alt:""})}),Object(G.jsxs)("div",{className:"tweet_text",children:[Object(G.jsx)("span",{style:{fontSize:"13px",fontWeight:"bold"},id:"author_username",children:t.user}),Object(G.jsx)("span",{style:{fontSize:"10px"},id:"date",children:ae})]})]}),Object(G.jsx)("div",{id:"menu",children:Object(G.jsx)(ue.a,{title:N?"Delete post":"Hide post",placement:"top",children:Object(G.jsx)(ge.a,{style:{borderRadius:"50%",padding:"3",color:"#0C8367"},onClick:function(){X(!1),n(g,N)},children:Object(G.jsx)(ht.a,{id:t.tweet_id})})})}),Object(G.jsx)(De.a,{variant:"middle"}),Object(G.jsx)("div",{className:"tweet_content",children:Object(G.jsxs)(G.Fragment,{children:["text"===t.type&&Object(G.jsx)("p",{style:{textAlign:"left"},children:t.content}),"video"===t.type&&Object(G.jsxs)("video",{className:"tweet_video",controls:!0,children:[" ",Object(G.jsx)("source",{src:se})]}),"song"===t.type&&Object(G.jsx)("audio",{controls:!0,children:Object(G.jsx)("source",{src:se})}),"picture"===t.type&&Object(G.jsx)("img",{className:"tweet_image",id:"tweet_media_picture",src:se,alt:""})]})}),Object(G.jsx)(De.a,{variant:"middle"}),Object(G.jsx)("div",{className:"comment",children:Object(G.jsx)(ft,{handleComment:function(e,t){""!==e&&function(e,t){var n=(new Date).toISOString(),c={comment_id:rn("".concat(e).concat(a).concat(n)),tweet_id:t,user:a,content:e,timestamp:n};Y.unshift(c),S(c).then((function(e){console.log(e.message),k(g,f+1).then((function(e){console.log(e.message),O(f+1)})).catch((function(e){return console.log(e.message)}))})).catch((function(e){return console.log(e.message)}))}(e,g)}})}),Object(G.jsxs)("div",{className:"comment_item",style:{height:A?"300px":"200px",display:f>0?"block":"none"},children:[Object(G.jsx)("div",{style:{margin:"auto",textAlign:"center",fontWeight:"bold",color:"#0C8367"},children:Object(G.jsx)("span",{children:0!==f?"".concat(f," comments"):"Comments"})}),Object(G.jsx)("div",{style:{margin:"auto",width:"90%",height:"100%"},children:Object(G.jsx)("ul",{id:"list".concat(g),style:{whiteSpace:"nowrap",listStyleType:"none"},children:Y.map((function(e){return Object(G.jsx)("li",{style:{marginBottom:"35px"},children:Object(G.jsx)(gt,{data:e,handleDeleteComment:ce})},e.comm_id)}))})})]}),Object(G.jsxs)("div",{className:"tweet_bottom",children:[Object(G.jsxs)("div",{className:"likes",children:[Object(G.jsx)(ge.a,{onClick:function(){r?z(a,g).then((function(e){200===e.status&&F(g,j-1).then((function(e){console.log(e.message),m(j-1)})).catch((function(e){console.log(e.message)}))})).catch((function(e){console.log(e.message)})):D(a,g).then((function(e){F(g,j+1).then((function(e){console.log(e),m(j+1)})).catch((function(e){console.log(e.message)}))})).catch((function(e){console.log(e.message)})),i(!r)},style:{borderRadius:"50%",padding:"3",color:r?"red":"black"},children:Object(G.jsx)(mt.a,{})}),Object(G.jsx)("span",{style:{color:"#0C8367"},children:"".concat(j," likes")})]}),Object(G.jsx)("div",{style:{display:N?"block":"none"},className:"analytics",children:Object(G.jsx)(kt,{tweetId:t.tweet_id})}),Object(G.jsx)("div",{className:"comments",children:Object(G.jsx)("button",{onClick:function(){V(!A)},id:"viewCommentsBtn",type:"button",children:A?"View less":"View more"})})]})]})})):Object(G.jsx)("div",{})}var dn=n(54);function un(){var e=Object(c.useState)(!0),t=Object(l.a)(e,2),n=t[0],a=t[1],o=Object(c.useState)(!1),s=Object(l.a)(o,2),r=(s[0],s[1],Object(c.useState)([])),i=Object(l.a)(r,2),d=i[0],u=i[1],j=Object(c.useState)(1),m=Object(l.a)(j,2),b=m[0],O=m[1],p=Object(c.useState)(25),g=Object(l.a)(p,2),x=(g[0],g[1],Object(c.useRef)()),v=Object(c.useCallback)((function(e){n||(x.current&&x.current.disconnect(),x.current=new IntersectionObserver((function(e){e[0].isIntersecting&&O((function(e){return e+1}))})),e&&x.current.observe(e))}),[n]),w=Object(te.getCurrentUsername)(),S=function(){var e=Object(tt.a)(et.a.mark((function e(){return et.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:f(w).then((function(e){console.log("typeof",e.data.count[0][0].COUNT)})).catch((function(e){return console.log(e)}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){S()}),[]),Object(c.useEffect)((function(){a(!0),h(w,b,10).then((function(e){u((function(t){return[].concat(Object(Z.a)(t),Object(Z.a)(e.data.tweets[0]))})),a(!1)})).catch((function(e){return console.log(e)}))}),[b]);var C=function(){var e=Object(tt.a)(et.a.mark((function e(t){return et.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u((function(e){return e.filter((function(e){return e.tweet_id!==t}))}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=function(e,t){t?T(e).then((function(t){console.log("here"),C(e)})).catch((function(e){console.log(e.message)})):B(e,w).then((function(t){u((function(t){return t.filter((function(t){return t.tweet_id!==e}))}))})).catch((function(e){return console.log(e)}))},k={postTweet:function(){var e=document.getElementById("tweet").value;if(0!==e.length){var t=e.match(/\B\#\w\w+\b/g),n=(new Date).toISOString(),c=dn("".concat(e).concat(w).concat(n)),a={user:w,tweet_id:c,type:"text",content:e,tweet_date:n,tweet_likes:0};u((function(e){return[a].concat(Object(Z.a)(e))})),y(a).then((function(e){})).catch((function(e){console.log(e.message)})),null!==t&&t.length>0&&N(c,t[0]).then((function(){})).catch((function(e){console.log(e.message)}))}},postPicture:function(e){var t=new FormData,n=document.getElementById("fileInputPictureCommentBox").value;t.append("image",e.target.files[0],n);var c={method:"POST",body:t,redirect:"follow"},a=document.getElementById("tweet").value;if("undefined"!==typeof a){var o=(new Date).toISOString(),s=dn("".concat(a).concat(w).concat(o));(function(){var e=Object(tt.a)(et.a.mark((function e(){var t,n;return et.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="",e.next=3,fetch("/api/uploadFile",c).then((function(e){return e.text()})).then((function(e){t=JSON.parse(e).data})).catch((function(e){console.log(e)}));case 3:return console.log("content",t),n={user:w,tweet_id:s,type:"picture",content:t,tweet_date:o,tweet_likes:0},e.next=7,y(n).then((function(e){u((function(e){return[n].concat(Object(Z.a)(e))}))})).catch((function(e){console.log(e.message)}));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}},postVideo:function(e){var t=new FormData,n=document.getElementById("fileInputVideo").value;t.append("image",e.target.files[0],n);var c={method:"POST",body:t,redirect:"follow"},a=document.getElementById("tweet").value;if("undefined"!==typeof a){var o=(new Date).toISOString(),s=dn("".concat(a).concat(w).concat(o));fetch("/api/uploadFile",c).then((function(e){return e.text()})).then((function(e){y({user:w,tweet_id:s,type:"video",content:JSON.parse(e).data,tweet_date:o,tweet_likes:0}).then((function(e){console.log(e.message),window.location.reload()})).catch((function(e){console.log(e.message)}))})).catch((function(e){console.log(e)}))}},postSong:function(e){var t=new FormData,n=document.getElementById("fileInputSong").value;t.append("image",e.target.files[0],n);var c={method:"POST",body:t,redirect:"follow"},a=document.getElementById("tweet").value;if("undefined"!==typeof a){var o=(new Date).toISOString(),s=dn("".concat(a).concat(w).concat(o));fetch("/api/uploadFile",c).then((function(e){return e.text()})).then((function(e){y({user:w,tweet_id:s,type:"song",content:JSON.parse(e).data,tweet_date:o,tweet_likes:0}).then((function(e){window.location.reload(),console.log(e.message)})).catch((function(e){console.log(e.message)}))})).catch((function(e){console.log(e)}))}}};return Object(G.jsxs)(G.Fragment,{children:[Object(G.jsxs)("div",{className:"container_center",children:[Object(G.jsx)(Vt,{className:"tweetIpt",handlers:k}),Object(G.jsx)("div",{className:"tweet_items",children:d.map((function(e,t){return d.length===t+1?Object(G.jsx)("div",{ref:v,className:"tContainer",children:Object(G.jsx)(ln,{handleDelete:_,data:e})}):Object(G.jsx)("div",{className:"tContainer",children:Object(G.jsx)(ln,{handleDelete:_,data:e})})}))})]}),Object(G.jsx)("div",{children:Object(G.jsx)(zt.a,{style:{color:"green"}})})]})}function jn(){return Object(G.jsxs)("div",{children:[Object(G.jsx)("div",{className:"nav_item",children:Object(G.jsx)(Ue,{})}),Object(G.jsxs)("div",{className:"home",children:[Object(G.jsx)("div",{className:"sidebar_item",children:Object(G.jsx)(Dt,{})}),Object(G.jsx)("div",{className:"center_item",children:Object(G.jsx)(un,{})}),Object(G.jsxs)("div",{className:"right_item",children:[Object(G.jsx)("div",{className:"searchbox",children:Object(G.jsx)(Lt,{})}),Object(G.jsx)("div",{className:"suggestionBox",children:Object(G.jsx)(Rt,{})})]})]})]})}var mn=function(){return Object(G.jsx)(r.a,{children:Object(G.jsxs)(i.d,{children:[Object(G.jsx)(i.b,{path:"/",exact:!0,render:function(){return Object(G.jsx)(H,{})}}),Object(G.jsx)(i.b,{path:"/registration",exact:!0,render:function(){return Object(G.jsx)(H,{})}}),Object(G.jsx)(i.b,{path:"/login",exact:!0,render:function(){return Object(G.jsx)(Ut,{})}}),Object(G.jsx)(i.b,{path:"/signup/",exact:!0,render:function(){return Object(G.jsx)(Gt,{})}}),Object(G.jsx)(i.b,{path:"/home",component:function(){return Object(G.jsx)(Jt,{})}}),Object(G.jsx)(i.b,{path:"/profile",exact:!0,render:function(){return Object(G.jsx)(Ft,{})}}),Object(G.jsx)(i.b,{path:"/resetPassword",exact:!0,render:function(){return Object(G.jsx)(tn,{})}}),Object(G.jsx)(i.b,{path:"/videochat",exact:!0,render:function(){return Object(G.jsx)(en,{})}}),Object(G.jsx)(i.b,{path:"/message",exact:!0,render:function(){return Object(G.jsx)(sn,{})}}),Object(G.jsx)(i.b,{path:"/hashTagTweets",exact:!0,render:function(){return Object(G.jsx)(jn,{})}})]})})};s.a.render(Object(G.jsx)(r.a,{children:Object(G.jsx)(mn,{})}),document.getElementById("react-root"))},47:function(e,t){e.exports={isValidPassword:function(e){return new RegExp("^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*])(?=.{8,})").test(e)},isValidUsername:function(e){return new RegExp("^[a-zA-Z0-9_]*$").test(e)},isValidEmail:function(e){return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())},isSamePassword:function(e,t){return e===t}}},81:function(e,t,n){},82:function(e,t,n){},83:function(e,t,n){},9:function(e,t){e.exports={getCurrentUsername:function(){return JSON.parse(localStorage.getItem("username"))},isLogged:function(){return!!JSON.parse(localStorage.getItem("username"))},logout:function(){localStorage.removeItem("username")},getCurrentReceiver:function(){return JSON.parse(localStorage.getItem("receiver"))},getCurrentHashTag:function(){return JSON.parse(localStorage.getItem("hashtag"))}}}},[[354,1,2]]]);
//# sourceMappingURL=main.83f51203.chunk.js.map