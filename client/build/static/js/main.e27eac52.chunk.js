(this.webpackJsonpprofile=this.webpackJsonpprofile||[]).push([[0],{10:function(e,t){e.exports={getCurrentUsername:function(){return JSON.parse(localStorage.getItem("username"))},isLogged:function(){return!!JSON.parse(localStorage.getItem("username"))},logout:function(){localStorage.removeItem("username")},getCurrentReceiver:function(){return JSON.parse(localStorage.getItem("receiver"))}}},105:function(e,t,n){},106:function(e,t,n){},141:function(e,t,n){},142:function(e,t,n){},143:function(e,t,n){},144:function(e,t,n){},145:function(e,t,n){},215:function(e,t,n){},241:function(e,t,n){},242:function(e,t,n){},245:function(e,t,n){},247:function(e,t,n){},248:function(e,t,n){},249:function(e,t,n){},250:function(e,t,n){},354:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),o=n(14),r=n.n(o),s=(n(215),n(87),n(25)),i=n(18),l=(n(58),n(4)),d=n(8),u=n.n(d);function j(e,t){var n="/api/profile/interest/".concat(t);return u()({method:"POST",url:n,data:{interest:e}})}function b(e,t){var n="/api/profile/delete/interest/".concat(t);return u()({method:"DELETE",url:n,data:{interest:e}})}function m(e){var t="/api/tweets/all/".concat(e);return u()({method:"GET",url:t})}function h(e){var t="/api/profile/".concat(e);return u()({method:"GET",url:t})}function f(e){var t="/api/profile/followers/".concat(e);return u()({method:"GET",url:t})}function O(e){var t="/api/profile/friends/".concat(e);return u()({method:"GET",url:t})}function p(e,t){var n="/api/block/".concat(e);return u()({method:"POST",url:n,data:{follower:t}})}function g(e){var t="/api/blocked/".concat(e);return u()({method:"GET",url:t})}function x(e){return u()({method:"GET",url:"/api/profile/avatar/".concat(e)})}function v(e){return u()({method:"POST",url:"/api/createTweet/".concat(e.user),data:{content:e.content,tweet_date:e.tweet_date,type:e.type,tweetId:e.tweet_id}})}function w(e){return u()({method:"GET",url:"/api/tweet/comments/all/".concat(e)})}function y(e,t){var n="/api/follow/".concat(e);return u()({method:"POST",url:n,data:{follower:t}})}function N(e){var t="/api/tweet/delete/".concat(e);return u()({method:"DELETE",url:t})}function S(e,t){var n="/api/tweet/hide/".concat(e);return u()({method:"POST",url:n,data:{username:t}})}function C(e,t){var n="/api/tweet/likes/".concat(e);return u()({method:"PUT",url:n,data:{likes:t}})}function k(e,t){var n="/api/tweet/isliked/".concat(e,"/").concat(t,"/");return u()({method:"GET",url:n})}var I=function(e){return u()({method:"GET",url:"/api/tweet/hiders/all/".concat(e)})};var E=function(e,t){return u()({method:"POST",url:"/api/updateNumberFailedLogins",data:{username:e,numberOfFailedLogins:t}})};function _(e){return u()({method:"POST",url:"/api/createMessage/".concat(e.user,"/").concat(e.receiver),data:{content:e.content,message_date:e.message_date,type:e.type,messageId:e.message_id}})}function P(e,t){var n="/api/profile/messages/:".concat(e,"/:").concat(t);return u()({method:"GET",url:n})}var T=n(50),B=n(1);function F(){var e=Object(c.useState)(""),t=Object(l.a)(e,2),n=t[0],a=t[1],o=Object(c.useState)(""),r=Object(l.a)(o,2),d=r[0],j=r[1],b=Object(c.useState)(""),m=Object(l.a)(b,2),h=m[0],f=m[1],O=Object(c.useState)(""),p=Object(l.a)(O,2),g=p[0],x=p[1],v=Object(c.useState)(""),w=Object(l.a)(v,2),y=w[0],N=w[1],S=Object(c.useState)(""),C=Object(l.a)(S,2),k=C[0],I=C[1],E=Object(i.g)();u.a.defaults.withCredentials=!0;return Object(B.jsx)("div",{className:"card shadow mx-auto mt-5",style:{width:"30rem"},children:Object(B.jsx)("div",{className:"container mx-1",children:Object(B.jsxs)("div",{className:"card-body p-xs",children:[Object(B.jsx)("h2",{className:"card-title text-center font-weight-bold",children:"Sign Up"}),Object(B.jsxs)("div",{className:"form-group",children:[Object(B.jsx)("label",{htmlFor:"new-username-form",children:"Username:"}),Object(B.jsx)("input",{id:"new-username-form",placeholder:"Enter Username",className:"form-control",onChange:function(e){return a(e.target.value)}})]}),Object(B.jsxs)("div",{className:"form-group",children:[Object(B.jsx)("label",{htmlFor:"exampleInputEmail1",children:"Email address"}),Object(B.jsx)("input",{type:"email",className:"form-control",id:"exampleInputEmail1","aria-describedby":"emailHelp",placeholder:"Enter email",onChange:function(e){return I(e.target.value)}}),Object(B.jsx)("small",{id:"emailHelp",className:"form-text text-muted",children:"We will never share your email with anyone else."})]}),Object(B.jsxs)("div",{className:"form-group",children:[Object(B.jsx)("label",{children:"First Name:"}),Object(B.jsx)("input",{type:"name",id:"new-first-name-form",className:"form-control",placeholder:"Enter First Name",onChange:function(e){return x(e.target.value)}})]}),Object(B.jsxs)("div",{className:"form-group",children:[Object(B.jsx)("label",{children:"Last Name:"}),Object(B.jsx)("input",{type:"name",id:"new-last-name-form",placeholder:"Enter Last Name",className:"form-control",onChange:function(e){return N(e.target.value)}})]}),Object(B.jsxs)("div",{className:"form-group",children:[Object(B.jsx)("label",{children:"Password:"}),Object(B.jsx)("input",{type:"password",id:"new-password-form","aria-describedby":"passwordHelp",className:"form-control",placeholder:"Enter Password",onChange:function(e){return j(e.target.value)}}),Object(B.jsx)("small",{id:"passwordHelp",className:"form-text text-muted",children:"Minimum eight characters, at least one uppercase letter, one lowercase letter, one number and one special character"})]}),Object(B.jsxs)("div",{className:"form-group",children:[Object(B.jsx)("label",{children:"Confirm Password:"}),Object(B.jsx)("input",{type:"password",id:"new-password-two-form",className:"form-control",placeholder:"Re-Enter Password",onChange:function(e){return f(e.target.value)}})]}),Object(B.jsx)("div",{className:"form-group",children:Object(B.jsx)("button",{type:"submit",className:"btn btn-primary w-100",onClick:function(){return Object(T.isSamePassword)(d,h)?Object(T.isValidUsername)(n)?Object(T.isValidPassword)(d)?Object(T.isValidEmail)(k)?void function(e,t,n,c,a){return localStorage.setItem("username",JSON.stringify(e)),u()({method:"POST",url:"/api/register",data:{username:e,password:t,first_name:n,last_name:c,email:a}})}(n,d,g,y,k).then((function(e){console.log(e),E.push("/signup")})).catch((function(e){console.log(e)})):(alert("Invalid email, please re-enter"),void(document.getElementById("exampleInputEmail1").value="")):(alert("Invalid password, password must have a minimum eight characters, at least one uppercase letter, one lowercase letter, one number and one special character"),document.getElementById("new-password-form").value="",void(document.getElementById("new-password-two-form").value="")):(alert("Invalid User Name"),void(document.getElementById("new-username-form").value="")):(alert("Passwords do not match, please re-enter"),document.getElementById("new-password-form").value="",void(document.getElementById("new-password-two-form").value=""))},children:"Sign Up"})}),Object(B.jsxs)("p",{children:["Already have an account?\xa0",Object(B.jsx)(s.b,{to:"/login",children:"Log in here!"})]})]})})})}var U=n(42),D=(n(241),n(190)),L=n.n(D),R=n(409),M=n(411),A=n(397),V=n(394),W=n(393),J=(n(242),n(10));function G(){var e=Object(J.getCurrentUsername)(),t=Object(c.useState)(!1),n=Object(l.a)(t,2),a=n[0],o=n[1],r=Object(c.useState)(!1),s=Object(l.a)(r,2),d=s[0],j=s[1],b=Object(c.useState)(""),m=Object(l.a)(b,2),h=m[0],f=m[1],O=function(){o(!1),f("")};return d?Object(B.jsx)(i.a,{to:"/login"}):Object(B.jsxs)("div",{children:[Object(B.jsx)("button",{id:"delete",style:{color:"#00695c",border:"none",backgroundColor:"inherit"},type:"button",onClick:function(){o(!0)},children:"Delete account"}),Object(B.jsxs)(M.a,{open:a,onClose:O,"aria-labelledby":"form-dialog-title",children:[Object(B.jsx)(W.a,{id:"form-dialog-title",children:"Confirm account deletion"}),Object(B.jsx)(V.a,{children:Object(B.jsx)(R.a,{error:""!==h,autoFocus:!0,margin:"dense",id:"passwordInput",label:"Input password",type:"password",fullWidth:!0,helperText:h})}),Object(B.jsxs)(A.a,{children:[Object(B.jsx)("button",{className:"btn cancel",type:"button",onClick:O,children:"Cancel"}),Object(B.jsx)("button",{className:"btn delete",type:"button",onClick:function(){var t=document.getElementById("passwordInput").value;""!==t&&function(e,t){var n="/api/profile/deactivate/".concat(e);return u()({method:"PUT",url:n,data:{password:t}})}(e,t).then((function(e){console.log(e),o(!1),j(!0)})).catch((function(e){console.log(e),f("Incorrect entry")}))},children:"Delete"})]})]})]})}var z=n(398);function H(){var e=Object(J.getCurrentUsername)(),t=Object(c.useState)(!1),n=Object(l.a)(t,2),a=n[0],o=n[1],r=Object(c.useState)(!0),s=Object(l.a)(r,2),i=s[0],d=s[1],j=Object(c.useState)(!0),b=Object(l.a)(j,2),m=b[0],h=b[1],f=function(){o(!1)};return Object(B.jsxs)("div",{children:[Object(B.jsx)("button",{id:"change",style:{color:"#00695c",border:"none",backgroundColor:"inherit"},type:"button",onClick:function(){d(!0),o(!0),h(!0)},children:"Change password"}),Object(B.jsxs)(M.a,{open:a,onClose:f,"aria-labelledby":"form-dialog-title",children:[Object(B.jsx)(W.a,{id:"form-dialog-title",children:"Change password"}),Object(B.jsxs)(V.a,{children:[Object(B.jsx)(R.a,{autoFocus:!0,margin:"dense",id:"oldPassword",label:"Old password",type:"password",fullWidth:!0}),Object(B.jsx)(R.a,{error:!m,autoFocus:!0,onChange:function(e){var t;h((t=e.target.value,new RegExp("^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*])(?=.{8,})").test(t)))},margin:"dense",id:"newPassword",label:"Input new password",type:"password",fullWidth:!0,helperText:m?"Password is strong!":"Password needs a min length of 8. It must consist of at 8 ..."}),Object(B.jsx)(R.a,{error:!i,onChange:function(e){d(e.target.value===document.getElementById("newPassword").value)},autoFocus:!0,margin:"dense",id:"newPasswordConfirmed",label:"Confirm new password",type:"password",fullWidth:!0,helperText:i?"":"New password must be identical"})]}),Object(B.jsxs)(A.a,{children:[Object(B.jsx)(z.a,{onClick:f,color:"#00695c",children:"Cancel"}),Object(B.jsx)(z.a,{onClick:function(){var t=document.getElementById("oldPassword").value,n=document.getElementById("newPassword").value;i&&m&&t!==n&&""!==n&&""!==t&&function(e,t,n){var c="/api/profile/password/".concat(e);return u()({method:"PUT",url:c,data:{newPassword:t,oldPassword:n}})}(e,n,t).then((function(e){200===e.status?o(!1):o(!0)})).catch((function(e){return console.log(e.message)}))},color:"primary",children:"Update"})]})]})]})}var Z=n(396),Y=n(357),$=n(401),q=n(400),K=n(399),Q=n(413),X=n(414),ee=Object(K.a)((function(e){return{root:{width:"100%",maxWidth:360,backgroundColor:e.palette.background.paper}}}));function te(e){var t=e.secondary,n=e.title,o=e.secondTitle,r=e.getFunction,s=e.Icon,i=e.handle,d=e.iconText,u=ee(),j=Object(c.useState)(!1),b=Object(l.a)(j,2),m=b[0],h=b[1],f=Object(c.useState)("paper"),O=Object(l.a)(f,2),p=O[0],g=O[1],x=Object(c.useState)([]),v=Object(l.a)(x,2),w=v[0],y=v[1],N=Object(J.getCurrentUsername)(),S=function(e){return console.log(e.profile_picture),Object(B.jsxs)(Y.a,{children:[Object(B.jsx)(q.a,{children:Object(B.jsx)(Q.a,{alt:"",src:"/viewFile/".concat(e.profile_picture)})}),Object(B.jsx)($.a,{primary:e.username,secondary:t}),Object(B.jsx)(X.a,{title:d,placement:"top",children:Object(B.jsx)(s,{className:"button",color:"secondary",onClick:function(){return i(e.username)}})})]})};Object(c.useEffect)((function(){}),[w]);var C,k=function(){h(!1)},I=a.a.useRef(null);return a.a.useEffect((function(){if(m){var e=I.current;null!==e&&e.focus()}}),[m]),Object(B.jsxs)("div",{children:[Object(B.jsx)("button",{onClick:(C="paper",function(){console.log("here"),r(N).then((function(e){var t=[];e.data.friends?(t=e.data.friends.map((function(e){return S(e)})),console.log(e.data.friends)):e.data.followers&&(t=e.data.followers.map((function(e){return S(e)})),console.log(e.data.followers)),y(t)})).catch((function(e){console.log(e.message)})),h(!0),g(C)}),className:"btn",id:"delete",style:{color:"#00695c",border:"none",backgroundColor:"inherit"},type:"button",children:n}),Object(B.jsxs)(M.a,{open:m,onClose:k,scroll:p,"aria-labelledby":"scroll-dialog-title","aria-describedby":"scroll-dialog-description",children:[Object(B.jsx)(W.a,{id:"scroll-dialog-title",children:o}),Object(B.jsx)(V.a,{dividers:"paper"===p,children:Object(B.jsx)(Z.a,{className:u.root,children:w})}),Object(B.jsx)(A.a,{children:Object(B.jsx)("button",{onClick:k,className:"btn",id:"delete",style:{color:"#00695c",border:"none",backgroundColor:"inherit"},type:"button",children:"Close"})})]})]})}function ne(e){var t=Object(J.getCurrentUsername)(),n=e.data.profile_picture;console.log("pics".concat(n));var c="/viewFile/".concat(n);return Object(B.jsxs)("div",{className:"container-profile",children:[Object(B.jsxs)("div",{className:"pictures",children:[Object(B.jsx)("img",{src:c,alt:"",id:"overlay"}),Object(B.jsx)("img",{src:c,alt:"",id:"originalDiv"})]}),Object(B.jsx)("br",{}),Object(B.jsx)("div",{className:"username",children:Object(B.jsx)("span",{id:"username",children:e.data.username})}),Object(B.jsxs)("div",{className:"deleteButton",children:[Object(B.jsx)(te,{secondary:"blocked",title:"My Blocked Users",secondTitle:"Blocked Users",getFunction:g,Icon:L.a,handle:function(e){(function(e,t){var n="/api/unblock/".concat(e);return u()({method:"PUT",url:n,data:{follower:t}})})(t,e).then((function(e){console.log(e.message),g(t).then((function(e){console.log(e.data.friends)}))}))},iconText:"Unblock User"}),Object(B.jsx)(G,{}),Object(B.jsx)(H,{})]})]})}var ce=n(43),ae=n(19),oe=n(405),re=n(406),se=n(403),ie=n(74),le=n(404),de=n(402),ue=n(199),je=n(122),be=n.n(je),me=n(120),he=n.n(me),fe=n(119),Oe=n.n(fe),pe=n(121),ge=n.n(pe),xe=n(191),ve=n.n(xe),we=Object(K.a)((function(e){return{grow:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:Object(ce.a)({display:"none"},e.breakpoints.up("sm"),{display:"block"}),search:Object(ce.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(ae.b)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(ae.b)(e.palette.common.white,.25)},marginRight:e.spacing(2),marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(3),width:"auto"}),searchIcon:{padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:Object(ce.a)({padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("md"),{width:"20ch"}),sectionDesktop:Object(ce.a)({display:"none"},e.breakpoints.up("md"),{display:"flex"}),sectionMobile:Object(ce.a)({display:"flex"},e.breakpoints.up("md"),{display:"none"})}}));function ye(){var e=we(),t=Object(c.useState)(null),n=Object(l.a)(t,2),a=n[0],o=n[1],r=Object(c.useState)(null),s=Object(l.a)(r,2),d=s[0],u=s[1],j=Boolean(a),b=Boolean(d),m=function(e){o(e.currentTarget)},h=Object(i.g)(),f=function(){u(null)},O=function(){o(null);h.push("/profile"),f()},p=function(){h.push("/home")},g="primary-search-account-menu",x=Object(B.jsxs)(ue.a,{anchorEl:a,anchorOrigin:{vertical:"top",horizontal:"right"},id:g,keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:j,onClose:O,children:[Object(B.jsx)(de.a,{onClick:p,children:"Home"}),Object(B.jsx)(de.a,{onClick:O,children:"My Account"}),Object(B.jsx)(de.a,{onClick:function(){Object(J.logout)();h.push("/login")},children:"Log Out"})]}),v="primary-search-account-menu-mobile",w=Object(B.jsxs)(ue.a,{anchorEl:d,anchorOrigin:{vertical:"top",horizontal:"right"},id:v,keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:b,onClose:f,children:[Object(B.jsxs)(de.a,{onClick:p,children:[Object(B.jsx)(se.a,{color:"inherit",children:Object(B.jsx)(le.a,{children:Object(B.jsx)(Oe.a,{})})}),Object(B.jsx)("p",{children:"Home"})]}),Object(B.jsxs)(de.a,{children:[Object(B.jsx)(se.a,{"aria-label":"show 4 new mails",color:"inherit",children:Object(B.jsx)(le.a,{badgeContent:4,color:"secondary",children:Object(B.jsx)(he.a,{})})}),Object(B.jsx)("p",{children:"Messages"})]}),Object(B.jsxs)(de.a,{children:[Object(B.jsx)(se.a,{"aria-label":"show 11 new notifications",color:"inherit",children:Object(B.jsx)(le.a,{badgeContent:11,color:"secondary",children:Object(B.jsx)(ge.a,{})})}),Object(B.jsx)("p",{children:"Notifications"})]}),Object(B.jsxs)(de.a,{onClick:m,children:[Object(B.jsx)(se.a,{"aria-label":"account of current user","aria-controls":"primary-search-account-menu","aria-haspopup":"true",color:"inherit",onClick:p,children:Object(B.jsx)(be.a,{})}),Object(B.jsx)("p",{children:"Home"})]})]});return Object(B.jsx)("div",{style:{position:"relative",top:"0px"},children:Object(B.jsx)("div",{style:{position:"relative",top:"0px"},className:"rest",children:Object(B.jsxs)("div",{className:e.grow,children:[Object(B.jsx)(oe.a,{style:{backgroundColor:"#0C8367"},position:"static",children:Object(B.jsxs)(re.a,{children:[Object(B.jsx)(ie.a,{className:e.title,variant:"h6",noWrap:!0,children:"Trinirwa Microblog"}),Object(B.jsx)("div",{className:e.grow}),Object(B.jsxs)("div",{className:e.sectionDesktop,children:[Object(B.jsx)(se.a,{onClick:p,color:"inherit",children:Object(B.jsx)(le.a,{children:Object(B.jsx)(Oe.a,{})})}),Object(B.jsx)(se.a,{"aria-label":"show 4 new mails",color:"inherit",children:Object(B.jsx)(le.a,{badgeContent:4,color:"secondary",children:Object(B.jsx)(he.a,{})})}),Object(B.jsx)(se.a,{"aria-label":"show 17 new notifications",color:"inherit",children:Object(B.jsx)(le.a,{badgeContent:17,color:"secondary",children:Object(B.jsx)(ge.a,{})})}),Object(B.jsx)(se.a,{edge:"end","aria-label":"account of current user","aria-controls":g,"aria-haspopup":"true",onClick:m,color:"inherit",children:Object(B.jsx)(be.a,{})})]}),Object(B.jsx)("div",{className:e.sectionMobile,children:Object(B.jsx)(se.a,{"aria-label":"show more","aria-controls":v,"aria-haspopup":"true",onClick:function(e){u(e.currentTarget)},color:"inherit",children:Object(B.jsx)(ve.a,{})})})]})}),w,x]})})})}n(245);var Ne=n(407);function Se(e){var t=a.a.useState(!1),n=Object(l.a)(t,2),c=n[0],o=n[1],r=function(){o(!0)},s=function(){var t=document.getElementById("interest").value;e.onClose(t),o(!1)};return Object(B.jsxs)("div",{children:[Object(B.jsx)(z.a,{color:"primary",onClick:r,children:"Add interest"}),Object(B.jsxs)(M.a,{open:c,onClose:r,"aria-labelledby":"form-dialog-title",children:[Object(B.jsx)(W.a,{id:"form-dialog-title",children:"Add interest"}),Object(B.jsx)(V.a,{children:Object(B.jsx)(R.a,{autoFocus:!0,margin:"dense",id:"interest",type:"string",fullWidth:!0})}),Object(B.jsxs)(A.a,{children:[Object(B.jsx)(z.a,{onClick:s,color:"primary",children:"Cancel"}),Object(B.jsx)(z.a,{onClick:s,color:"primary",children:"Add"})]})]})]})}function Ce(e){var t=e.interests,n=e.addInterest,c=e.deleteInterest,a=[];return t.forEach((function(e){a.push(Object(B.jsx)("li",{onClick:function(){return c(e)},className:"badge rounded-pill bg-secondary m-2",children:e},e))})),Object(B.jsxs)("div",{className:"wrapper",children:[Object(B.jsx)("div",{className:"section1",children:Object(B.jsx)("ul",{children:a})}),Object(B.jsx)(Ne.a,{variant:"middle"}),Object(B.jsx)("div",{className:"section2",children:Object(B.jsx)(Se,{onClose:n})})]})}n(141);var ke=n(66),Ie=n.n(ke),Ee=n(99),_e=n.n(Ee),Pe=(n(142),Object(K.a)((function(e){return{root:{"& > *":{margin:e.spacing(2),borderRadius:"100%",padding:0,overflow:"none"}}}})));function Te(e){var t=e.info,n=e.handleB,c=e.handleF,a=Pe();return Object(B.jsxs)("div",{className:"Container_two",children:[Object(B.jsxs)("div",{className:a.root,children:[Object(B.jsx)(X.a,{title:"Block user",placement:"top",children:Object(B.jsx)(_e.a,{className:"button",color:"secondary",onClick:function(){return n(t.username)}})}),Object(B.jsx)(X.a,{title:"Follow",placement:"top",children:Object(B.jsx)(Ie.a,{className:"button",onClick:function(){return c(t.username)}})})]}),Object(B.jsx)("div",{className:"followerContainer",children:Object(B.jsx)("div",{className:"myimgContainer",children:Object(B.jsx)("img",{className:"myimg",src:"/viewFile/".concat(t.profile_picture),alt:""})})}),Object(B.jsx)("div",{className:"text",children:t.username})]})}function Be(){var e=Object(J.getCurrentUsername)(),t=Object(c.useState)([]),n=Object(l.a)(t,2),a=n[0],o=n[1];Object(c.useEffect)((function(){f(e).then((function(e){o(e.data.followers)}))}),[]);var r=function(t){p(e,t).then((function(t){console.log(t.message),f(e).then((function(e){o(e.data.followers)}))}))},s=function(t){y(e,t).then((function(t){console.log(t.message),f(e).then((function(e){o(e.data.followers)}))}))},i=a.map((function(e){return Object(B.jsx)(Te,{info:e,handleB:r,handleF:s})}));return Object(B.jsxs)("div",{className:"box-container",children:[Object(B.jsx)("div",{className:"buttonFollowers",children:Object(B.jsx)(te,{secondary:"follower",title:"All followers",secondTitle:"All followers",getFunction:f,Icon:Ie.a,handle:s,iconText:"Follow"})}),Object(B.jsx)("div",{className:"title",children:"Followers"}),Object(B.jsx)("br",{}),Object(B.jsx)("div",{className:"box",children:Object(B.jsx)("div",{className:"containers",children:i})})]})}var Fe=n(100),Ue=n.n(Fe),De=n(192),Le=n.n(De),Re=Object(K.a)((function(e){return{root:{"& > *":{margin:e.spacing(1.5),borderRadius:"100%",padding:0,overflow:"none"}}}}));function Me(e){var t=e.info,n=e.handleB,c=e.handleMessage,a=e.handleU,o=Re();return Object(B.jsxs)("div",{className:"Container_two",children:[Object(B.jsxs)("div",{className:o.root,children:[Object(B.jsx)(X.a,{title:"Message",placement:"top",children:Object(B.jsx)(Le.a,{className:"button",onClick:function(){return c(t.username)}})}),Object(B.jsx)(X.a,{title:"Block user",placement:"top",children:Object(B.jsx)(_e.a,{className:"button",color:"secondary",onClick:function(){return n(t.username)}})}),Object(B.jsx)(X.a,{title:"Unfollow",placement:"top",children:Object(B.jsx)(Ue.a,{className:"button",onClick:function(){return a(t.username)}})})]}),Object(B.jsx)("div",{className:"followerContainer",children:Object(B.jsx)("div",{className:"myimgContainer",children:Object(B.jsx)("img",{className:"myimg",src:"/viewFile/".concat(t.profile_picture),alt:""})})}),Object(B.jsx)("div",{className:"text",children:t.username})]})}function Ae(){var e=Object(i.g)(),t=Object(J.getCurrentUsername)(),n=Object(c.useState)([]),a=Object(l.a)(n,2),o=a[0],r=a[1];Object(c.useEffect)((function(){O(t).then((function(e){r(e.data.friends)}))}),[]);var s=function(e){p(t,e).then((function(e){console.log(e.message),O(t).then((function(e){r(e.data.friends)}))}))},d=function(e){(function(e,t){var n="/api/unfollow/".concat(e);return u()({method:"PUT",url:n,data:{follower:t}})})(t,e).then((function(e){console.log(e.message),O(t).then((function(e){r(e.data.friends)}))}))},j=function(t){console.log(t),localStorage.setItem("receiver",JSON.stringify(t)),e.push("/message")},b=o.map((function(e){return Object(B.jsx)(Me,{info:e,handleMessage:j,handleB:s,handleU:d})}));return Object(B.jsxs)("div",{className:"box-container",children:[Object(B.jsx)("div",{className:"buttonFollowers",children:Object(B.jsx)(te,{secondary:"friends",title:"All friends",secondTitle:"All friends",getFunction:O,Icon:Ue.a,handle:d,iconText:"Unfollow"})}),Object(B.jsx)("div",{className:"title",children:"Friends"}),Object(B.jsx)("br",{}),Object(B.jsx)("div",{className:"box",children:Object(B.jsx)("div",{className:"containers",children:b})})]})}var Ve=n(15),We=n.n(Ve),Je=n(28),Ge=n(70),ze=n.n(Ge),He=n(101),Ze=n.n(He),Ye=n(67),$e=n.n(Ye),qe=n(68),Ke=n.n(qe),Qe=n(69),Xe=n.n(Qe),et=(n(143),n(196)),tt=n.n(et),nt=n(195),ct=n.n(nt);n(247);function at(e){var t=e.id,n=e.handleComment,a=Object(c.useState)(""),o=Object(l.a)(a,2),r=o[0],s=o[1],i=Object(c.useState)(255),d=Object(l.a)(i,2),u=d[0],j=d[1];return Object(B.jsxs)("div",{className:"comment_box",children:[Object(B.jsx)("div",{className:"commentInpCtn",children:Object(B.jsx)(R.a,{id:"".concat(t),label:"Comment on post",multiline:!0,rowsMax:4,helperText:"".concat(u," remaining chars"),variant:"outlined",inputProps:{maxLength:255},onChange:function(e){return function(e){if(e.target.value.length>=0){var t=255-e.target.value.length;j(t),s(e.target.value),console.log(r)}}(e)},fullWidth:!0})}),Object(B.jsx)("div",{className:"commentBtnCtn",children:Object(B.jsx)("button",{onClick:function(){return n(r)},id:"commentButton",type:"button",children:" Comment"})})]})}n(144);var ot=n(408);function rt(e){var t=e.id,n=e.content,o=e.updatePost,r=n,s=a.a.useState(!1),i=Object(l.a)(s,2),d=i[0],u=i[1],j=Object(c.useState)(255),b=Object(l.a)(j,2),m=b[0],h=b[1],f=Object(c.useState)(""),O=Object(l.a)(f,2),p=O[0],g=O[1],x=function(){u(!1)};return Object(B.jsxs)("div",{children:[Object(B.jsx)("button",{onClick:function(){u(!0)},id:"editBtn",type:"button",children:"Edit"}),Object(B.jsxs)(M.a,{open:d,onClose:x,"aria-labelledby":"form-dialog-title",children:[Object(B.jsx)(W.a,{id:"form-dialog-title",children:"Subscribe"}),Object(B.jsxs)(V.a,{children:[Object(B.jsx)(ot.a,{children:"Changes will be made once you post them!"}),Object(B.jsx)(R.a,{autoFocus:!0,margin:"dense",id:"name".concat(t),label:"Edit post",type:"email",multiline:!0,fullWidth:!0,helperText:"".concat(m," remaining chars"),defaultValue:r,inputProps:{maxLength:255},onChange:function(e){return function(e){g(e.target.value),h(255-e.target.value.length)}(e)}})]}),Object(B.jsxs)(A.a,{children:[Object(B.jsx)(z.a,{style:{color:"green"},onClick:x,color:"primary",children:"Cancel"}),Object(B.jsx)(z.a,{style:{color:"green"},onClick:function(){return o(p),void u(!1)},color:"primary",children:"Post changes"})]})]})]})}function st(e){var t=e.data,n=e.handleDeleteComment,a=Object(c.useState)(""),o=Object(l.a)(a,2),r=o[0],s=o[1],i=Object(c.useState)(t.content),d=Object(l.a)(i,2),j=d[0],b=d[1],m=Object(J.getCurrentUsername)(),h=t.user===m,f=function(){var e=Object(Je.a)(We.a.mark((function e(){return We.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(t.user).then((function(e){s(e.data.avatar[0].profile_picture)})).catch((function(e){console.log(e.message)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){f()}),[]),Object(B.jsxs)("div",{className:"comment_cont",stlye:{height:"200px",width:"100px",backgroundColor:"red"},children:[Object(B.jsxs)("div",{className:"comment_header",children:[Object(B.jsx)("div",{className:"header_profile",children:Object(B.jsx)("img",{id:"comment_picture",src:"/viewFile/".concat(r),alt:""})}),Object(B.jsx)("div",{className:"header_name",children:Object(B.jsx)("span",{id:"cmnt_username",children:t.user})})]}),Object(B.jsxs)("div",{className:"cmnt_cntBtn_box",style:{width:"fit-content"},children:[Object(B.jsx)("div",{className:"cmnt_cnt_box",children:Object(B.jsx)("span",{id:"cmnt_cnt",children:j})}),Object(B.jsxs)("div",{className:"cmnt_btns_box",children:[Object(B.jsx)("div",{style:{display:h?"block":"none"},className:"cmnt_EditBtn_box",children:Object(B.jsx)(rt,{id:t.comm_id,updatePost:function(e){""!==e&&(b(e),function(e,t){return u()({method:"PUT",url:"/api/tweet/comment/update/".concat(e),data:{content:t}})}(t.comm_id,e).then((function(e){console.log(e.message)})).catch((function(e){return console.log(e.message)})))},content:j})}),Object(B.jsx)("div",{style:{display:h?"block":"none"},className:"cmnt_EditBtn_box",children:Object(B.jsx)("button",{onClick:function(){return n(t.comm_id)},id:"deleteBtn",type:"button",children:"Delete"})})]})]})]})}var it=n(6),lt=n(193),dt=n.n(lt),ut=n(194),jt=n.n(ut),bt=Object(it.a)((function(e){return{root:{margin:0,padding:e.spacing(2)},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}}}))((function(e){var t=e.children,n=e.classes,c=e.onClose;return Object(B.jsxs)(W.a,{disableTypography:!0,className:n.root,children:[Object(B.jsx)(ie.a,{variant:"h6",children:t}),c?Object(B.jsx)(se.a,{"aria-label":"close",className:n.closeButton,onClick:c,children:Object(B.jsx)(dt.a,{})}):null]})})),mt=Object(it.a)((function(e){return{root:{padding:e.spacing(2)}}}))(V.a),ht=Object(it.a)((function(e){return{root:{margin:0,padding:e.spacing(1)}}}))(A.a);function ft(e){var t=e.tweetId,n=Object(c.useState)([]),o=Object(l.a)(n,2),r=o[0],s=o[1],i=Object(c.useState)([]),d=Object(l.a)(i,2),u=d[0],j=d[1],b=a.a.useState(!1),m=Object(l.a)(b,2),h=m[0],f=m[1],O=function(){var e=Object(Je.a)(We.a.mark((function e(){return We.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w(t).then((function(e){var t=e.data.comments;console.log(t),j(t.map((function(e){return e.user}))),console.log(u)})).catch((function(e){return console.log(e.message)}));case 2:return e.next=4,I(t).then((function(e){s(e.data.hiders.map((function(e){return e.user})))})).catch((function(e){return console.log(e.message)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=function(){f(!1)};return Object(c.useEffect)((function(){O()}),[]),Object(c.useEffect)((function(){}),[r,u,h]),Object(B.jsxs)("div",{children:[Object(B.jsxs)("div",{children:[Object(B.jsx)(se.a,{onClick:function(){f(!0)},style:{borderRadius:"50%",padding:"3"},children:Object(B.jsx)(jt.a,{})}),Object(B.jsx)("span",{id:"analytics_btn",style:{color:"#0C8367"},children:"Analytics"})]}),Object(B.jsxs)(M.a,{onClose:p,"aria-labelledby":"customized-dialog-title",open:h,children:[Object(B.jsx)(bt,{id:"customized-dialog-title",onClose:p,children:"Tweet analytics"}),Object(B.jsx)(mt,{dividers:!0,children:Object(B.jsxs)("div",{style:{display:"flex",minWidth:"100px"},children:[Object(B.jsxs)("div",{className:"commentors",children:[Object(B.jsx)("span",{children:"Commentors"}),Object(B.jsx)("ol",{style:{title:"commentors"},children:u.map((function(e){return Object(B.jsx)("li",{children:e})}))})]}),Object(B.jsxs)("div",{style:{borderRadius:"8px",backgroundColor:"#D0EAE4"},className:"hiders",children:[Object(B.jsx)("div",{style:{margin:"auto"},children:Object(B.jsx)("span",{children:"Hiders"})}),Object(B.jsx)("ol",{children:r.map((function(e){return Object(B.jsxs)("li",{children:[e," "]},e)}))})]})]})}),Object(B.jsx)(ht,{})]})]})}var Ot=n(89);function pt(e){var t=e.data,n=e.handleDelete,a=Object(J.getCurrentUsername)(),o=Object(c.useState)(!1),r=Object(l.a)(o,2),s=r[0],i=r[1],d=Object(c.useState)(t.tweet_likes),j=Object(l.a)(d,2),b=j[0],m=j[1],h=Object(c.useState)(t.tweet_comments),f=Object(l.a)(h,2),O=f[0],p=f[1],g=Object(c.useState)(t.tweet_id),v=Object(l.a)(g,1)[0],y=Object(c.useState)(t.tweet_blocks),N=Object(l.a)(y,2),S=(N[0],N[1],Object(c.useState)(t.user===a)),E=Object(l.a)(S,1)[0],_=Object(c.useState)(""),P=Object(l.a)(_,2),T=P[0],F=P[1],U=Object(c.useState)("picture"===t.type),D=Object(l.a)(U,1)[0],L=Object(c.useState)("video"===t.type),R=Object(l.a)(L,1)[0],M=Object(c.useState)("song"===t.type),A=Object(l.a)(M,1)[0],V=Object(c.useState)(!1),W=Object(l.a)(V,2),G=W[0],z=W[1],H=Object(c.useState)([]),Z=Object(l.a)(H,2),Y=Z[0],$=(Z[1],Object(c.useState)("undefined"!==typeof t.content)),q=(Object(l.a)($,1)[0],Object(c.useState)([])),K=Object(l.a)(q,2),Q=K[0],ee=K[1],te=function(e,t){var n=(new Date).toISOString(),c={comment_id:Ot("".concat(e).concat(a).concat(n)),tweet_id:t,user:a,content:e,timestamp:n};Q.unshift(c),function(e){return u()({method:"POST",url:"/api/comment/add/".concat(e.user),data:{commentId:e.comment_id,tweetId:e.tweet_id,content:e.content,timestamp:e.timestamp}})}(c).then((function(e){console.log(e.message),function(e,t){return u()({method:"PUT",url:"/api/tweet/comments/".concat(e),data:{comments:t}})}(v,O+1).then((function(e){console.log(e.message),p(O+1)})).catch((function(e){return console.log(e.message)}))})).catch((function(e){return console.log(e.message)}))},ne=function(){var e=Object(Je.a)(We.a.mark((function e(){return We.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(t.user).then((function(e){F(e.data.avatar[0].profile_picture)})).catch((function(e){console.log(e.message)}));case 2:return e.next=4,k(a,t.tweet_id).then((function(e){e.data.bool.length?i(!0):i(!1)})).catch((function(e){console.log(e.message)}));case 4:return e.next=6,w(t.tweet_id).then((function(e){var t=e.data.comments;ee(t)})).catch((function(e){return console.log(e.message)}));case 6:return e.next=8,I(v).then((function(e){console.log(e.data)})).catch((function(e){return console.log(e.message)}));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ce=function(e){var t,n=Q.filter((function(t){return t.comm_id!==e}));ee(n),(t=e,u()({method:"DELETE",url:"/api/tweet/comment/delete/".concat(t)})).then((function(e){console.log(e),p(O-1)})).catch((function(e){return console.log(e.message)}))};Object(c.useEffect)((function(){}),[Y]),Object(c.useEffect)((function(){ne()}),[]);var ae,oe=t.tweet_date.split("T")[0],re="/viewFile/".concat(T),ie="/viewFile/".concat(t.content);return ae=D?Object(B.jsx)("img",{className:"tweet_image",id:"tweet_media_picture",src:ie,alt:""}):R?Object(B.jsxs)("video",{className:"tweet_video",controls:!0,children:[" ",Object(B.jsx)("source",{src:ie})]}):A?Object(B.jsx)("audio",{controls:!0,children:Object(B.jsx)("source",{src:ie})}):t.content,Object(B.jsxs)("div",{id:"container_tweet",children:[Object(B.jsxs)("div",{className:"tweet_header",children:[Object(B.jsx)("div",{className:"tweet_img",children:Object(B.jsx)("img",{className:"tweet_header",id:"tweet_author_picture",src:re,alt:""})}),Object(B.jsxs)("div",{className:"tweet_text",children:[Object(B.jsx)("span",{style:{fontSize:"13px",fontWeight:"bold"},id:"author_username",children:t.user}),Object(B.jsx)("span",{style:{fontSize:"10px"},id:"date",children:oe})]})]}),Object(B.jsx)("div",{id:"menu",children:Object(B.jsx)(X.a,{title:E?"Delete post":"Hide post",placement:"top",children:Object(B.jsx)(se.a,{style:{borderRadius:"50%",padding:"3",color:"#0C8367"},onClick:function(){return n(v,E)},children:Object(B.jsx)(ct.a,{id:t.tweet_id})})})}),Object(B.jsx)(Ne.a,{variant:"middle"}),Object(B.jsx)("div",{className:"tweet_content",children:Object(B.jsx)("p",{style:{textAlign:"left"},children:ae})}),Object(B.jsx)(Ne.a,{variant:"middle"}),Object(B.jsx)("div",{className:"comment",children:Object(B.jsx)(at,{handleComment:function(e,t){""!==e&&te(e,v)}})}),Object(B.jsxs)("div",{style:{borderRadius:"8px",minHeight:"200px",backgroundColor:"#eaf1ef",overflow:"auto",margin:"auto",width:"90%",marginTop:"2%",height:G?"300px":"200px"},children:[Object(B.jsx)("div",{style:{margin:"auto",textAlign:"center",fontWeight:"bold",color:"#0C8367"},children:Object(B.jsx)("span",{children:0!==O?"".concat(O," comments"):"Comments"})}),Object(B.jsx)("div",{style:{margin:"auto",width:"90%",height:"100%"},children:Object(B.jsx)("ul",{id:"list".concat(v),style:{whiteSpace:"nowrap",listStyleType:"none"},children:Q.map((function(e){return Object(B.jsx)("li",{style:{marginBottom:"35px"},children:Object(B.jsx)(st,{data:e,handleDeleteComment:ce})},e.comm_id)}))})})]}),Object(B.jsxs)("div",{className:"tweet_bottom",children:[Object(B.jsxs)("div",{className:"likes",children:[Object(B.jsx)(se.a,{onClick:function(){s?function(e,t){var n="/api/tweet/unlike/".concat(e,"/");return u()({method:"PUT",url:n,data:{tweetid:t}})}(a,v).then((function(e){200===e.status&&C(v,b-1).then((function(e){console.log(e.message),m(b-1)})).catch((function(e){console.log(e.message)}))})).catch((function(e){console.log(e.message)})):function(e,t){var n="/api/tweet/like/".concat(e,"/");return u()({method:"POST",url:n,data:{tweetid:t}})}(a,v).then((function(e){C(v,b+1).then((function(e){console.log(e),m(b+1)})).catch((function(e){console.log(e.message)}))})).catch((function(e){console.log(e.message)})),i(!s)},style:{borderRadius:"50%",padding:"3",color:s?"red":"black"},children:Object(B.jsx)(tt.a,{})}),Object(B.jsx)("span",{style:{color:"#0C8367"},children:"".concat(b," likes")})]}),Object(B.jsx)("div",{style:{display:E?"block":"none"},className:"analytics",children:Object(B.jsx)(ft,{tweetId:t.tweet_id})}),Object(B.jsx)("div",{className:"comments",children:Object(B.jsx)("button",{onClick:function(){z(!G)},id:"viewCommentsBtn",type:"button",children:G?"View less":"View more"})})]})]})}n(105),n(106);var gt=Object(K.a)((function(e){return{button:{margin:e.spacing(1)}}})),xt=n(89);function vt(){var e=Object(i.g)(),t=Object(c.useState)(new Map),n=Object(l.a)(t,1)[0],a=Object(c.useState)(!1),o=Object(l.a)(a,2),r=o[0],s=o[1],d=Object(c.useState)(255),u=Object(l.a)(d,2),j=u[0],b=u[1],h=Object(c.useState)(new Set),f=Object(l.a)(h,1)[0],O=gt(),p=Object(J.getCurrentUsername)(),g=function(e,t){t?N(e).then((function(t){window.location.reload(),console.log("message: delete:",t.message),s(!0),console.log("deleted:",f.delete(n.get(e))),n.delete(e)})).catch((function(e){console.log(e.message)})):S(e,p).then((function(t){window.location.reload(),f.delete(n.get(e)),n.delete(e),s(!0)})).catch((function(e){return console.log(e)}))};Object(c.useEffect)((function(){console.log("refreshed"),s(!1)}),[r]);var x=function(){var e=Object(Je.a)(We.a.mark((function e(){return We.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m(p).then((function(e){e.data.tweets.forEach((function(e){var t=Object(B.jsx)("div",{className:"tContainer",children:Object(B.jsx)(pt,{handleDelete:g,data:e})});f.add(t),n.set(e.tweet_id,t)})),s(!0)})).catch((function(e){return console.log(e)}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){x()}),[]);return Object(B.jsxs)("div",{className:"container_center",children:[Object(B.jsxs)("div",{style:{backgroundColor:"white",height:"fit-content",borderRadius:"8px"},className:"whatIsOn",children:[Object(B.jsx)("div",{style:{width:"90%",paddingTop:"4px",margin:"auto"},children:Object(B.jsx)(R.a,{multiline:!0,id:"tweet",label:"what's on your mind!!",variant:"outlined",helperText:"".concat(j," remaining chars"),inputProps:{maxLength:255},onChange:function(e){return function(e){if(e.target.value.length>=0){var t=255-e.target.value.length;b(t)}}(e)},fullWidth:!0})}),Object(B.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"8px"},className:"buttons",children:[Object(B.jsx)(z.a,{variant:"contained",color:"secondary",className:O.button,onClick:function(){e.push("/videochat")},startIcon:Object(B.jsx)(Ze.a,{}),children:"Go live"}),Object(B.jsx)(z.a,{variant:"contained",color:"secondary",id:"button-media",className:O.button,startIcon:Object(B.jsx)($e.a,{}),onClick:function(){document.getElementById("fileInputPicture").click()},children:"Photo"}),Object(B.jsx)(z.a,{variant:"contained",color:"secondary",id:"button-media",className:O.button,startIcon:Object(B.jsx)(Ke.a,{}),onClick:function(){document.getElementById("fileInputVideo").click()},children:"Video"}),Object(B.jsx)(z.a,{variant:"contained",color:"secondary",id:"button-media",className:O.button,startIcon:Object(B.jsx)(Xe.a,{}),onClick:function(){document.getElementById("fileInputSong").click()},children:"Song"}),Object(B.jsx)(z.a,{variant:"contained",color:"secondary",className:O.button,startIcon:Object(B.jsx)(ze.a,{}),onClick:function(){b(255);var e=document.getElementById("tweet").value;if("undefined"!==typeof e&&0!==e.length){var t=(new Date).toISOString(),n=xt("".concat(e).concat(p).concat(t));v({user:p,tweet_id:n,type:"text",content:e,tweet_date:t,tweet_likes:0}).then((function(e){console.log(e.message),window.location.reload()})).catch((function(e){console.log(e.message)}))}},children:"Create post"}),Object(B.jsx)("input",{className:"FileUpload",accept:".jpg,.png,.gif",id:"fileInputPicture",type:"file",onChange:function(e){var t=new FormData,n=document.getElementById("fileInputPicture").value;t.append("image",e.target.files[0],n);var c={method:"POST",body:t,redirect:"follow"},a=document.getElementById("tweet").value;if("undefined"!==typeof a){var o=(new Date).toISOString(),r=xt("".concat(a).concat(p).concat(o));fetch("/uploadFile",c).then((function(e){return e.text()})).then((function(e){v({user:p,tweet_id:r,type:"picture",content:JSON.parse(e).data,tweet_date:o,tweet_likes:0}).then((function(e){console.log(e.message),window.location.reload()})).catch((function(e){console.log(e.message)}))})).catch((function(e){console.log(e)}))}},hidden:!0}),Object(B.jsx)("input",{className:"FileUpload",id:"fileInputVideo",type:"file",onChange:function(e){var t=new FormData,n=document.getElementById("fileInputVideo").value;t.append("image",e.target.files[0],n);var c={method:"POST",body:t,redirect:"follow"},a=document.getElementById("tweet").value;if("undefined"!==typeof a){var o=(new Date).toISOString(),r=xt("".concat(a).concat(p).concat(o));fetch("/uploadFile",c).then((function(e){return e.text()})).then((function(e){v({user:p,tweet_id:r,type:"video",content:JSON.parse(e).data,tweet_date:o,tweet_likes:0}).then((function(e){console.log(e.message),window.location.reload()})).catch((function(e){console.log(e.message)}))})).catch((function(e){console.log(e)}))}},hidden:!0}),Object(B.jsx)("input",{className:"FileUpload",id:"fileInputSong",type:"file",onChange:function(e){var t=new FormData,n=document.getElementById("fileInputSong").value;t.append("image",e.target.files[0],n);var c={method:"POST",body:t,redirect:"follow"},a=document.getElementById("tweet").value;if("undefined"!==typeof a){var o=(new Date).toISOString(),r=xt("".concat(a).concat(p).concat(o));fetch("/uploadFile",c).then((function(e){return e.text()})).then((function(e){v({user:p,tweet_id:r,type:"song",content:JSON.parse(e).data,tweet_date:o,tweet_likes:0}).then((function(e){window.location.reload(),console.log(e.message)})).catch((function(e){console.log(e.message)}))})).catch((function(e){console.log(e)}))}},hidden:!0})]})]}),Object(B.jsx)("div",{children:f})]})}n(248);function wt(){var e=Object(J.getCurrentUsername)(),t=Object(c.useState)([{}]),n=Object(l.a)(t,2),a=n[0],o=n[1],r=Object(c.useState)(new Set),s=Object(l.a)(r,2),i=s[0],d=s[1],u=Object(c.useState)(!1),m=Object(l.a)(u,2),f=m[0],O=m[1],p=Object(c.useState)(0),g=Object(l.a)(p,2),x=g[0],v=g[1];Object(c.useEffect)((function(){h(e).then((function(e){console.log(e.data.data[0]),o(e.data.data[0]);var t=new Set(e.data.interests.map((function(e){return e.interest})));d(t)})).catch((function(e){console.log(e.message)})),O(!0)}),[]);return f?Object(B.jsx)("div",{className:"profile",children:Object(B.jsxs)("div",{style:{width:"98%",margin:"auto"},children:[Object(B.jsxs)("div",{style:{position:"relative",top:"0px"},className:"rest",children:[Object(B.jsx)(ye,{}),Object(B.jsx)(ne,{data:a,user:e})]}),Object(B.jsxs)("div",{className:"all_boxes",children:[Object(B.jsxs)("div",{className:"left-boxes",children:[Object(B.jsx)("div",{className:"left-Displayer",children:Object(B.jsx)(Ce,{interests:i,addInterest:function(t){d([].concat(Object(U.a)(i),[t])),v(Math.floor(1e9*Math.random())),j(t,e)},deleteInterest:function(t){var n=i;n.delete(t),d(n),v(Math.floor(1e9*Math.random())),b(t,e)}},x)}),Object(B.jsx)("div",{className:"left-friends",children:Object(B.jsx)(Ae,{})}),Object(B.jsx)("div",{className:"left-followers",children:Object(B.jsx)(Be,{})})]}),Object(B.jsx)("div",{className:"right_boxes",children:Object(B.jsx)(vt,{})})]})]})}):Object(B.jsx)("div",{})}function yt(){var e=Object(i.g)(),t=Object(c.useState)(""),n=Object(l.a)(t,2),a=n[0],o=n[1],r=Object(c.useState)(""),d=Object(l.a)(r,2),j=d[0],b=d[1],m=Object(c.useState)(0),h=Object(l.a)(m,2),f=h[0],O=h[1],p=Object(c.useState)(""),g=Object(l.a)(p,2),x=g[0],v=g[1],w=Object(c.useState)(!1),y=Object(l.a)(w,1)[0];u.a.defaults.withCredentials=!0,Object(c.useEffect)((function(){return O(f)}),[f]),Object(c.useEffect)((function(){return console.log("changed dateUserLastLockedOut ".concat(x))}),[x]),Object(c.useEffect)((function(){return console.log("changed isLockedOut ".concat(y))}),[y]);return Object(B.jsx)("div",{className:"card shadow mx-auto mt-5",style:{width:"30rem"},children:Object(B.jsx)("div",{className:"container mx-1",children:Object(B.jsxs)("div",{className:"card-body p-xs",children:[Object(B.jsx)("h2",{className:"card-title text-center font-weight-bold",children:"Log In"}),Object(B.jsxs)("div",{className:"form-group",children:[Object(B.jsx)("label",{children:"Username:"}),Object(B.jsx)("input",{id:"new-username-form",placeholder:"Enter Username",className:"form-control",onChange:function(e){return o(e.target.value)}})]}),Object(B.jsxs)("div",{className:"form-group",children:[Object(B.jsx)("label",{children:"Password:"}),Object(B.jsx)("input",{id:"new-password-form",type:"password",placeholder:"Enter Password",className:"form-control",onChange:function(e){return b(e.target.value)}})]}),Object(B.jsxs)("p",{children:["Forgot Password?\xa0",Object(B.jsx)(s.b,{to:"/resetPassword",children:"Click here to reset!"})]}),Object(B.jsx)("div",{className:"form-group text-center",children:Object(B.jsx)("button",{type:"submit",className:"btn btn-primary w-100",onClick:function(){o(a),function(e,t){return u()({method:"POST",url:"/api/login",data:{username:e,password:t}})}(a,j).then((function(t){localStorage.setItem("username",JSON.stringify(a)),function(e,t){var n="/api/profile/reactivate/".concat(e);return u()({method:"PUT",url:n,data:{password:t}})}(a,j).then((function(){})).catch((function(e){console.log(e)})),function(e){return u()({method:"GET",url:"/api/numberFailedLogins/".concat(e)})}(a).then((function(n){if(console.log("resOne.data.message",n.data.message),"200"==n.data.message){var c,o=[Array.from(n.data.data)[0].number_failed_logins];O(c=o[0]),function(e){return u()({method:"GET",url:"/api/dateUserLastLockedOut/".concat(e)})}(a).then((function(n){var o,r=[Array.from(n.data.data)[0].date_last_locked_out];if(v(o=r[0]),c>3){y=!0;var s=new Date(o);new Date-s>36e5&&(y=!1,E(a,0).catch((function(e){console.log(e)})))}if(!1===y)if(t.data.message){3===parseInt(c,10)&&function(e){u()({method:"POST",url:"/api/setLockOutTime",data:{username:e}})}(a);var i=parseInt(c,10)+1;alert("Wrong Password! You have ".concat(3-i," attempts left before you get locked out")),E(a,i).catch((function(e){console.log(e)})),alert(t.data.message),e.push("/login"),document.getElementById("new-username-form").value="",document.getElementById("new-password-form").value=""}else E(a,0).catch((function(e){console.log(e)})),e.push("/home");else alert("your account has been locked because to too many incorrect attempts, please try back in an hour"),e.push("/login"),document.getElementById("new-username-form").value="",document.getElementById("new-password-form").value=""})).catch((function(e){console.log(e)}))}else alert("Username Not Found"),e.push("/login"),document.getElementById("new-username-form").value="",document.getElementById("new-password-form").value=""})).catch((function(e){console.log(e),alert("Username Not Found"),document.getElementById("new-username-form").value="",document.getElementById("new-password-form").value=""}))}))},children:"Log In"})}),Object(B.jsxs)("p",{children:["Don't have an account?\xa0",Object(B.jsx)(s.b,{to:"/registration",children:"Sign Up!"})]})]})})})}n(145);var Nt=Object(K.a)((function(e){return{button:{margin:e.spacing(1)}}})),St=n(89);function Ct(){var e=Object(i.g)(),t=Object(c.useState)(new Map),n=Object(l.a)(t,1)[0],a=Object(c.useState)(!1),o=Object(l.a)(a,2),r=o[0],s=o[1],d=Object(c.useState)(255),u=Object(l.a)(d,2),j=u[0],b=u[1],h=Object(c.useState)(new Set),f=Object(l.a)(h,1)[0],O=Nt(),p=Object(J.getCurrentUsername)(),g=function(e,t){t?N(e).then((function(t){window.location.reload(),console.log("message: delete:",t.message),s(!0),n.delete(e)})).catch((function(e){console.log(e.message)})):S(e,p).then((function(t){window.location.reload(),f.delete(n.get(e)),n.delete(e),s(!0)})).catch((function(e){return console.log(e)}))};Object(c.useEffect)((function(){console.log("refreshed"),s(!1)}),[r]);var x=function(){var e=Object(Je.a)(We.a.mark((function e(){return We.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m(p).then((function(e){e.data.tweets.forEach((function(e){var t=Object(B.jsx)("div",{className:"tContainer",children:Object(B.jsx)(pt,{handleDelete:g,data:e})});f.add(t),n.set(e.tweet_id,t)})),s(!0)})).catch((function(e){return console.log(e)}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){x()}),[]);return Object(B.jsxs)("div",{className:"container_center",children:[Object(B.jsxs)("div",{style:{backgroundColor:"white",height:"fit-content",borderRadius:"8px"},className:"whatIsOn",children:[Object(B.jsx)("div",{style:{width:"90%",paddingTop:"4px",margin:"auto"},children:Object(B.jsx)(R.a,{multiline:!0,id:"tweet",label:"what's on your mind!!",variant:"outlined",helperText:"".concat(j," remaining chars"),inputProps:{maxLength:255},onChange:function(e){return function(e){if(e.target.value.length>=0){var t=255-e.target.value.length;b(t)}}(e)},fullWidth:!0})}),Object(B.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"8px"},className:"buttons",children:[Object(B.jsx)(z.a,{variant:"contained",color:"secondary",className:O.button,onClick:function(){e.push("/videochat")},startIcon:Object(B.jsx)(Ze.a,{}),children:"Go live"}),Object(B.jsx)(z.a,{variant:"contained",color:"secondary",id:"button-media",className:O.button,startIcon:Object(B.jsx)($e.a,{}),onClick:function(){document.getElementById("fileInputPicture").click()},children:"Photo"}),Object(B.jsx)(z.a,{variant:"contained",color:"secondary",id:"button-media",className:O.button,startIcon:Object(B.jsx)(Ke.a,{}),onClick:function(){document.getElementById("fileInputVideo").click()},children:"Video"}),Object(B.jsx)(z.a,{variant:"contained",color:"secondary",id:"button-media",className:O.button,startIcon:Object(B.jsx)(Xe.a,{}),onClick:function(){document.getElementById("fileInputSong").click()},children:"Song"}),Object(B.jsx)(z.a,{variant:"contained",color:"secondary",className:O.button,startIcon:Object(B.jsx)(ze.a,{}),onClick:function(){b(255);var e=document.getElementById("tweet").value;if("undefined"!==typeof e&&0!==e.length){var t=(new Date).toISOString(),n=St("".concat(e).concat(p).concat(t));v({user:p,tweet_id:n,type:"text",content:e,tweet_date:t,tweet_likes:0}).then((function(e){console.log(e.message),window.location.reload()})).catch((function(e){console.log(e.message)}))}},children:"Create post"}),Object(B.jsx)("input",{className:"FileUpload",accept:".jpg,.png,.gif",id:"fileInputPicture",type:"file",onChange:function(e){var t=new FormData,n=document.getElementById("fileInputPicture").value;t.append("image",e.target.files[0],n);var c={method:"POST",body:t,redirect:"follow"},a=document.getElementById("tweet").value;if("undefined"!==typeof a){var o=(new Date).toISOString(),r=St("".concat(a).concat(p).concat(o));fetch("/uploadFile",c).then((function(e){return e.text()})).then((function(e){v({user:p,tweet_id:r,type:"picture",content:JSON.parse(e).data,tweet_date:o,tweet_likes:0}).then((function(e){console.log(e.message),window.location.reload()})).catch((function(e){console.log(e.message)}))})).catch((function(e){console.log(e)}))}},hidden:!0}),Object(B.jsx)("input",{className:"FileUpload",id:"fileInputVideo",type:"file",onChange:function(e){var t=new FormData,n=document.getElementById("fileInputVideo").value;t.append("image",e.target.files[0],n);var c={method:"POST",body:t,redirect:"follow"},a=document.getElementById("tweet").value;if("undefined"!==typeof a){var o=(new Date).toISOString(),r=St("".concat(a).concat(p).concat(o));fetch("/uploadFile",c).then((function(e){return e.text()})).then((function(e){v({user:p,tweet_id:r,type:"video",content:JSON.parse(e).data,tweet_date:o,tweet_likes:0}).then((function(e){console.log(e.message),window.location.reload()})).catch((function(e){console.log(e.message)}))})).catch((function(e){console.log(e)}))}},hidden:!0}),Object(B.jsx)("input",{className:"FileUpload",id:"fileInputSong",type:"file",onChange:function(e){var t=new FormData,n=document.getElementById("fileInputSong").value;t.append("image",e.target.files[0],n);var c={method:"POST",body:t,redirect:"follow"},a=document.getElementById("tweet").value;if("undefined"!==typeof a){var o=(new Date).toISOString(),r=St("".concat(a).concat(p).concat(o));fetch("/uploadFile",c).then((function(e){return e.text()})).then((function(e){v({user:p,tweet_id:r,type:"song",content:JSON.parse(e).data,tweet_date:o,tweet_likes:0}).then((function(e){window.location.reload(),console.log(e.message)})).catch((function(e){console.log(e.message)}))})).catch((function(e){console.log(e)}))}},hidden:!0})]})]}),Object(B.jsx)("div",{children:f})]})}n(249);function kt(){var e=Object(i.g)(),t=Object(c.useState)(""),n=Object(l.a)(t,2),a=n[0],o=n[1],r=Object(J.getCurrentUsername)();return Object(c.useEffect)((function(){x(r).then((function(e){o(e.data.avatar[0].profile_picture)})).catch((function(e){console.log(e.message)}))}),[]),Object(c.useEffect)((function(){}),[a]),Object(B.jsx)(s.a,{children:Object(B.jsx)("div",{className:"sidebar",children:Object(B.jsx)("button",{className:"button_profile",onClick:function(){e.push("/profile")},type:"button",children:Object(B.jsxs)("div",{className:"header_box",children:[Object(B.jsx)("div",{className:"img_box",children:Object(B.jsx)("img",{id:"img",alt:"",src:"/viewfile/".concat(a)})}),Object(B.jsx)("div",{className:"username_box",children:Object(B.jsx)("span",{className:"user",children:r})})]})})})})}var It=n(412),Et=(n(250),Object(K.a)((function(e){return{root:{left:"25px",width:"100%",maxWidth:360,backgroundColor:e.palette.background.paper},search:Object(ce.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(ae.b)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(ae.b)(e.palette.common.white,.25)},marginRight:e.spacing(2),marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(3),width:"100%"}),searchIcon:{padding:e.spacing(0,2),eight:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:Object(ce.a)({padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),transition:e.transitions.create("width"),width:"30%"},e.breakpoints.up("md"),{width:"20ch"})}})));function _t(){var e=Object(J.getCurrentUsername)(),t=Et(),n=Object(c.useState)([]),a=Object(l.a)(n,2),o=a[0],r=a[1],s=Object(c.useState)([]),i=Object(l.a)(s,2),d=i[0],j=i[1],b=function(t){return console.log(t.profile_picture),Object(B.jsxs)(Y.a,{children:[Object(B.jsx)(q.a,{children:Object(B.jsx)(Q.a,{alt:"",src:"/viewFile/".concat(t.profile_picture)})}),Object(B.jsx)($.a,{primary:t.username,secondary:t.followed?"following":"Follow me PLZ :)"}),Object(B.jsx)(X.a,{title:"follow",placement:"top",children:Object(B.jsx)(Ie.a,{className:"button",style:{color:"#0C8367"},onClick:function(){return n=t.username,void y(e,n).then((function(t){console.log(t.message),f(e).then((function(e){console.log(e.data.followers)}))}));var n}})})]})},m=function(t){var n,c;(n=e,c=t.target.value,u()({method:"GET",url:"/api/search/".concat(n,"/").concat(c)})).then((function(n){console.log("input: ".concat(t.target.value," , ").concat(e)),j(n.data.friends),console.log(d.data.friens)})).catch((function(e){console.log(e.message)}))};return Object(c.useEffect)((function(){console.log(d);var e=d.map((function(e){return b(e)}));console.log(o),r(e),0===d.length&&r([])}),[d]),Object(B.jsx)("div",{className:"searchBack",children:Object(B.jsxs)("div",{children:[Object(B.jsxs)("div",{className:t.search,children:[Object(B.jsx)("div",{className:t.searchIcon}),Object(B.jsx)("div",{children:Object(B.jsx)(It.a,{id:"search",placeholder:"Search user\u2026",classes:{root:t.inputRoot,input:t.inputInput},inputProps:{"aria-label":"search"},onChange:function(e){return m(e)}})})]}),Object(B.jsx)("div",{children:Object(B.jsx)(Z.a,{className:t.root,children:o})})]})})}function Pt(){return Object(B.jsxs)("div",{children:[Object(B.jsx)(ye,{}),Object(B.jsxs)("div",{className:"home",children:[Object(B.jsx)("div",{children:Object(B.jsx)(kt,{})}),Object(B.jsx)("div",{children:Object(B.jsx)(Ct,{})}),Object(B.jsx)("div",{className:"searchBack",children:Object(B.jsx)(_t,{})})]})]})}function Tt(){var e=Object(i.g)(),t=Object(J.getCurrentUsername)();console.log("username = ".concat(t));var n=Object(c.useState)(new Set),a=Object(l.a)(n,2),o=a[0],r=a[1],d=Object(c.useState)(0),m=Object(l.a)(d,2),f=m[0],O=m[1];Object(c.useEffect)((function(){h(t).then((function(e){console.log(e.data.data[0]);var t=new Set(e.data.interests.map((function(e){return e.interest})));r(t)})).catch((function(e){console.log(e.message)}))}),[]);return Object(B.jsx)("div",{className:"card shadow mx-auto mt-5",style:{width:"30rem"},children:Object(B.jsx)("div",{className:"container mx-1",children:Object(B.jsxs)("div",{className:"card-body p-xs",children:[Object(B.jsxs)("h2",{className:"card-title text-center font-weight-bold",children:["Hi",Object(B.jsxs)("var",{children:[" ",t]})]}),Object(B.jsxs)("h2",{className:"card-title text-center font-weight-bold",children:[" ",Object(B.jsx)("h2",{className:"card-title text-center font-weight-bold",children:"Please Finish Sign Up"})]}),Object(B.jsxs)("div",{className:"form-group",children:[Object(B.jsx)("div",{className:"col-xs-12 col-sm-6 col-md-6 col-lg-6",children:Object(B.jsx)("img",{src:"/uploadFiles/1620555316674--image.png",alt:"",className:"img-responsive"})}),Object(B.jsx)("label",{htmlFor:"new-username-form",children:"Please Upload Profile Picture:"}),Object(B.jsx)("input",{type:"file",className:"form-control",id:"fileUploadProfilePicture",onChange:function(e){var n=new FormData,c=document.getElementById("fileUploadProfilePicture").value;n.append("image",e.target.files[0],c),fetch("/uploadFile",{method:"POST",body:n,redirect:"follow"}).then((function(e){return e.text()})).then((function(e){return function(e,t){return u()({method:"POST",url:"/api/uploadProfilePicture",data:{username:e,profilePicture:t}})}(t,JSON.parse(e).data).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))})).catch((function(e){alert(e)}))}}),Object(B.jsx)("label",{htmlFor:"new-username-form",children:"Please Add Your Interests:"}),Object(B.jsx)(Ce,{interests:o,addInterest:function(e){r([].concat(Object(U.a)(o),[e])),O(Math.floor(1e9*Math.random())),j(e,t)},deleteInterest:function(e){var n=o;n.delete(e),r(n),O(Math.floor(1e9*Math.random())),b(e,t)}},f),Object(B.jsx)("div",{className:"form-group",children:Object(B.jsx)("button",{type:"submit",className:"btn btn-primary w-100",onClick:function(){alert("Your have successfully signed up"),e.push("/login/")},children:"Complete Registration"})}),Object(B.jsxs)("p",{children:["Already have an account?\xa0",Object(B.jsx)(s.b,{to:"/login",children:"Log in here!"})]})]})]})})})}function Bt(){return Object(B.jsx)("div",{className:"col-xs-12 col-sm-6 col-md-6 col-lg-6",children:Object(B.jsx)("img",{src:"/viewFile/cat1.jpg",alt:"",className:"img-responsive"})})}var Ft=n(197),Ut=n.n(Ft),Dt=function(e){var t=e.username,n=e.roomName,c=e.handleRoomNameChange,a=e.handleSubmit,o=e.connecting;return Object(B.jsx)("form",{onSubmit:a,children:Object(B.jsxs)("div",{children:[Object(B.jsx)(ye,{}),Object(B.jsxs)("div",{className:"home",children:[Object(B.jsx)("div",{style:{}}),Object(B.jsx)("div",{className:"card shadow mx-auto mt-5",style:{width:"30rem"},children:Object(B.jsx)("div",{className:"container mx-1",children:Object(B.jsxs)("div",{className:"card-body p-xs",children:[Object(B.jsx)("h2",{className:"card-title text-center font-weight-bold",children:"Live Stream"}),Object(B.jsxs)("div",{className:"form-group",children:[Object(B.jsx)("h2",{children:"Enter a room"}),Object(B.jsx)("div",{children:Object(B.jsxs)("label",{htmlFor:"name",children:[" ","Hi,"," ",t,", please select a room to start your live stream!"]})}),Object(B.jsx)("label",{htmlFor:"room",children:"Room name:"}),Object(B.jsx)("input",{type:"text",id:"room",placeholder:"Enter Room Name",value:n,onChange:c,readOnly:o,required:!0})]}),Object(B.jsx)("div",{className:"video-group",children:Object(B.jsx)("button",{type:"submit",className:"btn btn-primary w-100",disabled:o,children:o?"Connecting":"Join"})})]})})})]})]})})},Lt=n(198),Rt=n.n(Lt),Mt=function(e){var t=e.participant,n=Object(c.useState)([]),a=Object(l.a)(n,2),o=a[0],r=a[1],s=Object(c.useState)([]),i=Object(l.a)(s,2),d=i[0],u=i[1],j=Object(c.useRef)(),b=Object(c.useRef)(),m=function(e){return Array.from(e.values()).map((function(e){return e.track})).filter((function(e){return null!==e}))};return Object(c.useEffect)((function(){r(m(t.videoTracks)),u(m(t.audioTracks));return t.on("trackSubscribed",(function(e){"video"===e.kind?r((function(t){return[].concat(Object(U.a)(t),[e])})):"audio"===e.kind&&u((function(t){return[].concat(Object(U.a)(t),[e])}))})),t.on("trackUnsubscribed",(function(e){"video"===e.kind?r((function(t){return t.filter((function(t){return t!==e}))})):"audio"===e.kind&&u((function(t){return t.filter((function(t){return t!==e}))}))})),function(){r([]),u([]),t.removeAllListeners()}}),[t]),Object(c.useEffect)((function(){var e=o[0];if(e)return e.attach(j.current),function(){e.detach()}}),[o]),Object(c.useEffect)((function(){var e=d[0];if(e)return e.attach(b.current),function(){e.detach()}}),[d]),Object(B.jsxs)("div",{className:"participant",children:[Object(B.jsx)("h3",{children:t.identity}),Object(B.jsx)("video",{ref:j,autoPlay:!0}),Object(B.jsx)("audio",{ref:b,autoPlay:!0,muted:!0})]})},At=(n(353),function(e){var t=e.roomName,n=e.room,a=e.handleLogout,o=Object(c.useState)([]),r=Object(l.a)(o,2),s=r[0],i=r[1];Object(c.useEffect)((function(){var e=function(e){i((function(t){return[].concat(Object(U.a)(t),[e])}))},t=function(e){i((function(t){return t.filter((function(t){return t!==e}))}))};return n.on("participantConnected",e),n.on("participantDisconnected",t),n.participants.forEach(e),function(){n.off("participantConnected",e),n.off("participantDisconnected",t)}}),[n]);var d=s.map((function(e){return Object(B.jsx)(Mt,{participant:e},e.sid)}));return Object(B.jsxs)("div",{className:"room",children:[Object(B.jsx)(ye,{}),Object(B.jsx)("div",{style:{}}),Object(B.jsxs)("h2",{children:["Live Stream:"," ",t]}),Object(B.jsx)(z.a,{color:"secondary",startIcon:Object(B.jsx)(Rt.a,{}),type:"submit",className:"btn btn-primary w-100",onClick:a,children:"Leave Stream"}),Object(B.jsx)("div",{className:"local-participant",children:n?Object(B.jsx)(Mt,{participant:n.localParticipant},n.localParticipant.sid):""}),Object(B.jsx)("h3",{children:"Remote Participants"}),Object(B.jsx)("div",{className:"remote-participants",children:d})]})}),Vt=function(){var e=Object(c.useState)(""),t=Object(l.a)(e,2),n=t[0],a=t[1],o=Object(c.useState)(null),r=Object(l.a)(o,2),s=r[0],i=r[1],d=Object(c.useState)(!1),u=Object(l.a)(d,2),j=u[0],b=u[1],m=Object(J.getCurrentUsername)(),h=Object(c.useCallback)((function(e){a(e.target.value)}),[]),f=Object(c.useCallback)(function(){var e=Object(Je.a)(We.a.mark((function e(t){var c;return We.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),b(!0),e.next=4,fetch("/video/token",{method:"POST",body:JSON.stringify({identity:m,room:n}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()}));case 4:c=e.sent,Ut.a.connect(c.token,{name:n}).then((function(e){b(!1),i(e)})).catch((function(e){console.error(e),b(!1)}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[n,m]),O=Object(c.useCallback)((function(){i((function(e){return e&&(e.localParticipant.tracks.forEach((function(e){e.track.stop()})),e.disconnect()),null}))}),[]);return Object(c.useEffect)((function(){if(s){var e=function(e){e.persisted||s&&O()};return window.addEventListener("pagehide",e),window.addEventListener("beforeunload",e),function(){window.removeEventListener("pagehide",e),window.removeEventListener("beforeunload",e)}}}),[s,O]),s?Object(B.jsx)(At,{roomName:n,room:s,handleLogout:O}):Object(B.jsx)(Dt,{username:m,roomName:n,handleRoomNameChange:h,handleSubmit:f,connecting:j})};function Wt(){var e=Object(c.useState)(""),t=Object(l.a)(e,2),n=t[0],a=t[1],o=Object(c.useState)(""),r=Object(l.a)(o,2),d=r[0],j=r[1],b=Object(c.useState)(""),m=Object(l.a)(b,2),h=m[0],f=m[1],O=Object(i.g)();return Object(B.jsx)("div",{className:"card shadow mx-auto mt-5",style:{width:"30rem"},children:Object(B.jsx)("div",{className:"container mx-1",children:Object(B.jsxs)("div",{className:"card-body p-xs",children:[Object(B.jsx)("h2",{className:"card-title text-center font-weight-bold",children:"Reset Password"}),Object(B.jsxs)("div",{className:"form-group",children:[Object(B.jsx)("label",{children:"Username:"}),Object(B.jsx)("input",{id:"new-username-form",placeholder:"Enter Username",className:"form-control",onChange:function(e){return a(e.target.value)}})]}),Object(B.jsxs)("div",{className:"form-group",children:[Object(B.jsx)("label",{children:"Password:"}),Object(B.jsx)("input",{id:"new-password-form",type:"password",placeholder:"Enter Password",className:"form-control",onChange:function(e){return j(e.target.value)}})]}),Object(B.jsxs)("div",{className:"form-group",children:[Object(B.jsx)("label",{children:"Confirm Password:"}),Object(B.jsx)("input",{id:"new-password-form",type:"password",placeholder:"Enter Password",className:"form-control",onChange:function(e){return f(e.target.value)}})]}),Object(B.jsx)("div",{className:"form-group text-center",children:Object(B.jsx)("button",{type:"button",className:"btn btn-primary w-100",onClick:function(){return Object(T.isSamePassword)(d,h)?Object(T.isValidPassword)(d)?void(e=n,t=d,u()({method:"PUT",url:"/api/resetPassword",data:{username:e,password:t}})).then((function(){alert("Success! Your Password Has Been Updated"),O.push("/login")})).catch((function(e){console.log(e)})):(alert("Invalid password, password must have a minimum eight characters, at least one uppercase letter, one lowercase letter, one number and one special character"),window.history.replaceState(null,"new page","/resetPassword"),void window.location.reload()):(alert("Passwords do not match, please re-enter"),window.history.replaceState(null,"new page","/resetPassword"),void window.location.reload());var e,t},children:"Submit New Password"})}),Object(B.jsxs)("p",{children:["Changed Your Mind?\xa0",Object(B.jsx)(s.b,{to:"/login",children:"Return To Login!"})]})]})})})}function Jt(e){var t=e.data,n=Object(c.useState)(""),a=Object(l.a)(n,2),o=a[0],r=a[1],s=Object(c.useState)("picture"===t.type),i=Object(l.a)(s,1)[0],d=Object(c.useState)("video"===t.type),u=Object(l.a)(d,1)[0],j=Object(c.useState)("song"===t.type),b=Object(l.a)(j,1)[0],m=function(){var e=Object(Je.a)(We.a.mark((function e(){return We.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(t.user).then((function(e){r(e.data.avatar[0].profile_picture)})).catch((function(e){console.log(e.message)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){m()}),[]);var h,f=t.tweet_date.split("T")[0],O="/viewFile/".concat(o),p="/viewFile/".concat(t.content);return i?h=Object(B.jsx)("img",{className:"tweet_image",id:"tweet_media_picture",src:p,alt:""}):u?h=Object(B.jsxs)("video",{className:"tweet_video",controls:!0,children:[" ",Object(B.jsx)("source",{src:p})]}):b?(console.log("song"),h=Object(B.jsx)("audio",{controls:!0,children:Object(B.jsx)("source",{src:p})})):h=t.content,Object(B.jsxs)("div",{id:"container_tweet",children:[Object(B.jsxs)("div",{className:"tweet_header",children:[Object(B.jsx)("div",{className:"tweet_img",children:Object(B.jsx)("img",{className:"tweet_header",id:"tweet_author_picture",src:O,alt:""})}),Object(B.jsxs)("div",{className:"tweet_text",children:[Object(B.jsx)("span",{style:{fontSize:"13px",fontWeight:"bold"},id:"author_username",children:t.user}),Object(B.jsx)("span",{style:{fontSize:"10px"},id:"date",children:f})]})]}),Object(B.jsx)(Ne.a,{variant:"middle"}),Object(B.jsx)("div",{className:"tweet_content",children:Object(B.jsx)("p",{style:{textAlign:"left"},children:h})}),Object(B.jsx)(Ne.a,{variant:"middle"})]})}var Gt=Object(K.a)((function(e){return{button:{margin:e.spacing(1)}}})),zt=n(89);function Ht(){var e=Object(J.getCurrentReceiver)();console.log("receiver = ".concat(e));var t=Object(c.useState)(new Map),n=Object(l.a)(t,1)[0],a=Object(c.useState)(!1),o=Object(l.a)(a,2),r=o[0],s=o[1],i=Object(c.useState)(255),d=Object(l.a)(i,2),u=d[0],j=d[1],b=Object(c.useState)(new Set),m=Object(l.a)(b,1)[0],h=Gt(),f=Object(J.getCurrentUsername)();Object(c.useEffect)((function(){console.log("refreshed"),s(!1)}),[r]);var O=function(){var t=Object(Je.a)(We.a.mark((function t(){return We.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("Sdfdsf".concat(f),"Sdfdsf".concat(e)),t.next=3,P(f,e).then((function(e){var t=e.data.messages;console.log("Sdfdsf".concat(t)),t.forEach((function(e){var t=Object(B.jsx)("div",{className:"tContainer",children:Object(B.jsx)(Jt,{data:e})});m.add(t),n.set(e.message_id,t)})),s(!0)})).catch((function(e){return console.log(e)}));case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();Object(c.useEffect)((function(){O()}),[]);return console.log("td",m),Object(B.jsxs)("div",{className:"container_center",children:[Object(B.jsxs)("div",{style:{backgroundColor:"white",height:"fit-content",borderRadius:"8px"},className:"whatIsOn",children:[Object(B.jsx)("div",{style:{width:"90%",paddingTop:"4px",margin:"auto"},children:Object(B.jsx)(R.a,{multiline:!0,id:"message",label:"what's on your mind!!",variant:"outlined",helperText:"".concat(u," remaining chars"),inputProps:{maxLength:255},onChange:function(e){return function(e){if(e.target.value.length>=0){var t=255-e.target.value.length;j(t)}}(e)},fullWidth:!0})}),Object(B.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"8px"},className:"buttons",children:[Object(B.jsx)(z.a,{variant:"contained",color:"secondary",id:"button-media",className:h.button,startIcon:Object(B.jsx)($e.a,{}),onClick:function(){document.getElementById("fileInputPicture").click()},children:"Photo"}),Object(B.jsx)(z.a,{variant:"contained",color:"secondary",id:"button-media",className:h.button,startIcon:Object(B.jsx)(Ke.a,{}),onClick:function(){document.getElementById("fileInputVideo").click()},children:"Video"}),Object(B.jsx)(z.a,{variant:"contained",color:"secondary",id:"button-media",className:h.button,startIcon:Object(B.jsx)(Xe.a,{}),onClick:function(){document.getElementById("fileInputSong").click()},children:"Song"}),Object(B.jsx)(z.a,{variant:"contained",color:"secondary",className:h.button,startIcon:Object(B.jsx)(ze.a,{}),onClick:function(){j(255);var t=document.getElementById("message").value;if("undefined"!==typeof t&&0!==t.length){var n=(new Date).toISOString(),c=zt("".concat(t).concat(f).concat(n));_({user:f,message_id:c,type:"text",content:t,message_date:n,receiver:e}).then((function(e){console.log(e.message)})).catch((function(e){console.log(e.message)}))}},children:"Create post"}),Object(B.jsx)("input",{className:"FileUpload",accept:".jpg,.png,.gif",id:"fileInputPicture",type:"file",onChange:function(e){var t=new FormData,n=document.getElementById("fileInputPicture").value;t.append("image",e.target.files[0],n);var c={method:"POST",body:t,redirect:"follow"},a=document.getElementById("message").value;if("undefined"!==typeof a){var o=(new Date).toISOString(),r=zt("".concat(a).concat(f).concat(o));fetch("/uploadFile",c).then((function(e){return e.text()})).then((function(e){_({user:f,message_id:r,type:"picture",content:JSON.parse(e).data,message_date:o}).then((function(e){console.log(e.message)})).catch((function(e){console.log(e.message)}))})).catch((function(e){console.log(e)}))}},hidden:!0}),Object(B.jsx)("input",{className:"FileUpload",id:"fileInputVideo",type:"file",onChange:function(e){var t=new FormData,n=document.getElementById("fileInputVideo").value;t.append("image",e.target.files[0],n);var c={method:"POST",body:t,redirect:"follow"},a=document.getElementById("message").value;if("undefined"!==typeof a){var o=(new Date).toISOString(),r=zt("".concat(a).concat(f).concat(o));fetch("/uploadFile",c).then((function(e){return e.text()})).then((function(e){_({user:f,message_id:r,type:"video",content:JSON.parse(e).data,message_date:o}).then((function(e){console.log(e.message)})).catch((function(e){console.log(e.message)}))})).catch((function(e){console.log(e)}))}},hidden:!0}),Object(B.jsx)("input",{className:"FileUpload",id:"fileInputSong",type:"file",onChange:function(e){var t=new FormData,n=document.getElementById("fileInputSong").value;t.append("image",e.target.files[0],n);var c={method:"POST",body:t,redirect:"follow"},a=document.getElementById("message").value;if("undefined"!==typeof a){var o=(new Date).toISOString(),r=zt("".concat(a).concat(f).concat(o));fetch("/uploadFile",c).then((function(e){return e.text()})).then((function(e){_({user:f,message_id:r,type:"song",content:JSON.parse(e).data,message_date:o}).then((function(e){console.log(e.message)})).catch((function(e){console.log(e.message)}))})).catch((function(e){console.log(e)}))}},hidden:!0})]})]}),Object(B.jsx)("div",{children:m})]})}function Zt(){var e=Object(J.getCurrentReceiver)();return console.log("receiver = ".concat(e)),Object(B.jsxs)("div",{children:[Object(B.jsx)(ye,{}),Object(B.jsx)("div",{className:"home",children:Object(B.jsx)("div",{children:Object(B.jsx)(Ht,{})})})]})}var Yt=function(){return Object(B.jsx)(s.a,{children:Object(B.jsxs)(i.d,{children:[Object(B.jsx)(i.b,{path:"/",exact:!0,render:function(){return Object(B.jsx)(F,{})}}),Object(B.jsx)(i.b,{path:"/registration",exact:!0,render:function(){return Object(B.jsx)(F,{})}}),Object(B.jsx)(i.b,{path:"/login",exact:!0,render:function(){return Object(B.jsx)(yt,{})}}),Object(B.jsx)(i.b,{path:"/signup/",exact:!0,render:function(){return Object(B.jsx)(Tt,{})}}),Object(B.jsx)(i.b,{path:"/home",component:function(){return Object(B.jsx)(Pt,{})}}),Object(B.jsx)(i.b,{path:"/profile",exact:!0,render:function(){return Object(B.jsx)(wt,{})}}),Object(B.jsx)(i.b,{path:"/resetPassword",exact:!0,render:function(){return Object(B.jsx)(Wt,{})}}),Object(B.jsx)(i.b,{path:"/temp",exact:!0,render:function(){return Object(B.jsx)(Bt,{})}}),Object(B.jsx)(i.b,{path:"/videochat",exact:!0,render:function(){return Object(B.jsx)(Vt,{})}}),Object(B.jsx)(i.b,{path:"/message",exact:!0,render:function(){return Object(B.jsx)(Zt,{})}})]})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(Object(B.jsx)(Yt,{}),document.getElementById("react-root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},50:function(e,t){e.exports={isValidPassword:function(e){return new RegExp("^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*])(?=.{8,})").test(e)},isValidUsername:function(e){return new RegExp("^[a-zA-Z0-9_]*$").test(e)},isValidEmail:function(e){return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())},isSamePassword:function(e,t){return e===t}}},58:function(e,t,n){}},[[354,1,2]]]);
//# sourceMappingURL=main.e27eac52.chunk.js.map