(this.webpackJsonpprofile=this.webpackJsonpprofile||[]).push([[0],{10:function(e,t){e.exports={getCurrentUsername:function(){return JSON.parse(localStorage.getItem("username"))},isLogged:function(){return!!JSON.parse(localStorage.getItem("username"))},logout:function(){localStorage.removeItem("username")},getCurrentReceiver:function(){return JSON.parse(localStorage.getItem("receiver"))}}},104:function(e,t,n){},138:function(e,t,n){},139:function(e,t,n){},140:function(e,t,n){},141:function(e,t,n){},213:function(e,t,n){},239:function(e,t,n){},240:function(e,t,n){},243:function(e,t,n){},245:function(e,t,n){},246:function(e,t,n){},247:function(e,t,n){},248:function(e,t,n){},352:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),o=n(15),r=n.n(o),s=(n(213),n(86),n(19)),i=n(18),l=(n(54),n(4)),d=n(8),u=n.n(d);function j(e,t){var n="/api/profile/interest/".concat(t);return u()({method:"POST",url:n,data:{interest:e}})}function b(e,t){var n="/api/profile/delete/interest/".concat(t);return u()({method:"DELETE",url:n,data:{interest:e}})}function m(e){var t="/api/tweets/all/".concat(e);return u()({method:"GET",url:t})}function h(e){var t="/tweets/count/all/".concat(e);return u()({method:"GET",url:t})}function f(e){var t="/api/profile/".concat(e);return u()({method:"GET",url:t})}function O(e){var t="/api/profile/followers/".concat(e);return u()({method:"GET",url:t})}function p(e){var t="/api/profile/friends/".concat(e);return u()({method:"GET",url:t})}function g(e,t){var n="/api/block/".concat(e);return u()({method:"POST",url:n,data:{follower:t}})}function x(e){var t="/api/blocked/".concat(e);return u()({method:"GET",url:t})}function v(e){return u()({method:"GET",url:"/api/profile/avatar/".concat(e)})}function w(e){return u()({method:"POST",url:"/api/createTweet/".concat(e.user),data:{content:e.content,tweet_date:e.tweet_date,type:e.type,tweetId:e.tweet_id}})}function y(e){return u()({method:"GET",url:"/api/tweet/comments/all/".concat(e)})}function N(e,t){var n="/api/follow/".concat(e);return u()({method:"POST",url:n,data:{follower:t}})}function C(e,t){var n="/api/unfollow/".concat(e);return u()({method:"PUT",url:n,data:{follower:t}})}function S(e){var t="/api/tweet/delete/".concat(e);return u()({method:"DELETE",url:t})}function k(e,t){var n="/api/tweet/hide/".concat(e);return u()({method:"POST",url:n,data:{username:t}})}function I(e,t){var n="/api/tweet/likes/".concat(e);return u()({method:"PUT",url:n,data:{likes:t}})}function E(e,t){var n="/api/tweet/isliked/".concat(e,"/").concat(t,"/");return u()({method:"GET",url:n})}var _=function(e){return u()({method:"GET",url:"/api/tweet/hiders/all/".concat(e)})},P=function(e){return u()({method:"GET",url:"/profile/suggestions/".concat(e)})};var T=function(e,t){return u()({method:"POST",url:"/api/updateNumberFailedLogins",data:{username:e,numberOfFailedLogins:t}})};function F(e){return u()({method:"POST",url:"/api/createMessage/".concat(e.user,"/").concat(e.receiver),data:{content:e.content,message_date:e.message_date,type:e.type,messageId:e.message_id}})}function B(e,t){var n="/api/profile/messages/".concat(e,"/").concat(t);return u()({method:"GET",url:n})}var U=n(47),L=n(1);function D(){var e=Object(c.useState)(""),t=Object(l.a)(e,2),n=t[0],a=t[1],o=Object(c.useState)(""),r=Object(l.a)(o,2),d=r[0],j=r[1],b=Object(c.useState)(""),m=Object(l.a)(b,2),h=m[0],f=m[1],O=Object(c.useState)(""),p=Object(l.a)(O,2),g=p[0],x=p[1],v=Object(c.useState)(""),w=Object(l.a)(v,2),y=w[0],N=w[1],C=Object(c.useState)(""),S=Object(l.a)(C,2),k=S[0],I=S[1],E=Object(i.g)();u.a.defaults.withCredentials=!0;return Object(L.jsx)("div",{className:"card shadow mx-auto mt-5",style:{width:"30rem"},children:Object(L.jsx)("div",{className:"container mx-1",children:Object(L.jsxs)("div",{className:"card-body p-xs",children:[Object(L.jsx)("h2",{className:"card-title text-center font-weight-bold",children:"Sign Up"}),Object(L.jsxs)("div",{className:"form-group",children:[Object(L.jsx)("label",{htmlFor:"new-username-form",children:"Username:"}),Object(L.jsx)("input",{id:"new-username-form",placeholder:"Enter Username",className:"form-control",onChange:function(e){return a(e.target.value)}})]}),Object(L.jsxs)("div",{className:"form-group",children:[Object(L.jsx)("label",{htmlFor:"exampleInputEmail1",children:"Email address"}),Object(L.jsx)("input",{type:"email",className:"form-control",id:"exampleInputEmail1","aria-describedby":"emailHelp",placeholder:"Enter email",onChange:function(e){return I(e.target.value)}}),Object(L.jsx)("small",{id:"emailHelp",className:"form-text text-muted",children:"We will never share your email with anyone else."})]}),Object(L.jsxs)("div",{className:"form-group",children:[Object(L.jsx)("label",{children:"First Name:"}),Object(L.jsx)("input",{type:"name",id:"new-first-name-form",className:"form-control",placeholder:"Enter First Name",onChange:function(e){return x(e.target.value)}})]}),Object(L.jsxs)("div",{className:"form-group",children:[Object(L.jsx)("label",{children:"Last Name:"}),Object(L.jsx)("input",{type:"name",id:"new-last-name-form",placeholder:"Enter Last Name",className:"form-control",onChange:function(e){return N(e.target.value)}})]}),Object(L.jsxs)("div",{className:"form-group",children:[Object(L.jsx)("label",{children:"Password:"}),Object(L.jsx)("input",{type:"password",id:"new-password-form","aria-describedby":"passwordHelp",className:"form-control",placeholder:"Enter Password",onChange:function(e){return j(e.target.value)}}),Object(L.jsx)("small",{id:"passwordHelp",className:"form-text text-muted",children:"Minimum eight characters, at least one uppercase letter, one lowercase letter, one number and one special character"})]}),Object(L.jsxs)("div",{className:"form-group",children:[Object(L.jsx)("label",{children:"Confirm Password:"}),Object(L.jsx)("input",{type:"password",id:"new-password-two-form",className:"form-control",placeholder:"Re-Enter Password",onChange:function(e){return f(e.target.value)}})]}),Object(L.jsx)("div",{className:"form-group",children:Object(L.jsx)("button",{type:"submit",className:"btn btn-primary w-100",onClick:function(){return Object(U.isSamePassword)(d,h)?Object(U.isValidUsername)(n)?Object(U.isValidPassword)(d)?Object(U.isValidEmail)(k)?void function(e,t,n,c,a){return localStorage.setItem("username",JSON.stringify(e)),u()({method:"POST",url:"/api/register",data:{username:e,password:t,first_name:n,last_name:c,email:a}})}(n,d,g,y,k).then((function(e){console.log(e),E.push("/signup")})).catch((function(e){console.log(e)})):(alert("Invalid email, please re-enter"),void(document.getElementById("exampleInputEmail1").value="")):(alert("Invalid password, password must have a minimum eight characters, at least one uppercase letter, one lowercase letter, one number and one special character"),document.getElementById("new-password-form").value="",void(document.getElementById("new-password-two-form").value="")):(alert("Invalid User Name"),void(document.getElementById("new-username-form").value="")):(alert("Passwords do not match, please re-enter"),document.getElementById("new-password-form").value="",void(document.getElementById("new-password-two-form").value=""))},children:"Sign Up"})}),Object(L.jsxs)("p",{children:["Already have an account?\xa0",Object(L.jsx)(s.b,{to:"/login",children:"Log in here!"})]})]})})})}var R=n(33),A=(n(239),n(100)),M=n.n(A),W=n(413),z=n(415),V=n(400),G=n(397),J=n(396),H=(n(240),n(10));function Z(){var e=Object(H.getCurrentUsername)(),t=Object(c.useState)(!1),n=Object(l.a)(t,2),a=n[0],o=n[1],r=Object(c.useState)(!1),s=Object(l.a)(r,2),d=s[0],j=s[1],b=Object(c.useState)(""),m=Object(l.a)(b,2),h=m[0],f=m[1],O=function(){o(!1),f("")};return d?Object(L.jsx)(i.a,{to:"/login"}):Object(L.jsxs)("div",{children:[Object(L.jsx)("button",{id:"delete",style:{color:"#00695c",border:"none",backgroundColor:"inherit"},type:"button",onClick:function(){o(!0)},children:"Delete account"}),Object(L.jsxs)(z.a,{open:a,onClose:O,"aria-labelledby":"form-dialog-title",children:[Object(L.jsx)(J.a,{id:"form-dialog-title",children:"Confirm account deletion"}),Object(L.jsx)(G.a,{children:Object(L.jsx)(W.a,{error:""!==h,autoFocus:!0,margin:"dense",id:"passwordInput",label:"Input password",type:"password",fullWidth:!0,helperText:h})}),Object(L.jsxs)(V.a,{children:[Object(L.jsx)("button",{className:"btn cancel",type:"button",onClick:O,children:"Cancel"}),Object(L.jsx)("button",{className:"btn delete",type:"button",onClick:function(){var t=document.getElementById("passwordInput").value;""!==t&&function(e,t){var n="/api/profile/deactivate/".concat(e);return u()({method:"PUT",url:n,data:{password:t}})}(e,t).then((function(e){console.log(e),o(!1),j(!0)})).catch((function(e){console.log(e),f("Incorrect entry")}))},children:"Delete"})]})]})]})}var Y=n(401);function $(){var e=Object(H.getCurrentUsername)(),t=Object(c.useState)(!1),n=Object(l.a)(t,2),a=n[0],o=n[1],r=Object(c.useState)(!0),s=Object(l.a)(r,2),i=s[0],d=s[1],j=Object(c.useState)(!0),b=Object(l.a)(j,2),m=b[0],h=b[1],f=function(){o(!1)};return Object(L.jsxs)("div",{children:[Object(L.jsx)("button",{id:"change",style:{color:"#00695c",border:"none",backgroundColor:"inherit"},type:"button",onClick:function(){d(!0),o(!0),h(!0)},children:"Change password"}),Object(L.jsxs)(z.a,{open:a,onClose:f,"aria-labelledby":"form-dialog-title",children:[Object(L.jsx)(J.a,{id:"form-dialog-title",children:"Change password"}),Object(L.jsxs)(G.a,{children:[Object(L.jsx)(W.a,{autoFocus:!0,margin:"dense",id:"oldPassword",label:"Old password",type:"password",fullWidth:!0}),Object(L.jsx)(W.a,{error:!m,autoFocus:!0,onChange:function(e){var t;h((t=e.target.value,new RegExp("^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*])(?=.{8,})").test(t)))},margin:"dense",id:"newPassword",label:"Input new password",type:"password",fullWidth:!0,helperText:m?"Password is strong!":"Password needs a min length of 8. It must consist of at 8 ..."}),Object(L.jsx)(W.a,{error:!i,onChange:function(e){d(e.target.value===document.getElementById("newPassword").value)},autoFocus:!0,margin:"dense",id:"newPasswordConfirmed",label:"Confirm new password",type:"password",fullWidth:!0,helperText:i?"":"New password must be identical"})]}),Object(L.jsxs)(V.a,{children:[Object(L.jsx)(Y.a,{onClick:f,color:"#00695c",children:"Cancel"}),Object(L.jsx)(Y.a,{onClick:function(){var t=document.getElementById("oldPassword").value,n=document.getElementById("newPassword").value;i&&m&&t!==n&&""!==n&&""!==t&&function(e,t,n){var c="/api/profile/password/".concat(e);return u()({method:"PUT",url:c,data:{newPassword:t,oldPassword:n}})}(e,n,t).then((function(e){200===e.status?o(!1):o(!0)})).catch((function(e){return console.log(e.message)}))},color:"primary",children:"Update"})]})]})]})}var q=n(399),K=n(355),Q=n(404),X=n(403),ee=n(402),te=n(417),ne=n(416),ce=Object(ee.a)((function(e){return{root:{width:"100%",maxWidth:360,backgroundColor:e.palette.background.paper}}}));function ae(e){var t=e.secondary,n=e.title,o=e.secondTitle,r=e.getFunction,s=e.Icon,i=e.handle,d=e.iconText,u=ce(),j=Object(c.useState)(!1),b=Object(l.a)(j,2),m=b[0],h=b[1],f=Object(c.useState)("paper"),O=Object(l.a)(f,2),p=O[0],g=O[1],x=Object(c.useState)([]),v=Object(l.a)(x,2),w=v[0],y=v[1],N=Object(H.getCurrentUsername)(),C=function(e){return console.log(e.profile_picture),Object(L.jsxs)(K.a,{children:[Object(L.jsx)(X.a,{children:Object(L.jsx)(te.a,{alt:"",src:"/api/viewFile/".concat(e.profile_picture)})}),Object(L.jsx)(Q.a,{primary:e.username,secondary:t}),Object(L.jsx)(ne.a,{title:d,placement:"top",children:Object(L.jsx)(s,{className:"button",color:"secondary",onClick:function(){return i(e.username)}})})]})};Object(c.useEffect)((function(){}),[w]);var S,k=function(){h(!1)},I=a.a.useRef(null);return a.a.useEffect((function(){if(m){var e=I.current;null!==e&&e.focus()}}),[m]),Object(L.jsxs)("div",{children:[Object(L.jsx)("button",{onClick:(S="paper",function(){console.log("here"),r(N).then((function(e){var t=[];e.data.friends?(t=e.data.friends.map((function(e){return C(e)})),console.log(e.data.friends)):e.data.followers&&(t=e.data.followers.map((function(e){return C(e)})),console.log(e.data.followers)),y(t)})).catch((function(e){console.log(e.message)})),h(!0),g(S)}),className:"btn",id:"delete",style:{color:"#00695c",border:"none",backgroundColor:"inherit"},type:"button",children:n}),Object(L.jsxs)(z.a,{open:m,onClose:k,scroll:p,"aria-labelledby":"scroll-dialog-title","aria-describedby":"scroll-dialog-description",children:[Object(L.jsx)(J.a,{id:"scroll-dialog-title",children:o}),Object(L.jsx)(G.a,{dividers:"paper"===p,children:Object(L.jsx)(q.a,{className:u.root,children:w})}),Object(L.jsx)(V.a,{children:Object(L.jsx)("button",{onClick:k,className:"btn",id:"delete",style:{color:"#00695c",border:"none",backgroundColor:"inherit"},type:"button",children:"Close"})})]})]})}function oe(e){var t=Object(H.getCurrentUsername)(),n=e.data.profile_picture;console.log("pics".concat(n));var c="/api/viewFile/".concat(n);return Object(L.jsxs)("div",{className:"container-profile",children:[Object(L.jsxs)("div",{className:"pictures",children:[Object(L.jsx)("img",{src:c,alt:"",id:"overlay"}),Object(L.jsx)("img",{src:c,alt:"",id:"originalDiv"})]}),Object(L.jsx)("br",{}),Object(L.jsx)("div",{className:"username",children:Object(L.jsx)("span",{id:"username",children:e.data.username})}),Object(L.jsxs)("div",{className:"deleteButton",children:[Object(L.jsx)(ae,{secondary:"blocked",title:"My Blocked Users",secondTitle:"Blocked Users",getFunction:x,Icon:M.a,handle:function(e){(function(e,t){var n="/api/unblock/".concat(e);return u()({method:"PUT",url:n,data:{follower:t}})})(t,e).then((function(e){console.log(e.message),x(t).then((function(e){console.log(e.data.friends)}))}))},iconText:"Unblock User"}),Object(L.jsx)(Z,{}),Object(L.jsx)($,{})]})]})}var re=n(72),se=n(20),ie=n(408),le=n(409),de=n(406),ue=n(73),je=n(407),be=n(405),me=n(198),he=n(120),fe=n.n(he),Oe=n(118),pe=n.n(Oe),ge=n(117),xe=n.n(ge),ve=n(119),we=n.n(ve),ye=n(190),Ne=n.n(ye),Ce=Object(ee.a)((function(e){return{grow:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:Object(re.a)({display:"none"},e.breakpoints.up("sm"),{display:"block"}),search:Object(re.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(se.b)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(se.b)(e.palette.common.white,.25)},marginRight:e.spacing(2),marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(3),width:"auto"}),searchIcon:{padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:Object(re.a)({padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("md"),{width:"20ch"}),sectionDesktop:Object(re.a)({display:"none"},e.breakpoints.up("md"),{display:"flex"}),sectionMobile:Object(re.a)({display:"flex"},e.breakpoints.up("md"),{display:"none"})}}));function Se(){var e=Ce(),t=Object(c.useState)(null),n=Object(l.a)(t,2),a=n[0],o=n[1],r=Object(c.useState)(null),s=Object(l.a)(r,2),d=s[0],u=s[1],j=Boolean(a),b=Boolean(d),m=function(e){o(e.currentTarget)},h=Object(i.g)(),f=function(){u(null)},O=function(){o(null);h.push("/profile"),f()},p=function(){h.push("/home")},g="primary-search-account-menu",x=Object(L.jsxs)(me.a,{anchorEl:a,anchorOrigin:{vertical:"top",horizontal:"right"},id:g,keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:j,onClose:O,children:[Object(L.jsx)(be.a,{onClick:p,children:"Home"}),Object(L.jsx)(be.a,{onClick:O,children:"My Account"}),Object(L.jsx)(be.a,{onClick:function(){Object(H.logout)();h.push("/login")},children:"Log Out"})]}),v="primary-search-account-menu-mobile",w=Object(L.jsxs)(me.a,{anchorEl:d,anchorOrigin:{vertical:"top",horizontal:"right"},id:v,keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:b,onClose:f,children:[Object(L.jsxs)(be.a,{onClick:p,children:[Object(L.jsx)(de.a,{color:"inherit",children:Object(L.jsx)(je.a,{children:Object(L.jsx)(xe.a,{})})}),Object(L.jsx)("p",{children:"Home"})]}),Object(L.jsxs)(be.a,{children:[Object(L.jsx)(de.a,{"aria-label":"show 4 new mails",color:"inherit",children:Object(L.jsx)(je.a,{badgeContent:4,color:"secondary",children:Object(L.jsx)(pe.a,{})})}),Object(L.jsx)("p",{children:"Messages"})]}),Object(L.jsxs)(be.a,{children:[Object(L.jsx)(de.a,{"aria-label":"show 11 new notifications",color:"inherit",children:Object(L.jsx)(je.a,{badgeContent:11,color:"secondary",children:Object(L.jsx)(we.a,{})})}),Object(L.jsx)("p",{children:"Notifications"})]}),Object(L.jsxs)(be.a,{onClick:m,children:[Object(L.jsx)(de.a,{"aria-label":"account of current user","aria-controls":"primary-search-account-menu","aria-haspopup":"true",color:"inherit",onClick:p,children:Object(L.jsx)(fe.a,{})}),Object(L.jsx)("p",{children:"Home"})]})]});return Object(L.jsx)("div",{style:{position:"relative",top:"0px"},children:Object(L.jsx)("div",{style:{position:"relative",top:"0px"},className:"rest",children:Object(L.jsxs)("div",{className:e.grow,children:[Object(L.jsx)(ie.a,{style:{backgroundColor:"#0C8367"},position:"static",children:Object(L.jsxs)(le.a,{children:[Object(L.jsx)(ue.a,{className:e.title,variant:"h6",noWrap:!0,children:"Trinirwa Microblog"}),Object(L.jsx)("div",{className:e.grow}),Object(L.jsxs)("div",{className:e.sectionDesktop,children:[Object(L.jsx)(de.a,{onClick:p,color:"inherit",children:Object(L.jsx)(je.a,{children:Object(L.jsx)(xe.a,{})})}),Object(L.jsx)(de.a,{"aria-label":"show 4 new mails",color:"inherit",children:Object(L.jsx)(je.a,{badgeContent:4,color:"secondary",children:Object(L.jsx)(pe.a,{})})}),Object(L.jsx)(de.a,{"aria-label":"show 17 new notifications",color:"inherit",children:Object(L.jsx)(je.a,{badgeContent:17,color:"secondary",children:Object(L.jsx)(we.a,{})})}),Object(L.jsx)(de.a,{edge:"end","aria-label":"account of current user","aria-controls":g,"aria-haspopup":"true",onClick:m,color:"inherit",children:Object(L.jsx)(fe.a,{})})]}),Object(L.jsx)("div",{className:e.sectionMobile,children:Object(L.jsx)(de.a,{"aria-label":"show more","aria-controls":v,"aria-haspopup":"true",onClick:function(e){u(e.currentTarget)},color:"inherit",children:Object(L.jsx)(Ne.a,{})})})]})}),w,x]})})})}n(243);var ke=n(410);function Ie(e){var t=a.a.useState(!1),n=Object(l.a)(t,2),c=n[0],o=n[1],r=function(){o(!0)},s=function(){var t=document.getElementById("interest").value;e.onClose(t),o(!1)};return Object(L.jsxs)("div",{children:[Object(L.jsx)(Y.a,{color:"primary",onClick:r,children:"Add interest"}),Object(L.jsxs)(z.a,{open:c,onClose:r,"aria-labelledby":"form-dialog-title",children:[Object(L.jsx)(J.a,{id:"form-dialog-title",children:"Add interest"}),Object(L.jsx)(G.a,{children:Object(L.jsx)(W.a,{autoFocus:!0,margin:"dense",id:"interest",type:"string",fullWidth:!0})}),Object(L.jsxs)(V.a,{children:[Object(L.jsx)(Y.a,{onClick:s,color:"primary",children:"Cancel"}),Object(L.jsx)(Y.a,{onClick:s,color:"primary",children:"Add"})]})]})]})}function Ee(e){var t=e.interests,n=e.addInterest,c=e.deleteInterest,a=[];return t.forEach((function(e){a.push(Object(L.jsx)("li",{onClick:function(){return c(e)},className:"badge rounded-pill bg-secondary m-2",children:e},e))})),Object(L.jsxs)("div",{className:"wrapper",children:[Object(L.jsx)("div",{className:"section1",children:Object(L.jsx)("ul",{children:a})}),Object(L.jsx)(ke.a,{variant:"middle"}),Object(L.jsx)("div",{className:"section2",children:Object(L.jsx)(Ie,{onClose:n})})]})}n(104);var _e=n(63),Pe=n.n(_e),Te=n(62),Fe=n.n(Te),Be=(n(138),Object(ee.a)((function(e){return{root:{"& > *":{margin:e.spacing(2),borderRadius:"100%",padding:0,overflow:"none"}}}})));function Ue(e){var t=e.info,n=e.handleB,c=e.handleF,a=Be();return Object(L.jsxs)("div",{className:"Container_two",children:[Object(L.jsxs)("div",{className:a.root,children:[Object(L.jsx)(ne.a,{title:"Block user",placement:"top",children:Object(L.jsx)(Fe.a,{fontSize:"small",className:"button",color:"secondary",onClick:function(){return n(t.username)}})}),Object(L.jsx)(ne.a,{title:"Follow",placement:"top",children:Object(L.jsx)(Pe.a,{fontSize:"small",className:"button",onClick:function(){return c(t.username)}})})]}),Object(L.jsx)("div",{className:"followerContainer",children:Object(L.jsx)("div",{className:"myimgContainer",children:Object(L.jsx)("img",{className:"myimg",src:"/api/viewFile/".concat(t.profile_picture),alt:""})})}),Object(L.jsx)("div",{style:{fontWeight:"bold",color:"#0C8367"},className:"text",children:t.username})]})}function Le(){var e=Object(H.getCurrentUsername)(),t=Object(c.useState)([]),n=Object(l.a)(t,2),a=n[0],o=n[1];Object(c.useEffect)((function(){O(e).then((function(e){o(e.data.followers)}))}),[]);var r=function(t){g(e,t).then((function(t){console.log(t.message),O(e).then((function(e){o(e.data.followers)}))}))},s=function(t){N(e,t).then((function(t){console.log(t.message),O(e).then((function(e){o(e.data.followers)}))}))},i=a.map((function(e){return Object(L.jsx)(Ue,{info:e,handleB:r,handleF:s})}));return Object(L.jsxs)("div",{className:"box-container",children:[Object(L.jsx)("div",{className:"buttonFollowers",children:Object(L.jsx)(ae,{secondary:"follower",title:"All followers",secondTitle:"All followers",getFunction:O,Icon:Pe.a,handle:s,iconText:"Follow"})}),Object(L.jsx)("div",{style:{color:"#0C8367"},className:"title",children:"Followers"}),Object(L.jsx)("br",{}),Object(L.jsx)("div",{className:"box",children:Object(L.jsx)("div",{className:"containers",children:i})})]})}var De=n(64),Re=n.n(De),Ae=n(191),Me=n.n(Ae),We=Object(ee.a)((function(e){return{root:{"& > *":{margin:e.spacing(1.5),borderRadius:"100%",padding:0,overflow:"none"}}}}));function ze(e){var t=e.info,n=e.handleB,c=e.handleMessage,a=e.handleU,o=We();return Object(L.jsxs)("div",{className:"Container_two",children:[Object(L.jsxs)("div",{className:o.root,children:[Object(L.jsx)(ne.a,{title:"Message",placement:"top",children:Object(L.jsx)(Me.a,{fontSize:"small",className:"button",onClick:function(){return c(t.username)}})}),Object(L.jsx)(ne.a,{title:"Block user",placement:"top",children:Object(L.jsx)(Fe.a,{fontSize:"small",className:"button",color:"secondary",onClick:function(){return n(t.username)}})}),Object(L.jsx)(ne.a,{title:"Unfollow",placement:"top",children:Object(L.jsx)(Re.a,{fontSize:"small",className:"button",onClick:function(){return a(t.username)}})})]}),Object(L.jsx)("div",{className:"followerContainer",children:Object(L.jsx)("div",{className:"myimgContainer",children:Object(L.jsx)("img",{className:"myimg",src:"/api/viewFile/".concat(t.profile_picture),alt:""})})}),Object(L.jsx)("div",{style:{fontWeight:"bold",color:"#0C8367"},className:"text",children:t.username})]})}function Ve(){var e=Object(i.g)(),t=Object(H.getCurrentUsername)(),n=Object(c.useState)([]),a=Object(l.a)(n,2),o=a[0],r=a[1];Object(c.useEffect)((function(){p(t).then((function(e){r(e.data.friends)}))}),[]);var s=function(e){g(t,e).then((function(e){console.log(e.message),p(t).then((function(e){r(e.data.friends)}))}))},d=function(e){C(t,e).then((function(e){console.log(e.message),p(t).then((function(e){r(e.data.friends)}))}))},u=function(t){console.log(t),localStorage.setItem("receiver",JSON.stringify(t)),e.push("/message")},j=o.map((function(e){return Object(L.jsx)(ze,{info:e,handleMessage:u,handleB:s,handleU:d})}));return Object(L.jsxs)("div",{className:"box-container",children:[Object(L.jsx)("div",{className:"buttonFollowers",children:Object(L.jsx)(ae,{secondary:"friends",title:"All friends",secondTitle:"All friends",getFunction:p,Icon:Re.a,handle:d,iconText:"Unfollow"})}),Object(L.jsx)("div",{style:{color:"#0C8367"},className:"title",children:"Friends"}),Object(L.jsx)("br",{}),Object(L.jsx)("div",{className:"box",children:Object(L.jsx)("div",{className:"containers",children:j})})]})}var Ge=n(14),Je=n.n(Ge),He=n(25),Ze=n(68),Ye=n.n(Ze),$e=n(101),qe=n.n($e),Ke=n(65),Qe=n.n(Ke),Xe=n(66),et=n.n(Xe),tt=n(67),nt=n.n(tt),ct=(n(139),n(195)),at=n.n(ct),ot=n(194),rt=n.n(ot);n(245);function st(e){var t=e.id,n=e.handleComment,a=Object(c.useState)(""),o=Object(l.a)(a,2),r=o[0],s=o[1],i=Object(c.useState)(255),d=Object(l.a)(i,2),u=d[0],j=d[1];return Object(L.jsxs)("div",{className:"comment_box",children:[Object(L.jsx)("div",{className:"commentInpCtn",children:Object(L.jsx)(W.a,{id:"".concat(t),label:"Comment on post",multiline:!0,rowsMax:4,helperText:"".concat(u," remaining chars"),variant:"outlined",inputProps:{maxLength:255},onChange:function(e){return function(e){if(e.target.value.length>=0){var t=255-e.target.value.length;j(t),s(e.target.value),console.log(r)}}(e)},fullWidth:!0})}),Object(L.jsx)("div",{className:"commentBtnCtn",children:Object(L.jsx)("button",{onClick:function(){return n(r)},id:"commentButton",type:"button",children:" Comment"})})]})}n(140);var it=n(411);function lt(e){var t=e.id,n=e.content,o=e.updatePost,r=n,s=a.a.useState(!1),i=Object(l.a)(s,2),d=i[0],u=i[1],j=Object(c.useState)(255),b=Object(l.a)(j,2),m=b[0],h=b[1],f=Object(c.useState)(""),O=Object(l.a)(f,2),p=O[0],g=O[1],x=function(){u(!1)};return Object(L.jsxs)("div",{children:[Object(L.jsx)("button",{onClick:function(){u(!0)},id:"editBtn",type:"button",children:"Edit"}),Object(L.jsxs)(z.a,{open:d,onClose:x,"aria-labelledby":"form-dialog-title",children:[Object(L.jsx)(J.a,{id:"form-dialog-title",children:"Subscribe"}),Object(L.jsxs)(G.a,{children:[Object(L.jsx)(it.a,{children:"Changes will be made once you post them!"}),Object(L.jsx)(W.a,{autoFocus:!0,margin:"dense",id:"name".concat(t),label:"Edit post",type:"email",multiline:!0,fullWidth:!0,helperText:"".concat(m," remaining chars"),defaultValue:r,inputProps:{maxLength:255},onChange:function(e){return function(e){g(e.target.value),h(255-e.target.value.length)}(e)}})]}),Object(L.jsxs)(V.a,{children:[Object(L.jsx)(Y.a,{style:{color:"green"},onClick:x,color:"primary",children:"Cancel"}),Object(L.jsx)(Y.a,{style:{color:"green"},onClick:function(){return o(p),void u(!1)},color:"primary",children:"Post changes"})]})]})]})}function dt(e){var t=e.data,n=e.handleDeleteComment,a=Object(c.useState)(""),o=Object(l.a)(a,2),r=o[0],s=o[1],i=Object(c.useState)(t.content),d=Object(l.a)(i,2),j=d[0],b=d[1],m=Object(H.getCurrentUsername)(),h=t.user===m,f=function(){var e=Object(He.a)(Je.a.mark((function e(){return Je.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v(t.user).then((function(e){s(e.data.avatar[0].profile_picture)})).catch((function(e){console.log(e.message)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){f()}),[]),Object(L.jsxs)("div",{className:"comment_cont",stlye:{height:"200px",width:"100px",backgroundColor:"red"},children:[Object(L.jsxs)("div",{className:"comment_header",children:[Object(L.jsx)("div",{className:"header_profile",children:Object(L.jsx)("img",{id:"comment_picture",src:"/api/viewFile/".concat(r),alt:""})}),Object(L.jsx)("div",{className:"header_name",children:Object(L.jsx)("span",{id:"cmnt_username",children:t.user})})]}),Object(L.jsxs)("div",{className:"cmnt_cntBtn_box",style:{width:"fit-content"},children:[Object(L.jsx)("div",{className:"cmnt_cnt_box",children:Object(L.jsx)("span",{id:"cmnt_cnt",children:j})}),Object(L.jsxs)("div",{className:"cmnt_btns_box",children:[Object(L.jsx)("div",{style:{display:h?"block":"none"},className:"cmnt_EditBtn_box",children:Object(L.jsx)(lt,{id:t.comm_id,updatePost:function(e){""!==e&&(b(e),function(e,t){return u()({method:"PUT",url:"/api/tweet/comment/update/".concat(e),data:{content:t}})}(t.comm_id,e).then((function(e){console.log(e.message)})).catch((function(e){return console.log(e.message)})))},content:j})}),Object(L.jsx)("div",{style:{display:h?"block":"none"},className:"cmnt_EditBtn_box",children:Object(L.jsx)("button",{onClick:function(){return n(t.comm_id)},id:"deleteBtn",type:"button",children:"Delete"})})]})]})]})}var ut=n(6),jt=n(192),bt=n.n(jt),mt=n(193),ht=n.n(mt),ft=Object(ut.a)((function(e){return{root:{margin:0,padding:e.spacing(2)},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}}}))((function(e){var t=e.children,n=e.classes,c=e.onClose;return Object(L.jsxs)(J.a,{disableTypography:!0,className:n.root,children:[Object(L.jsx)(ue.a,{variant:"h6",children:t}),c?Object(L.jsx)(de.a,{"aria-label":"close",className:n.closeButton,onClick:c,children:Object(L.jsx)(bt.a,{})}):null]})})),Ot=Object(ut.a)((function(e){return{root:{padding:e.spacing(2)}}}))(G.a),pt=Object(ut.a)((function(e){return{root:{margin:0,padding:e.spacing(1)}}}))(V.a);function gt(e){var t=e.tweetId,n=Object(c.useState)([]),o=Object(l.a)(n,2),r=o[0],s=o[1],i=Object(c.useState)([]),d=Object(l.a)(i,2),u=d[0],j=d[1],b=a.a.useState(!1),m=Object(l.a)(b,2),h=m[0],f=m[1],O=function(){var e=Object(He.a)(Je.a.mark((function e(){return Je.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y(t).then((function(e){var t=e.data.comments;j(t.map((function(e){return e.user})))})).catch((function(e){return console.log(e.message)}));case 2:return e.next=4,_(t).then((function(e){s(e.data.hiders.map((function(e){return e.user})))})).catch((function(e){return console.log(e.message)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=function(){f(!1)};return Object(c.useEffect)((function(){O()}),[]),Object(c.useEffect)((function(){}),[r,u,h]),Object(L.jsxs)("div",{children:[Object(L.jsxs)("div",{children:[Object(L.jsx)(de.a,{onClick:function(){f(!0)},style:{borderRadius:"50%",padding:"3"},children:Object(L.jsx)(ht.a,{})}),Object(L.jsx)("span",{id:"analytics_btn",style:{color:"#0C8367"},children:"Analytics"})]}),Object(L.jsxs)(z.a,{onClose:p,"aria-labelledby":"customized-dialog-title",open:h,children:[Object(L.jsx)(ft,{id:"customized-dialog-title",onClose:p,children:"Tweet analytics"}),Object(L.jsx)(Ot,{dividers:!0,children:Object(L.jsxs)("div",{style:{display:"flex",minWidth:"100px"},children:[Object(L.jsxs)("div",{children:[Object(L.jsx)("span",{style:{margin:"auto",color:"#0C8367",fontWeight:"bold"},children:"Commentors"}),Object(L.jsx)("ol",{style:{margin:"auto",listStyleType:"circle"},children:u.map((function(e){return Object(L.jsx)("li",{children:e})}))})]}),Object(L.jsxs)("div",{style:{marginLeft:"5px",borderRadius:"8px",backgroundColor:"#D0EAE4"},className:"hiders",children:[Object(L.jsx)("div",{style:{display:"flex"},children:Object(L.jsx)("span",{style:{margin:"auto",color:"#0C8367",fontWeight:"bold"},children:"Hiders"})}),Object(L.jsx)("ol",{style:{margin:"auto",listStyleType:"circle"},children:r.map((function(e){return Object(L.jsxs)("li",{children:[e," "]},e)}))})]})]})}),Object(L.jsx)(pt,{})]})]})}var xt=n(88);function vt(e){var t=e.data,n=e.handleDelete,a=Object(H.getCurrentUsername)(),o=Object(c.useState)(!1),r=Object(l.a)(o,2),s=r[0],i=r[1],d=Object(c.useState)(t.tweet_likes),j=Object(l.a)(d,2),b=j[0],m=j[1],h=Object(c.useState)(t.tweet_comments),f=Object(l.a)(h,2),O=f[0],p=f[1],g=Object(c.useState)(t.tweet_id),x=Object(l.a)(g,1)[0],w=Object(c.useState)(t.tweet_blocks),N=Object(l.a)(w,2),C=(N[0],N[1],Object(c.useState)(t.user===a)),S=Object(l.a)(C,1)[0],k=Object(c.useState)(""),P=Object(l.a)(k,2),T=P[0],F=P[1],B=Object(c.useState)(!1),U=Object(l.a)(B,2),D=U[0],R=U[1],A=Object(c.useState)([]),M=Object(l.a)(A,2),W=M[0],z=(M[1],Object(c.useState)([])),V=Object(l.a)(z,2),G=V[0],J=V[1],Z=function(e,t){var n=(new Date).toISOString(),c={comment_id:xt("".concat(e).concat(a).concat(n)),tweet_id:t,user:a,content:e,timestamp:n};G.unshift(c),function(e){return u()({method:"POST",url:"/api/comment/add/".concat(e.user),data:{commentId:e.comment_id,tweetId:e.tweet_id,content:e.content,timestamp:e.timestamp}})}(c).then((function(e){console.log(e.message),function(e,t){return u()({method:"PUT",url:"/api/tweet/comments/".concat(e),data:{comments:t}})}(x,O+1).then((function(e){console.log(e.message),p(O+1)})).catch((function(e){return console.log(e.message)}))})).catch((function(e){return console.log(e.message)}))},Y=function(){var e=Object(He.a)(Je.a.mark((function e(){return Je.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v(t.user).then((function(e){F(e.data.avatar[0].profile_picture)})).catch((function(e){console.log(e.message)}));case 2:return e.next=4,E(a,t.tweet_id).then((function(e){e.data.bool.length?i(!0):i(!1)})).catch((function(e){console.log(e.message)}));case 4:return e.next=6,y(t.tweet_id).then((function(e){var t=e.data.comments;J(t)})).catch((function(e){return console.log(e.message)}));case 6:return e.next=8,_(x).then((function(e){console.log(e.data)})).catch((function(e){return console.log(e.message)}));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),$=function(e){var t,n=G.filter((function(t){return t.comm_id!==e}));J(n),(t=e,u()({method:"DELETE",url:"/api/tweet/comment/delete/".concat(t)})).then((function(e){console.log(e),p(O-1)})).catch((function(e){return console.log(e.message)}))};Object(c.useEffect)((function(){}),[W]),Object(c.useEffect)((function(){Y()}),[]);var q=t.tweet_date.split("T")[0],K="/api/viewFile/".concat(T),Q="/api/viewFile/".concat(t.content);return Object(L.jsx)(L.Fragment,{children:Object(L.jsxs)("div",{id:"container_tweet",children:[Object(L.jsxs)("div",{className:"tweet_header",children:[Object(L.jsx)("div",{className:"tweet_img",children:Object(L.jsx)("img",{className:"tweet_header",id:"tweet_author_picture",src:K,alt:""})}),Object(L.jsxs)("div",{className:"tweet_text",children:[Object(L.jsx)("span",{style:{fontSize:"13px",fontWeight:"bold"},id:"author_username",children:t.user}),Object(L.jsx)("span",{style:{fontSize:"10px"},id:"date",children:q})]})]}),Object(L.jsx)("div",{id:"menu",children:Object(L.jsx)(ne.a,{title:S?"Delete post":"Hide post",placement:"top",children:Object(L.jsx)(de.a,{style:{borderRadius:"50%",padding:"3",color:"#0C8367"},onClick:function(){return n(x,S)},children:Object(L.jsx)(rt.a,{id:t.tweet_id})})})}),Object(L.jsx)(ke.a,{variant:"middle"}),Object(L.jsx)("div",{className:"tweet_content",children:Object(L.jsxs)(L.Fragment,{children:["text"===t.type&&Object(L.jsx)("p",{style:{textAlign:"left"},children:t.content}),"video"===t.type&&Object(L.jsxs)("video",{className:"tweet_video",controls:!0,children:[" ",Object(L.jsx)("source",{src:Q})]}),"song"===t.type&&Object(L.jsx)("audio",{controls:!0,children:Object(L.jsx)("source",{src:Q})}),"picture"===t.type&&Object(L.jsx)("img",{className:"tweet_image",id:"tweet_media_picture",src:Q,alt:""})]})}),Object(L.jsx)(ke.a,{variant:"middle"}),Object(L.jsx)("div",{className:"comment",children:Object(L.jsx)(st,{handleComment:function(e,t){""!==e&&Z(e,x)}})}),Object(L.jsxs)("div",{className:"comment_item",style:{height:D?"300px":"200px",display:O>0?"block":"none"},children:[Object(L.jsx)("div",{style:{margin:"auto",textAlign:"center",fontWeight:"bold",color:"#0C8367"},children:Object(L.jsx)("span",{children:0!==O?"".concat(O," comments"):"Comments"})}),Object(L.jsx)("div",{style:{margin:"auto",width:"90%",height:"100%"},children:Object(L.jsx)("ul",{id:"list".concat(x),style:{whiteSpace:"nowrap",listStyleType:"none"},children:G.map((function(e){return Object(L.jsx)("li",{style:{marginBottom:"35px"},children:Object(L.jsx)(dt,{data:e,handleDeleteComment:$})},e.comm_id)}))})})]}),Object(L.jsxs)("div",{className:"tweet_bottom",children:[Object(L.jsxs)("div",{className:"likes",children:[Object(L.jsx)(de.a,{onClick:function(){s?function(e,t){var n="/api/tweet/unlike/".concat(e,"/");return u()({method:"PUT",url:n,data:{tweetid:t}})}(a,x).then((function(e){200===e.status&&I(x,b-1).then((function(e){console.log(e.message),m(b-1)})).catch((function(e){console.log(e.message)}))})).catch((function(e){console.log(e.message)})):function(e,t){var n="/api/tweet/like/".concat(e,"/");return u()({method:"POST",url:n,data:{tweetid:t}})}(a,x).then((function(e){I(x,b+1).then((function(e){console.log(e),m(b+1)})).catch((function(e){console.log(e.message)}))})).catch((function(e){console.log(e.message)})),i(!s)},style:{borderRadius:"50%",padding:"3",color:s?"red":"black"},children:Object(L.jsx)(at.a,{})}),Object(L.jsx)("span",{style:{color:"#0C8367"},children:"".concat(b," likes")})]}),Object(L.jsx)("div",{style:{display:S?"block":"none"},className:"analytics",children:Object(L.jsx)(gt,{tweetId:t.tweet_id})}),Object(L.jsx)("div",{className:"comments",children:Object(L.jsx)("button",{onClick:function(){R(!D)},id:"viewCommentsBtn",type:"button",children:D?"View less":"View more"})})]})]})})}n(89),n(90);var wt=Object(ee.a)((function(e){return{button:{margin:e.spacing(1)}}})),yt=n(88);function Nt(){var e=Object(i.g)(),t=Object(c.useState)(new Map),n=Object(l.a)(t,1)[0],a=Object(c.useState)(!1),o=Object(l.a)(a,2),r=o[0],s=o[1],d=Object(c.useState)(255),u=Object(l.a)(d,2),j=u[0],b=u[1],h=Object(c.useState)(new Set),f=Object(l.a)(h,1)[0],O=wt(),p=Object(H.getCurrentUsername)(),g=function(e,t){t?S(e).then((function(t){window.location.reload(),console.log("message: delete:",t.message),s(!0),console.log("deleted:",f.delete(n.get(e))),n.delete(e)})).catch((function(e){console.log(e.message)})):k(e,p).then((function(t){window.location.reload(),f.delete(n.get(e)),n.delete(e),s(!0)})).catch((function(e){return console.log(e)}))};Object(c.useEffect)((function(){console.log("refreshed"),s(!1)}),[r]);var x=function(){var e=Object(He.a)(Je.a.mark((function e(){return Je.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m(p).then((function(e){e.data.tweets.forEach((function(e){var t=Object(L.jsx)("div",{className:"tContainer",children:Object(L.jsx)(vt,{handleDelete:g,data:e})});f.add(t),n.set(e.tweet_id,t)})),s(!0)})).catch((function(e){return console.log(e)}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){x()}),[]);return Object(L.jsxs)("div",{className:"container_center",children:[Object(L.jsxs)("div",{style:{backgroundColor:"white",height:"fit-content",borderRadius:"8px"},className:"whatIsOn",children:[Object(L.jsx)("div",{style:{width:"90%",paddingTop:"4px",margin:"auto"},children:Object(L.jsx)(W.a,{multiline:!0,id:"tweet",label:"what's on your mind!!",variant:"outlined",helperText:"".concat(j," remaining chars"),inputProps:{maxLength:255},onChange:function(e){return function(e){if(e.target.value.length>=0){var t=255-e.target.value.length;b(t)}}(e)},fullWidth:!0})}),Object(L.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"8px"},className:"buttons",children:[Object(L.jsx)(Y.a,{variant:"contained",color:"secondary",className:O.button,onClick:function(){e.push("/videochat")},startIcon:Object(L.jsx)(qe.a,{}),children:"Go live"}),Object(L.jsx)(Y.a,{variant:"contained",color:"secondary",id:"button-media",className:O.button,startIcon:Object(L.jsx)(Qe.a,{}),onClick:function(){document.getElementById("fileInputPicture").click()},children:"Photo"}),Object(L.jsx)(Y.a,{variant:"contained",color:"secondary",id:"button-media",className:O.button,startIcon:Object(L.jsx)(et.a,{}),onClick:function(){document.getElementById("fileInputVideo").click()},children:"Video"}),Object(L.jsx)(Y.a,{variant:"contained",color:"secondary",id:"button-media",className:O.button,startIcon:Object(L.jsx)(nt.a,{}),onClick:function(){document.getElementById("fileInputSong").click()},children:"Song"}),Object(L.jsx)(Y.a,{variant:"contained",color:"secondary",className:O.button,startIcon:Object(L.jsx)(Ye.a,{}),onClick:function(){b(255);var e=document.getElementById("tweet").value;if("undefined"!==typeof e&&0!==e.length){var t=(new Date).toISOString(),n=yt("".concat(e).concat(p).concat(t));w({user:p,tweet_id:n,type:"text",content:e,tweet_date:t,tweet_likes:0}).then((function(e){console.log(e.message),window.location.reload()})).catch((function(e){console.log(e.message)}))}},children:"Create post"}),Object(L.jsx)("input",{className:"FileUpload",accept:".jpg,.png,.gif",id:"fileInputPicture",type:"file",onChange:function(e){var t=new FormData,n=document.getElementById("fileInputPicture").value;t.append("image",e.target.files[0],n);var c={method:"POST",body:t,redirect:"follow"},a=document.getElementById("tweet").value;if("undefined"!==typeof a){var o=(new Date).toISOString(),r=yt("".concat(a).concat(p).concat(o));fetch("/api/uploadFile",c).then((function(e){return e.text()})).then((function(e){w({user:p,tweet_id:r,type:"picture",content:JSON.parse(e).data,tweet_date:o,tweet_likes:0}).then((function(e){console.log(e.message),window.location.reload()})).catch((function(e){console.log(e.message)}))})).catch((function(e){console.log(e)}))}},hidden:!0}),Object(L.jsx)("input",{className:"FileUpload",id:"fileInputVideo",type:"file",onChange:function(e){var t=new FormData,n=document.getElementById("fileInputVideo").value;t.append("image",e.target.files[0],n);var c={method:"POST",body:t,redirect:"follow"},a=document.getElementById("tweet").value;if("undefined"!==typeof a){var o=(new Date).toISOString(),r=yt("".concat(a).concat(p).concat(o));fetch("/api/uploadFile",c).then((function(e){return e.text()})).then((function(e){w({user:p,tweet_id:r,type:"video",content:JSON.parse(e).data,tweet_date:o,tweet_likes:0}).then((function(e){console.log(e.message),window.location.reload()})).catch((function(e){console.log(e.message)}))})).catch((function(e){console.log(e)}))}},hidden:!0}),Object(L.jsx)("input",{className:"FileUpload",id:"fileInputSong",type:"file",onChange:function(e){var t=new FormData,n=document.getElementById("fileInputSong").value;t.append("image",e.target.files[0],n);var c={method:"POST",body:t,redirect:"follow"},a=document.getElementById("tweet").value;if("undefined"!==typeof a){var o=(new Date).toISOString(),r=yt("".concat(a).concat(p).concat(o));fetch("/api/uploadFile",c).then((function(e){return e.text()})).then((function(e){w({user:p,tweet_id:r,type:"song",content:JSON.parse(e).data,tweet_date:o,tweet_likes:0}).then((function(e){window.location.reload(),console.log(e.message)})).catch((function(e){console.log(e.message)}))})).catch((function(e){console.log(e)}))}},hidden:!0})]})]}),Object(L.jsx)("div",{children:f})]})}n(246);function Ct(){var e=Object(H.getCurrentUsername)(),t=Object(c.useState)([{}]),n=Object(l.a)(t,2),a=n[0],o=n[1],r=Object(c.useState)(new Set),s=Object(l.a)(r,2),i=s[0],d=s[1],u=Object(c.useState)(!1),m=Object(l.a)(u,2),h=m[0],O=m[1],p=Object(c.useState)(0),g=Object(l.a)(p,2),x=g[0],v=g[1];Object(c.useEffect)((function(){f(e).then((function(e){console.log(e.data.data[0]),o(e.data.data[0]);var t=new Set(e.data.interests.map((function(e){return e.interest})));d(t)})).catch((function(e){console.log(e.message)})),O(!0)}),[]);return h?Object(L.jsx)("div",{className:"profile",children:Object(L.jsxs)("div",{style:{width:"98%",margin:"auto"},children:[Object(L.jsxs)("div",{style:{position:"relative",top:"0px"},className:"rest",children:[Object(L.jsx)(Se,{}),Object(L.jsx)(oe,{data:a,user:e})]}),Object(L.jsxs)("div",{className:"all_boxes",children:[Object(L.jsxs)("div",{className:"left-boxes",children:[Object(L.jsx)("div",{className:"left-Displayer",children:Object(L.jsx)(Ee,{interests:i,addInterest:function(t){d([].concat(Object(R.a)(i),[t])),v(Math.floor(1e9*Math.random())),j(t,e)},deleteInterest:function(t){var n=i;n.delete(t),d(n),v(Math.floor(1e9*Math.random())),b(t,e)}},x)}),Object(L.jsx)("div",{className:"left-friends",children:Object(L.jsx)(Ve,{})}),Object(L.jsx)("div",{className:"left-followers",children:Object(L.jsx)(Le,{})})]}),Object(L.jsx)("div",{className:"right_boxes",children:Object(L.jsx)(Nt,{})})]})]})}):Object(L.jsx)("div",{})}function St(){var e=Object(i.g)(),t=Object(c.useState)(""),n=Object(l.a)(t,2),a=n[0],o=n[1],r=Object(c.useState)(""),d=Object(l.a)(r,2),j=d[0],b=d[1],m=Object(c.useState)(0),h=Object(l.a)(m,2),f=h[0],O=h[1],p=Object(c.useState)(""),g=Object(l.a)(p,2),x=g[0],v=g[1],w=Object(c.useState)(!1),y=Object(l.a)(w,1)[0];u.a.defaults.withCredentials=!0,Object(c.useEffect)((function(){return O(f)}),[f]),Object(c.useEffect)((function(){return console.log("changed dateUserLastLockedOut ".concat(x))}),[x]),Object(c.useEffect)((function(){return console.log("changed isLockedOut ".concat(y))}),[y]);return Object(L.jsx)("div",{className:"card shadow mx-auto mt-5",style:{width:"30rem"},children:Object(L.jsx)("div",{className:"container mx-1",children:Object(L.jsxs)("div",{className:"card-body p-xs",children:[Object(L.jsx)("h2",{className:"card-title text-center font-weight-bold",children:"Log In"}),Object(L.jsxs)("div",{className:"form-group",children:[Object(L.jsx)("label",{children:"Username:"}),Object(L.jsx)("input",{id:"new-username-form",placeholder:"Enter Username",className:"form-control",onChange:function(e){return o(e.target.value)}})]}),Object(L.jsxs)("div",{className:"form-group",children:[Object(L.jsx)("label",{children:"Password:"}),Object(L.jsx)("input",{id:"new-password-form",type:"password",placeholder:"Enter Password",className:"form-control",onChange:function(e){return b(e.target.value)}})]}),Object(L.jsxs)("p",{children:["Forgot Password?\xa0",Object(L.jsx)(s.a,{children:Object(L.jsx)(s.b,{to:"/resetPassword",children:"Click here to reset!"})})]}),Object(L.jsx)("div",{className:"form-group text-center",children:Object(L.jsx)("button",{type:"submit",className:"btn btn-primary w-100",onClick:function(){o(a),function(e,t){return u()({method:"POST",url:"/api/login",data:{username:e,password:t}})}(a,j).then((function(t){localStorage.setItem("username",JSON.stringify(a)),function(e,t){var n="/api/profile/reactivate/".concat(e);return u()({method:"PUT",url:n,data:{password:t}})}(a,j).then((function(){})).catch((function(e){console.log(e)})),function(e){return u()({method:"GET",url:"/api/numberFailedLogins/".concat(e)})}(a).then((function(n){if(console.log("resOne.data.message",n.data.message),"200"==n.data.message){var c,o=[Array.from(n.data.data)[0].number_failed_logins];O(c=o[0]),function(e){return u()({method:"GET",url:"/api/dateUserLastLockedOut/".concat(e)})}(a).then((function(n){var o,r=[Array.from(n.data.data)[0].date_last_locked_out];if(v(o=r[0]),c>3){y=!0;var s=new Date(o);new Date-s>36e5&&(y=!1,T(a,0).catch((function(e){console.log(e)})))}if(!1===y)if(t.data.message){3===parseInt(c,10)&&function(e){u()({method:"POST",url:"/api/setLockOutTime",data:{username:e}})}(a);var i=parseInt(c,10)+1;alert("Wrong Password! You have ".concat(3-i," attempts left before you get locked out")),T(a,i).catch((function(e){console.log(e)})),alert(t.data.message),e.push("/login"),document.getElementById("new-username-form").value="",document.getElementById("new-password-form").value=""}else T(a,0).catch((function(e){console.log(e)})),e.push("/home");else alert("your account has been locked because to too many incorrect attempts, please try back in an hour"),e.push("/login"),document.getElementById("new-username-form").value="",document.getElementById("new-password-form").value=""})).catch((function(e){console.log(e)}))}else alert("Username Not Found"),e.push("/login"),document.getElementById("new-username-form").value="",document.getElementById("new-password-form").value=""})).catch((function(e){console.log(e),alert("Username Not Found"),document.getElementById("new-username-form").value="",document.getElementById("new-password-form").value=""}))}))},children:"Log In"})}),Object(L.jsxs)("p",{children:["Don't have an account?\xa0",Object(L.jsx)(s.a,{children:Object(L.jsx)(s.b,{to:"/registration",children:"Sign Up!"})})]})]})})})}n(141),n(247);function kt(){var e=Object(i.g)(),t=Object(c.useState)(""),n=Object(l.a)(t,2),a=n[0],o=n[1],r=Object(H.getCurrentUsername)();return Object(c.useEffect)((function(){v(r).then((function(e){o(e.data.avatar[0].profile_picture)})).catch((function(e){console.log(e.message)}))}),[]),Object(c.useEffect)((function(){}),[a]),Object(L.jsx)(s.a,{children:Object(L.jsxs)("div",{className:"sidebar",children:[Object(L.jsx)("div",{style:{marginBottom:"5px"},className:"bigButton",children:Object(L.jsx)("button",{className:"button_profile",onClick:function(){e.push("/profile")},type:"button",children:Object(L.jsxs)("div",{className:"header_box",children:[Object(L.jsx)("div",{className:"img_box",children:Object(L.jsx)("img",{id:"img",alt:"",src:"/api/viewfile/".concat(a)})}),Object(L.jsx)("div",{className:"username_box",children:Object(L.jsx)("span",{className:"user",children:r})})]})})}),Object(L.jsx)("div",{style:{marginBottom:"5px"},children:Object(L.jsx)(Ve,{})})]})})}n(248);function It(){var e=Object(H.getCurrentUsername)(),t=Object(c.useState)([]),n=Object(l.a)(t,2),a=n[0],o=n[1],r=Object(c.useState)(new Set),s=Object(l.a)(r,2),i=s[0],d=s[1];Object(c.useEffect)((function(){x(e).then((function(e){d((function(){return new Set([e.data.friends.map((function(e){return e.username}))])}))})).catch((function(e){return console.log(e.message)}))}),[]);var j=function(t){var n,c;""===t.target.value&&o([]),(n=e,c=t.target.value,console.log("search friend ".concat(n,", typeof ").concat(typeof c,"@@@@@@@@@@@@")),u()({method:"GET",url:"/api/search/".concat(n,"/").concat(c)})).then((function(n){console.log("input: ".concat(t.target.value," , ").concat(e)),o(n.data.friends),console.log(a.data.friends)})).catch((function(e){console.log(e.message)}))},b=function(t){var n=t.followed,c=t.username===e,a=i.has(t.username);return Object(L.jsxs)("div",{className:"searchItem",children:[Object(L.jsx)("div",{className:"searchImg",children:Object(L.jsx)("img",{id:"search_img",src:"/viewFile/".concat(t.profile_picture),alt:""})}),Object(L.jsxs)("div",{className:"search-name",children:[Object(L.jsx)("span",{style:{color:"#0C8367",fontWeight:"bold"},children:t.username}),Object(L.jsx)("span",{style:{fontWeight:"lighter"},children:t.followed?"following":"Follow me PLZ :)"})]}),Object(L.jsx)("div",{className:"searchBtn",children:Object(L.jsxs)(L.Fragment,{children:[!n&&!c&&Object(L.jsx)(ne.a,{title:"Follow",placement:"top",children:Object(L.jsx)(Pe.a,{style:{margin:"2px"},fontSize:"small",className:"button",onClick:function(){return n=t.username,void N(e,n).then((function(t){console.log(t.message),O(e).then((function(e){console.log(e.data.followers)}))}));var n}})}),a&&!c&&Object(L.jsx)(ne.a,{title:"Unblock",placement:"top",children:Object(L.jsx)(M.a,{className:"button",style:{margin:"2px"},fontSize:"small"})}),n&&!c&&Object(L.jsx)(ne.a,{title:"Unfollow",placement:"top",children:Object(L.jsx)(Re.a,{style:{margin:"2px"},fontSize:"small",className:"button",onClick:function(){return n=t.username,void C(e,n).then((function(e){console.log(e.message)})).catch((function(e){return console.log(e.message)}));var n}})}),!c&&Object(L.jsx)(ne.a,{title:"Block",placement:"top",children:Object(L.jsx)(Fe.a,{style:{margin:"2px"},fontSize:"small",className:"button",color:"secondary",onClick:function(){return n=t.username,void g(e,n).then((function(e){console.log(e.message)})).catch((function(e){return console.log(e.message)}));var n}})})]})})]})};return Object(L.jsxs)("div",{children:[Object(L.jsx)(W.a,{multiline:!0,id:"tweet",label:"Search for contact",variant:"outlined",inputProps:{maxLength:255},onChange:function(e){return j(e)},fullWidth:!0}),Object(L.jsx)("div",{className:"searchBack",children:a.map((function(e){return b(e)}))})]})}function Et(){var e=Object(H.getCurrentUsername)(),t=Object(c.useState)([]),n=Object(l.a)(t,2),a=n[0],o=n[1],r=function(){var t=Object(He.a)(Je.a.mark((function t(){return Je.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P(e).then((function(e){4===a.length?a.push(e.data.suggestions[0]):o(e.data.suggestions)})).catch((function(e){return console.log(e.message)}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),s=function(){var t=Object(He.a)(Je.a.mark((function t(n){var c;return Je.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=a.filter((function(e){return e.username!==n})),t.next=3,P(e).then((function(e){c.push(e.data.suggestions[0])})).catch((function(e){return console.log(e.message)}));case 3:o(c);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();Object(c.useEffect)((function(){r()}),[]);var i=function(t){s(t),g(e,t).then((function(e){console.log(e.message)}))},d=function(t){s(t),N(e,t).then((function(e){console.log(e.message)}))};return Object(L.jsxs)("div",{className:"box-container",children:[Object(L.jsx)("div",{style:{color:"#0C8367"},className:"title",children:"Suggestions"}),Object(L.jsx)("br",{}),Object(L.jsx)("div",{className:"box",children:Object(L.jsx)("div",{className:"containers",children:a.map((function(e){return Object(L.jsx)(Ue,{info:e,handleB:i,handleF:d})}))})})]})}var _t=n(412),Pt=Object(ee.a)((function(e){return{button:{margin:e.spacing(1)}}}));function Tt(e){var t=e.handlers.postTweet,n=Object(c.useState)(255),a=Object(l.a)(n,2),o=a[0],r=a[1],s=Pt();return Object(L.jsx)("div",{className:"container_center",children:Object(L.jsxs)("div",{style:{backgroundColor:"white",height:"fit-content",borderRadius:"8px"},className:"whatIsOn",children:[Object(L.jsx)("div",{style:{width:"90%",paddingTop:"4px",margin:"auto"},children:Object(L.jsx)(W.a,{multiline:!0,id:"tweet",label:"what's on your mind!!",variant:"outlined",helperText:"".concat(o," remaining chars"),inputProps:{maxLength:255},onChange:function(e){return function(e){var t=255-e.target.value.length;r(t)}(e)},fullWidth:!0})}),Object(L.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"8px"},className:"buttons",children:[Object(L.jsx)(Y.a,{variant:"contained",color:"secondary",className:s.button,startIcon:Object(L.jsx)(qe.a,{}),children:"Go live"}),Object(L.jsx)(Y.a,{variant:"contained",color:"secondary",id:"button-media",className:s.button,startIcon:Object(L.jsx)(Qe.a,{}),children:"Photo"}),Object(L.jsx)(Y.a,{variant:"contained",color:"secondary",id:"button-media",className:s.button,startIcon:Object(L.jsx)(et.a,{}),children:"Video"}),Object(L.jsx)(Y.a,{variant:"contained",color:"secondary",id:"button-media",className:s.button,startIcon:Object(L.jsx)(nt.a,{}),children:"Song"}),Object(L.jsx)(Y.a,{variant:"contained",color:"secondary",className:s.button,startIcon:Object(L.jsx)(Ye.a,{}),onClick:t,children:"Create post"}),Object(L.jsx)("input",{className:"FileUpload",accept:".jpg,.png,.gif",id:"fileInputPicture",type:"file",hidden:!0}),Object(L.jsx)("input",{className:"FileUpload",id:"fileInputVideo",type:"file",hidden:!0}),Object(L.jsx)("input",{className:"FileUpload",id:"fileInputSong",type:"file",hidden:!0})]})]})})}var Ft=n(88);function Bt(){var e=Object(c.useState)(!0),t=Object(l.a)(e,2),n=t[0],a=t[1],o=Object(c.useState)(!1),r=Object(l.a)(o,2),s=(r[0],r[1],Object(c.useState)([])),i=Object(l.a)(s,2),d=i[0],j=i[1],b=Object(c.useState)(1),m=Object(l.a)(b,2),f=m[0],O=m[1],p=Object(c.useRef)(),g=Object(c.useCallback)((function(e){n||(p.current&&p.current.disconnect(),p.current=new IntersectionObserver((function(e){e[0].isIntersecting&&O((function(e){return e+1}))})),e&&p.current.observe(e))}),[n]),x=Object(H.getCurrentUsername)(),v=function(){var e=Object(He.a)(Je.a.mark((function e(){return Je.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h(x).then((function(e){console.log("typeof",e.data.count[0][0].COUNT)})).catch((function(e){return console.log(e)}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){v()}),[]),Object(c.useEffect)((function(){a(!0),function(e,t,n){var c="/tweeters/all/".concat(e);return u()({method:"GET",url:c,params:{page:t,limit:n}})}(x,f,10).then((function(e){j((function(t){return[].concat(Object(R.a)(t),Object(R.a)(e.data.tweets[0]))})),a(!1)})).catch((function(e){return console.log(e)}))}),[f]);var y=function(){var e=Object(He.a)(Je.a.mark((function e(t){return Je.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("here 2"),e.next=3,j((function(e){return e.filter((function(e){return e.tweet_id!==t}))}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(e,t){t?S(e).then((function(t){console.log("here"),y(e)})).catch((function(e){console.log(e.message)})):k(e,x).then((function(t){j((function(t){return t.filter((function(t){return t.tweet_id!==e}))}))})).catch((function(e){return console.log(e)}))},C={postTweet:function(){var e=document.getElementById("tweet").value;if("undefined"!==typeof e&&0!==e.length){var t=(new Date).toISOString(),n=Ft("".concat(e).concat(x).concat(t)),c={user:x,tweet_id:n,type:"text",content:e,tweet_date:t,tweet_likes:0};j((function(e){return[c].concat(Object(R.a)(e))})),w(c).then((function(e){console.log(d)})).catch((function(e){console.log(e.message)}))}}};return Object(L.jsxs)(L.Fragment,{children:[Object(L.jsxs)("div",{className:"container_center",children:[Object(L.jsx)(Tt,{className:"tweetIpt",handlers:C}),Object(L.jsx)("div",{className:"tweet_items",children:d.map((function(e,t){return d.length===t+1?Object(L.jsx)("div",{ref:g,className:"tContainer",children:Object(L.jsx)(vt,{handleDelete:N,data:e})}):Object(L.jsx)("div",{className:"tContainer",children:Object(L.jsx)(vt,{handleDelete:N,data:e})})}))})]}),Object(L.jsx)("div",{children:Object(L.jsx)(_t.a,{style:{color:"green"}})})]})}function Ut(){return Object(L.jsxs)("div",{children:[Object(L.jsx)("div",{className:"nav_item",children:Object(L.jsx)(Se,{})}),Object(L.jsxs)("div",{className:"home",children:[Object(L.jsx)("div",{className:"sidebar_item",children:Object(L.jsx)(kt,{})}),Object(L.jsx)("div",{className:"center_item",children:Object(L.jsx)(Bt,{})}),Object(L.jsxs)("div",{className:"right_item",children:[Object(L.jsx)("div",{className:"searchbox",children:Object(L.jsx)(It,{})}),Object(L.jsx)("div",{className:"suggestionBox",children:Object(L.jsx)(Et,{})})]})]})]})}function Lt(){var e=Object(i.g)(),t=Object(H.getCurrentUsername)();console.log("username = ".concat(t));var n=Object(c.useState)(new Set),a=Object(l.a)(n,2),o=a[0],r=a[1],d=Object(c.useState)(0),m=Object(l.a)(d,2),h=m[0],O=m[1],p=Object(c.useState)(""),g=Object(l.a)(p,2),x=g[0],v=g[1];Object(c.useEffect)((function(){f(t).then((function(e){console.log(e.data.data[0]);var t=new Set(e.data.interests.map((function(e){return e.interest})));r(t)})).catch((function(e){console.log(e.message)}))}),[]);var w=Object(L.jsx)("div",{});return""!==x&&(w=Object(L.jsxs)("div",{className:"myimgContainer",children:[" "," ","Here is your new profile",Object(L.jsx)("img",{className:"myimg",src:"/api/viewFile/".concat(x),alt:""})]}),console.log("/api/viewFile/".concat(x))),console.log(w),Object(L.jsx)("div",{className:"card shadow mx-auto mt-5",style:{width:"30rem"},children:Object(L.jsx)("div",{className:"container mx-1",children:Object(L.jsxs)("div",{className:"card-body p-xs",children:[Object(L.jsxs)("h2",{className:"card-title text-center font-weight-bold",children:["Hi",Object(L.jsxs)("var",{children:[" ",t]})]}),Object(L.jsxs)("h2",{className:"card-title text-center font-weight-bold",children:[" ",Object(L.jsx)("h2",{className:"card-title text-center font-weight-bold",children:"Please Finish Sign Up"})]}),Object(L.jsxs)("div",{className:"form-group",children:[Object(L.jsx)("label",{htmlFor:"new-username-form",children:"Please Upload Profile Picture:"}),Object(L.jsx)("input",{type:"file",className:"form-control",id:"fileUploadProfilePicture",onChange:function(e){var n=new FormData,c=document.getElementById("fileUploadProfilePicture").value;n.append("image",e.target.files[0],c),fetch("/api/uploadFile",{method:"POST",body:n,redirect:"follow"}).then((function(e){return e.text()})).then((function(e){v(JSON.parse(e).data),function(e,t){return u()({method:"POST",url:"/api/uploadProfilePicture",data:{username:e,profilePicture:t}})}(t,JSON.parse(e).data).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))})).catch((function(e){alert(e)}))}}),w,Object(L.jsx)("label",{htmlFor:"new-username-form",children:"Please Add Your Interests:"}),Object(L.jsx)(Ee,{interests:o,addInterest:function(e){r([].concat(Object(R.a)(o),[e])),O(Math.floor(1e9*Math.random())),j(e,t)},deleteInterest:function(e){var n=o;n.delete(e),r(n),O(Math.floor(1e9*Math.random())),b(e,t)}},h),Object(L.jsx)("div",{className:"form-group",children:Object(L.jsx)("button",{type:"submit",className:"btn btn-primary w-100",onClick:function(){alert("Your have successfully signed up"),e.push("/login/")},children:"Complete Registration"})}),Object(L.jsxs)("p",{children:["Already have an account?\xa0",Object(L.jsx)(s.b,{to:"/login",children:"Log in here!"})]})]})]})})})}function Dt(){return Object(L.jsx)("div",{className:"col-xs-12 col-sm-6 col-md-6 col-lg-6",children:Object(L.jsx)("img",{src:"/api/viewFile/cat1.jpg",alt:"",className:"img-responsive"})})}var Rt=n(196),At=n.n(Rt),Mt=function(e){var t=e.username,n=e.roomName,c=e.handleRoomNameChange,a=e.handleSubmit,o=e.connecting;return Object(L.jsx)("form",{onSubmit:a,children:Object(L.jsxs)("div",{children:[Object(L.jsx)(Se,{}),Object(L.jsxs)("div",{className:"home",children:[Object(L.jsx)("div",{style:{}}),Object(L.jsx)("div",{className:"card shadow mx-auto mt-5",style:{width:"30rem"},children:Object(L.jsx)("div",{className:"container mx-1",children:Object(L.jsxs)("div",{className:"card-body p-xs",children:[Object(L.jsx)("h2",{className:"card-title text-center font-weight-bold",children:"Live Stream"}),Object(L.jsxs)("div",{className:"form-group",children:[Object(L.jsx)("h2",{children:"Enter a room"}),Object(L.jsx)("div",{children:Object(L.jsxs)("label",{htmlFor:"name",children:[" ","Hi,"," ",t,", please select a room to start your live stream!"]})}),Object(L.jsx)("label",{htmlFor:"room",children:"Room name:"}),Object(L.jsx)("input",{type:"text",id:"room",placeholder:"Enter Room Name",value:n,onChange:c,readOnly:o,required:!0})]}),Object(L.jsx)("div",{className:"video-group",children:Object(L.jsx)("button",{type:"submit",className:"btn btn-primary w-100",disabled:o,children:o?"Connecting":"Join"})})]})})})]})]})})},Wt=n(197),zt=n.n(Wt),Vt=function(e){var t=e.participant,n=Object(c.useState)([]),a=Object(l.a)(n,2),o=a[0],r=a[1],s=Object(c.useState)([]),i=Object(l.a)(s,2),d=i[0],u=i[1],j=Object(c.useRef)(),b=Object(c.useRef)(),m=function(e){return Array.from(e.values()).map((function(e){return e.track})).filter((function(e){return null!==e}))};return Object(c.useEffect)((function(){r(m(t.videoTracks)),u(m(t.audioTracks));return t.on("trackSubscribed",(function(e){"video"===e.kind?r((function(t){return[].concat(Object(R.a)(t),[e])})):"audio"===e.kind&&u((function(t){return[].concat(Object(R.a)(t),[e])}))})),t.on("trackUnsubscribed",(function(e){"video"===e.kind?r((function(t){return t.filter((function(t){return t!==e}))})):"audio"===e.kind&&u((function(t){return t.filter((function(t){return t!==e}))}))})),function(){r([]),u([]),t.removeAllListeners()}}),[t]),Object(c.useEffect)((function(){var e=o[0];if(e)return e.attach(j.current),function(){e.detach()}}),[o]),Object(c.useEffect)((function(){var e=d[0];if(e)return e.attach(b.current),function(){e.detach()}}),[d]),Object(L.jsxs)("div",{className:"participant",children:[Object(L.jsx)("h3",{children:t.identity}),Object(L.jsx)("video",{ref:j,autoPlay:!0}),Object(L.jsx)("audio",{ref:b,autoPlay:!0,muted:!0})]})},Gt=(n(351),function(e){var t=e.roomName,n=e.room,a=e.handleLogout,o=Object(c.useState)([]),r=Object(l.a)(o,2),s=r[0],i=r[1];Object(c.useEffect)((function(){var e=function(e){i((function(t){return[].concat(Object(R.a)(t),[e])}))},t=function(e){i((function(t){return t.filter((function(t){return t!==e}))}))};return n.on("participantConnected",e),n.on("participantDisconnected",t),n.participants.forEach(e),function(){n.off("participantConnected",e),n.off("participantDisconnected",t)}}),[n]);var d=s.map((function(e){return Object(L.jsx)(Vt,{participant:e},e.sid)}));return Object(L.jsxs)("div",{className:"room",children:[Object(L.jsx)(Se,{}),Object(L.jsx)("div",{style:{}}),Object(L.jsxs)("h2",{children:["Live Stream:"," ",t]}),Object(L.jsx)(Y.a,{color:"secondary",startIcon:Object(L.jsx)(zt.a,{}),type:"submit",className:"btn btn-primary w-100",onClick:a,children:"Leave Stream"}),Object(L.jsx)("div",{className:"local-participant",children:n?Object(L.jsx)(Vt,{participant:n.localParticipant},n.localParticipant.sid):""}),Object(L.jsx)("h3",{children:"Remote Participants"}),Object(L.jsx)("div",{className:"remote-participants",children:d})]})}),Jt=function(){var e=Object(c.useState)(""),t=Object(l.a)(e,2),n=t[0],a=t[1],o=Object(c.useState)(null),r=Object(l.a)(o,2),s=r[0],i=r[1],d=Object(c.useState)(!1),u=Object(l.a)(d,2),j=u[0],b=u[1],m=Object(H.getCurrentUsername)(),h=Object(c.useCallback)((function(e){a(e.target.value)}),[]),f=Object(c.useCallback)(function(){var e=Object(He.a)(Je.a.mark((function e(t){var c;return Je.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),b(!0),e.next=4,fetch("/video/token",{method:"POST",body:JSON.stringify({identity:m,room:n}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()}));case 4:c=e.sent,At.a.connect(c.token,{name:n}).then((function(e){b(!1),i(e)})).catch((function(e){console.error(e),b(!1)}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[n,m]),O=Object(c.useCallback)((function(){i((function(e){return e&&(e.localParticipant.tracks.forEach((function(e){e.track.stop()})),e.disconnect()),null}))}),[]);return Object(c.useEffect)((function(){if(s){var e=function(e){e.persisted||s&&O()};return window.addEventListener("pagehide",e),window.addEventListener("beforeunload",e),function(){window.removeEventListener("pagehide",e),window.removeEventListener("beforeunload",e)}}}),[s,O]),s?Object(L.jsx)(Gt,{roomName:n,room:s,handleLogout:O}):Object(L.jsx)(Mt,{username:m,roomName:n,handleRoomNameChange:h,handleSubmit:f,connecting:j})};function Ht(){var e=Object(c.useState)(""),t=Object(l.a)(e,2),n=t[0],a=t[1],o=Object(c.useState)(""),r=Object(l.a)(o,2),d=r[0],j=r[1],b=Object(c.useState)(""),m=Object(l.a)(b,2),h=m[0],f=m[1],O=Object(i.g)();return Object(L.jsx)("div",{className:"card shadow mx-auto mt-5",style:{width:"30rem"},children:Object(L.jsx)("div",{className:"container mx-1",children:Object(L.jsxs)("div",{className:"card-body p-xs",children:[Object(L.jsx)("h2",{className:"card-title text-center font-weight-bold",children:"Reset Password"}),Object(L.jsxs)("div",{className:"form-group",children:[Object(L.jsx)("label",{children:"Username:"}),Object(L.jsx)("input",{id:"new-username-form",placeholder:"Enter Username",className:"form-control",onChange:function(e){return a(e.target.value)}})]}),Object(L.jsxs)("div",{className:"form-group",children:[Object(L.jsx)("label",{children:"Password:"}),Object(L.jsx)("input",{id:"new-password-form",type:"password",placeholder:"Enter Password",className:"form-control",onChange:function(e){return j(e.target.value)}})]}),Object(L.jsxs)("div",{className:"form-group",children:[Object(L.jsx)("label",{children:"Confirm Password:"}),Object(L.jsx)("input",{id:"new-password-form",type:"password",placeholder:"Enter Password",className:"form-control",onChange:function(e){return f(e.target.value)}})]}),Object(L.jsx)("div",{className:"form-group text-center",children:Object(L.jsx)("button",{type:"submit",className:"btn btn-primary w-100",onClick:function(){return Object(U.isSamePassword)(d,h)?Object(U.isValidPassword)(d)?void(e=n,t=d,u()({method:"PUT",url:"/api/resetPassword",data:{username:e,password:t}})).then((function(){alert("Success! Your Password Has Been Updated"),O.push("/login")})).catch((function(e){console.log(e)})):(alert("Invalid password, password must have a minimum eight characters, at least one uppercase letter, one lowercase letter, one number and one special character"),window.history.replaceState(null,"new page","/resetPassword"),void window.location.reload()):(alert("Passwords do not match, please re-enter"),window.history.replaceState(null,"new page","/resetPassword"),void window.location.reload());var e,t},children:"Submit New Password"})}),Object(L.jsxs)("p",{children:["Changed Your Mind?\xa0",Object(L.jsx)(s.b,{to:"/login",children:"Return To Login!"})]})]})})})}function Zt(e){var t=e.data,n=Object(c.useState)(""),a=Object(l.a)(n,2),o=a[0],r=a[1],s=Object(c.useState)("picture"===t.type),i=Object(l.a)(s,1)[0],d=Object(c.useState)("video"===t.type),u=Object(l.a)(d,1)[0],j=Object(c.useState)("song"===t.type),b=Object(l.a)(j,1)[0],m=function(){var e=Object(He.a)(Je.a.mark((function e(){return Je.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v(t.user).then((function(e){r(e.data.avatar[0].profile_picture)})).catch((function(e){console.log(e.message)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){m()}),[]);var h,f=t.message_date.split("T")[0],O="/api/viewFile/".concat(o),p="/api/viewFile/".concat(t.content);return i?h=Object(L.jsx)("img",{className:"tweet_image",id:"tweet_media_picture",src:p,alt:""}):u?h=Object(L.jsxs)("video",{className:"tweet_video",controls:!0,children:[" ",Object(L.jsx)("source",{src:p})]}):b?(console.log("song"),h=Object(L.jsx)("audio",{controls:!0,children:Object(L.jsx)("source",{src:p})})):h=t.content,Object(L.jsxs)("div",{id:"container_tweet",children:[Object(L.jsxs)("div",{className:"tweet_header",children:[Object(L.jsx)("div",{className:"tweet_img",children:Object(L.jsx)("img",{className:"tweet_header",id:"tweet_author_picture",src:O,alt:""})}),Object(L.jsxs)("div",{className:"tweet_text",children:[Object(L.jsx)("span",{style:{fontSize:"13px",fontWeight:"bold"},id:"author_username",children:t.user}),Object(L.jsx)("span",{style:{fontSize:"10px"},id:"date",children:f})]})]}),Object(L.jsx)(ke.a,{variant:"middle"}),Object(L.jsx)("div",{className:"tweet_content",children:Object(L.jsx)("p",{style:{textAlign:"left"},children:h})}),Object(L.jsx)(ke.a,{variant:"middle"})]})}var Yt=Object(ee.a)((function(e){return{button:{margin:e.spacing(1)}}})),$t=n(88);function qt(){var e=Object(H.getCurrentReceiver)();console.log("receiver = ".concat(e));var t=Object(c.useState)(new Map),n=Object(l.a)(t,1)[0],a=Object(c.useState)(!1),o=Object(l.a)(a,2),r=o[0],s=o[1],i=Object(c.useState)(255),d=Object(l.a)(i,2),u=d[0],j=d[1],b=Object(c.useState)(new Set),m=Object(l.a)(b,1)[0],h=Yt(),f=Object(H.getCurrentUsername)();Object(c.useEffect)((function(){console.log("refreshed"),s(!1)}),[r]);var O=function(){var t=Object(He.a)(Je.a.mark((function t(){return Je.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:B(f,e).then((function(e){var t=e.data.messages;console.log("ttt--".concat(t)),t.forEach((function(e){var t=Object(L.jsx)("div",{className:"tContainer",children:Object(L.jsx)(Zt,{data:e})});m.add(t),n.set(e.tweet_id,t)})),s(!0)})).catch((function(e){return console.log(e)}));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();Object(c.useEffect)((function(){O()}),[]);return console.log("td",m),Object(L.jsxs)("div",{className:"container_center",children:[Object(L.jsxs)("div",{style:{backgroundColor:"white",height:"fit-content",borderRadius:"8px"},className:"whatIsOn",children:[Object(L.jsx)("div",{style:{width:"90%",paddingTop:"4px",margin:"auto"},children:Object(L.jsx)(W.a,{multiline:!0,id:"message",label:"what's on your mind!!",variant:"outlined",helperText:"".concat(u," remaining chars"),inputProps:{maxLength:255},onChange:function(e){return function(e){if(e.target.value.length>=0){var t=255-e.target.value.length;j(t)}}(e)},fullWidth:!0})}),Object(L.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"8px"},className:"buttons",children:[Object(L.jsx)(Y.a,{variant:"contained",color:"secondary",id:"button-media",className:h.button,startIcon:Object(L.jsx)(Qe.a,{}),onClick:function(){document.getElementById("fileInputPicture").click()},children:"Photo"}),Object(L.jsx)(Y.a,{variant:"contained",color:"secondary",id:"button-media",className:h.button,startIcon:Object(L.jsx)(et.a,{}),onClick:function(){document.getElementById("fileInputVideo").click()},children:"Video"}),Object(L.jsx)(Y.a,{variant:"contained",color:"secondary",id:"button-media",className:h.button,startIcon:Object(L.jsx)(nt.a,{}),onClick:function(){document.getElementById("fileInputSong").click()},children:"Song"}),Object(L.jsx)(Y.a,{variant:"contained",color:"secondary",className:h.button,startIcon:Object(L.jsx)(Ye.a,{}),onClick:function(){j(255);var t=document.getElementById("message").value;if("undefined"!==typeof t&&0!==t.length){var n=(new Date).toISOString(),c=$t("".concat(t).concat(f).concat(n));F({user:f,message_id:c,type:"text",content:t,message_date:n,receiver:e}).then((function(e){console.log(e.message)})).catch((function(e){console.log(e.message)}))}},children:"Create post"}),Object(L.jsx)("input",{className:"FileUpload",accept:".jpg,.png,.gif",id:"fileInputPicture",type:"file",onChange:function(t){var n=new FormData,c=document.getElementById("fileInputPicture").value;n.append("image",t.target.files[0],c);var a={method:"POST",body:n,redirect:"follow"},o=document.getElementById("message").value;if("undefined"!==typeof o){var r=(new Date).toISOString(),s=$t("".concat(o).concat(f).concat(r));fetch("/api/uploadFile",a).then((function(e){return e.text()})).then((function(t){var n={user:f,message_id:s,type:"picture",content:JSON.parse(t).data,message_date:r,receiver:e};console.log("is this good? ".concat(n)),F(n).then((function(e){console.log(e.message)})).catch((function(e){console.log(e.message)}))})).catch((function(e){console.log(e)}))}},hidden:!0}),Object(L.jsx)("input",{className:"FileUpload",id:"fileInputVideo",type:"file",onChange:function(t){var n=new FormData,c=document.getElementById("fileInputVideo").value;n.append("image",t.target.files[0],c);var a={method:"POST",body:n,redirect:"follow"},o=document.getElementById("message").value;if("undefined"!==typeof o){var r=(new Date).toISOString(),s=$t("".concat(o).concat(f).concat(r));fetch("/api/uploadFile",a).then((function(e){return e.text()})).then((function(t){F({user:f,message_id:s,type:"video",content:JSON.parse(t).data,message_date:r,receiver:e}).then((function(e){console.log(e.message)})).catch((function(e){console.log(e.message)}))})).catch((function(e){console.log(e)}))}},hidden:!0}),Object(L.jsx)("input",{className:"FileUpload",id:"fileInputSong",type:"file",onChange:function(t){var n=new FormData,c=document.getElementById("fileInputSong").value;n.append("image",t.target.files[0],c);var a={method:"POST",body:n,redirect:"follow"},o=document.getElementById("message").value;if("undefined"!==typeof o){var r=(new Date).toISOString(),s=$t("".concat(o).concat(f).concat(r));fetch("/api/uploadFile",a).then((function(e){return e.text()})).then((function(t){F({user:f,message_id:s,type:"song",content:JSON.parse(t).data,message_date:r,receiver:e}).then((function(e){console.log(e.message)})).catch((function(e){console.log(e.message)}))})).catch((function(e){console.log(e)}))}},hidden:!0})]})]}),Object(L.jsx)("div",{children:m})]})}function Kt(){var e=Object(H.getCurrentReceiver)();return console.log("receiver = ".concat(e)),Object(L.jsxs)("div",{children:[Object(L.jsx)(Se,{}),Object(L.jsx)("div",{className:"home",children:Object(L.jsx)("div",{children:Object(L.jsx)(qt,{})})})]})}var Qt=function(){return Object(L.jsx)(s.a,{children:Object(L.jsxs)(i.d,{children:[Object(L.jsx)(i.b,{path:"/",exact:!0,render:function(){return Object(L.jsx)(D,{})}}),Object(L.jsx)(i.b,{path:"/registration",exact:!0,render:function(){return Object(L.jsx)(D,{})}}),Object(L.jsx)(i.b,{path:"/login",exact:!0,render:function(){return Object(L.jsx)(St,{})}}),Object(L.jsx)(i.b,{path:"/signup/",exact:!0,render:function(){return Object(L.jsx)(Lt,{})}}),Object(L.jsx)(i.b,{path:"/home",component:function(){return Object(L.jsx)(Ut,{})}}),Object(L.jsx)(i.b,{path:"/profile",exact:!0,render:function(){return Object(L.jsx)(Ct,{})}}),Object(L.jsx)(i.b,{path:"/resetPassword",exact:!0,render:function(){return Object(L.jsx)(Ht,{})}}),Object(L.jsx)(i.b,{path:"/temp",exact:!0,render:function(){return Object(L.jsx)(Dt,{})}}),Object(L.jsx)(i.b,{path:"/videochat",exact:!0,render:function(){return Object(L.jsx)(Jt,{})}}),Object(L.jsx)(i.b,{path:"/message",exact:!0,render:function(){return Object(L.jsx)(Kt,{})}})]})})};r.a.render(Object(L.jsx)(s.a,{children:Object(L.jsx)(Qt,{})}),document.getElementById("react-root"))},47:function(e,t){e.exports={isValidPassword:function(e){return new RegExp("^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*])(?=.{8,})").test(e)},isValidUsername:function(e){return new RegExp("^[a-zA-Z0-9_]*$").test(e)},isValidEmail:function(e){return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())},isSamePassword:function(e,t){return e===t}}},54:function(e,t,n){},89:function(e,t,n){},90:function(e,t,n){}},[[352,1,2]]]);
//# sourceMappingURL=main.1ec8db35.chunk.js.map